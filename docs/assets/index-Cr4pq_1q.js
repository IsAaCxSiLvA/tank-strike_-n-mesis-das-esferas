(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=i(l);fetch(l.href,a)}})();function Mv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uf={exports:{}},ll={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function AC(){if(Jg)return ll;Jg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,l,a){var c=null;if(a!==void 0&&(c=""+a),l.key!==void 0&&(c=""+l.key),"key"in l){a={};for(var h in l)h!=="key"&&(a[h]=l[h])}else a=l;return l=a.ref,{$$typeof:t,type:s,key:c,ref:l!==void 0?l:null,props:a}}return ll.Fragment=e,ll.jsx=i,ll.jsxs=i,ll}var Kg;function bC(){return Kg||(Kg=1,uf.exports=AC()),uf.exports}var C=bC(),cf={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function NC(){if(Xg)return pe;Xg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function x(R){return R===null||typeof R!="object"?null:(R=E&&R[E]||R["@@iterator"],typeof R=="function"?R:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,U={};function G(R,V,W){this.props=R,this.context=V,this.refs=U,this.updater=W||N}G.prototype.isReactComponent={},G.prototype.setState=function(R,V){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,V,"setState")},G.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function K(){}K.prototype=G.prototype;function F(R,V,W){this.props=R,this.context=V,this.refs=U,this.updater=W||N}var X=F.prototype=new K;X.constructor=F,D(X,G.prototype),X.isPureReactComponent=!0;var se=Array.isArray;function te(){}var Y={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function M(R,V,W){var oe=W.ref;return{$$typeof:t,type:R,key:V,ref:oe!==void 0?oe:null,props:W}}function J(R,V){return M(R.type,V,R.props)}function ae(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function ie(R){var V={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(W){return V[W]})}var re=/\/+/g;function _e(R,V){return typeof R=="object"&&R!==null&&R.key!=null?ie(""+R.key):V.toString(36)}function $(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(te,te):(R.status="pending",R.then(function(V){R.status==="pending"&&(R.status="fulfilled",R.value=V)},function(V){R.status==="pending"&&(R.status="rejected",R.reason=V)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function w(R,V,W,oe,me){var Ee=typeof R;(Ee==="undefined"||Ee==="boolean")&&(R=null);var Ue=!1;if(R===null)Ue=!0;else switch(Ee){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(R.$$typeof){case t:case e:Ue=!0;break;case v:return Ue=R._init,w(Ue(R._payload),V,W,oe,me)}}if(Ue)return me=me(R),Ue=oe===""?"."+_e(R,0):oe,se(me)?(W="",Ue!=null&&(W=Ue.replace(re,"$&/")+"/"),w(me,V,W,"",function(hs){return hs})):me!=null&&(ae(me)&&(me=J(me,W+(me.key==null||R&&R.key===me.key?"":(""+me.key).replace(re,"$&/")+"/")+Ue)),V.push(me)),1;Ue=0;var xt=oe===""?".":oe+":";if(se(R))for(var je=0;je<R.length;je++)oe=R[je],Ee=xt+_e(oe,je),Ue+=w(oe,V,W,Ee,me);else if(je=x(R),typeof je=="function")for(R=je.call(R),je=0;!(oe=R.next()).done;)oe=oe.value,Ee=xt+_e(oe,je++),Ue+=w(oe,V,W,Ee,me);else if(Ee==="object"){if(typeof R.then=="function")return w($(R),V,W,oe,me);throw V=String(R),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function q(R,V,W){if(R==null)return R;var oe=[],me=0;return w(R,oe,"","",function(Ee){return V.call(W,Ee,me++)}),oe}function j(R){if(R._status===-1){var V=R._result;V=V(),V.then(function(W){(R._status===0||R._status===-1)&&(R._status=1,R._result=W)},function(W){(R._status===0||R._status===-1)&&(R._status=2,R._result=W)}),R._status===-1&&(R._status=0,R._result=V)}if(R._status===1)return R._result.default;throw R._result}var ue=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},ke={map:q,forEach:function(R,V,W){q(R,function(){V.apply(this,arguments)},W)},count:function(R){var V=0;return q(R,function(){V++}),V},toArray:function(R){return q(R,function(V){return V})||[]},only:function(R){if(!ae(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return pe.Activity=_,pe.Children=ke,pe.Component=G,pe.Fragment=i,pe.Profiler=l,pe.PureComponent=F,pe.StrictMode=s,pe.Suspense=g,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,pe.__COMPILER_RUNTIME={__proto__:null,c:function(R){return Y.H.useMemoCache(R)}},pe.cache=function(R){return function(){return R.apply(null,arguments)}},pe.cacheSignal=function(){return null},pe.cloneElement=function(R,V,W){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var oe=D({},R.props),me=R.key;if(V!=null)for(Ee in V.key!==void 0&&(me=""+V.key),V)!ne.call(V,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&V.ref===void 0||(oe[Ee]=V[Ee]);var Ee=arguments.length-2;if(Ee===1)oe.children=W;else if(1<Ee){for(var Ue=Array(Ee),xt=0;xt<Ee;xt++)Ue[xt]=arguments[xt+2];oe.children=Ue}return M(R.type,me,oe)},pe.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:a,_context:R},R},pe.createElement=function(R,V,W){var oe,me={},Ee=null;if(V!=null)for(oe in V.key!==void 0&&(Ee=""+V.key),V)ne.call(V,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(me[oe]=V[oe]);var Ue=arguments.length-2;if(Ue===1)me.children=W;else if(1<Ue){for(var xt=Array(Ue),je=0;je<Ue;je++)xt[je]=arguments[je+2];me.children=xt}if(R&&R.defaultProps)for(oe in Ue=R.defaultProps,Ue)me[oe]===void 0&&(me[oe]=Ue[oe]);return M(R,Ee,me)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(R){return{$$typeof:h,render:R}},pe.isValidElement=ae,pe.lazy=function(R){return{$$typeof:v,_payload:{_status:-1,_result:R},_init:j}},pe.memo=function(R,V){return{$$typeof:m,type:R,compare:V===void 0?null:V}},pe.startTransition=function(R){var V=Y.T,W={};Y.T=W;try{var oe=R(),me=Y.S;me!==null&&me(W,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(te,ue)}catch(Ee){ue(Ee)}finally{V!==null&&W.types!==null&&(V.types=W.types),Y.T=V}},pe.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},pe.use=function(R){return Y.H.use(R)},pe.useActionState=function(R,V,W){return Y.H.useActionState(R,V,W)},pe.useCallback=function(R,V){return Y.H.useCallback(R,V)},pe.useContext=function(R){return Y.H.useContext(R)},pe.useDebugValue=function(){},pe.useDeferredValue=function(R,V){return Y.H.useDeferredValue(R,V)},pe.useEffect=function(R,V){return Y.H.useEffect(R,V)},pe.useEffectEvent=function(R){return Y.H.useEffectEvent(R)},pe.useId=function(){return Y.H.useId()},pe.useImperativeHandle=function(R,V,W){return Y.H.useImperativeHandle(R,V,W)},pe.useInsertionEffect=function(R,V){return Y.H.useInsertionEffect(R,V)},pe.useLayoutEffect=function(R,V){return Y.H.useLayoutEffect(R,V)},pe.useMemo=function(R,V){return Y.H.useMemo(R,V)},pe.useOptimistic=function(R,V){return Y.H.useOptimistic(R,V)},pe.useReducer=function(R,V,W){return Y.H.useReducer(R,V,W)},pe.useRef=function(R){return Y.H.useRef(R)},pe.useState=function(R){return Y.H.useState(R)},pe.useSyncExternalStore=function(R,V,W){return Y.H.useSyncExternalStore(R,V,W)},pe.useTransition=function(){return Y.H.useTransition()},pe.version="19.2.3",pe}var Qg;function ld(){return Qg||(Qg=1,cf.exports=NC()),cf.exports}var de=ld();const RC=Mv(de);var ff={exports:{}},rl={},df={exports:{}},hf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function wC(){return $g||($g=1,(function(t){function e(w,q){var j=w.length;w.push(q);e:for(;0<j;){var ue=j-1>>>1,ke=w[ue];if(0<l(ke,q))w[ue]=q,w[j]=ke,j=ue;else break e}}function i(w){return w.length===0?null:w[0]}function s(w){if(w.length===0)return null;var q=w[0],j=w.pop();if(j!==q){w[0]=j;e:for(var ue=0,ke=w.length,R=ke>>>1;ue<R;){var V=2*(ue+1)-1,W=w[V],oe=V+1,me=w[oe];if(0>l(W,j))oe<ke&&0>l(me,W)?(w[ue]=me,w[oe]=j,ue=oe):(w[ue]=W,w[V]=j,ue=V);else if(oe<ke&&0>l(me,j))w[ue]=me,w[oe]=j,ue=oe;else break e}}return q}function l(w,q){var j=w.sortIndex-q.sortIndex;return j!==0?j:w.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],m=[],v=1,_=null,E=3,x=!1,N=!1,D=!1,U=!1,G=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function X(w){for(var q=i(m);q!==null;){if(q.callback===null)s(m);else if(q.startTime<=w)s(m),q.sortIndex=q.expirationTime,e(g,q);else break;q=i(m)}}function se(w){if(D=!1,X(w),!N)if(i(g)!==null)N=!0,te||(te=!0,ie());else{var q=i(m);q!==null&&$(se,q.startTime-w)}}var te=!1,Y=-1,ne=5,M=-1;function J(){return U?!0:!(t.unstable_now()-M<ne)}function ae(){if(U=!1,te){var w=t.unstable_now();M=w;var q=!0;try{e:{N=!1,D&&(D=!1,K(Y),Y=-1),x=!0;var j=E;try{t:{for(X(w),_=i(g);_!==null&&!(_.expirationTime>w&&J());){var ue=_.callback;if(typeof ue=="function"){_.callback=null,E=_.priorityLevel;var ke=ue(_.expirationTime<=w);if(w=t.unstable_now(),typeof ke=="function"){_.callback=ke,X(w),q=!0;break t}_===i(g)&&s(g),X(w)}else s(g);_=i(g)}if(_!==null)q=!0;else{var R=i(m);R!==null&&$(se,R.startTime-w),q=!1}}break e}finally{_=null,E=j,x=!1}q=void 0}}finally{q?ie():te=!1}}}var ie;if(typeof F=="function")ie=function(){F(ae)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,_e=re.port2;re.port1.onmessage=ae,ie=function(){_e.postMessage(null)}}else ie=function(){G(ae,0)};function $(w,q){Y=G(function(){w(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(w){w.callback=null},t.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<w?Math.floor(1e3/w):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(w){switch(E){case 1:case 2:case 3:var q=3;break;default:q=E}var j=E;E=q;try{return w()}finally{E=j}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(w,q){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var j=E;E=w;try{return q()}finally{E=j}},t.unstable_scheduleCallback=function(w,q,j){var ue=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ue+j:ue):j=ue,w){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=j+ke,w={id:v++,callback:q,priorityLevel:w,startTime:j,expirationTime:ke,sortIndex:-1},j>ue?(w.sortIndex=j,e(m,w),i(g)===null&&w===i(m)&&(D?(K(Y),Y=-1):D=!0,$(se,j-ue))):(w.sortIndex=ke,e(g,w),N||x||(N=!0,te||(te=!0,ie()))),w},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(w){var q=E;return function(){var j=E;E=q;try{return w.apply(this,arguments)}finally{E=j}}}})(hf)),hf}var Wg;function IC(){return Wg||(Wg=1,df.exports=wC()),df.exports}var pf={exports:{}},Et={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function MC(){if(Zg)return Et;Zg=1;var t=ld();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function a(g,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:_==null?null:""+_,children:g,containerInfo:m,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Et.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Et.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(g,m,null,v)},Et.flushSync=function(g){var m=c.T,v=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=m,s.p=v,s.d.f()}},Et.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},Et.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Et.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:x}):v==="script"&&s.d.X(g,{crossOrigin:_,integrity:E,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Et.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},Et.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin);s.d.L(g,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Et.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=h(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},Et.requestFormReset=function(g){s.d.r(g)},Et.unstable_batchedUpdates=function(g,m){return g(m)},Et.useFormState=function(g,m,v){return c.H.useFormState(g,m,v)},Et.useFormStatus=function(){return c.H.useHostTransitionStatus()},Et.version="19.2.3",Et}var jg;function DC(){if(jg)return pf.exports;jg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),pf.exports=MC(),pf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function UC(){if(ey)return rl;ey=1;var t=IC(),e=ld(),i=DC();function s(n){var o="https://react.dev/errors/"+n;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)o+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function a(n){var o=n,r=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(r=o.return),n=o.return;while(n)}return o.tag===3?r:null}function c(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function h(n){if(n.tag===31){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function g(n){if(a(n)!==n)throw Error(s(188))}function m(n){var o=n.alternate;if(!o){if(o=a(n),o===null)throw Error(s(188));return o!==n?null:n}for(var r=n,u=o;;){var p=r.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){r=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===r)return g(p),n;if(y===u)return g(p),o;y=y.sibling}throw Error(s(188))}if(r.return!==u.return)r=p,u=y;else{for(var S=!1,T=p.child;T;){if(T===r){S=!0,r=p,u=y;break}if(T===u){S=!0,u=p,r=y;break}T=T.sibling}if(!S){for(T=y.child;T;){if(T===r){S=!0,r=y,u=p;break}if(T===u){S=!0,u=y,r=p;break}T=T.sibling}if(!S)throw Error(s(189))}}if(r.alternate!==u)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?n:o}function v(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n;for(n=n.child;n!==null;){if(o=v(n),o!==null)return o;n=n.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),F=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function ie(n){return n===null||typeof n!="object"?null:(n=ae&&n[ae]||n["@@iterator"],typeof n=="function"?n:null)}var re=Symbol.for("react.client.reference");function _e(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===re?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case G:return"Profiler";case U:return"StrictMode";case se:return"Suspense";case te:return"SuspenseList";case M:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case N:return"Portal";case F:return n.displayName||"Context";case K:return(n._context.displayName||"Context")+".Consumer";case X:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Y:return o=n.displayName||null,o!==null?o:_e(n.type)||"Memo";case ne:o=n._payload,n=n._init;try{return _e(n(o))}catch{}}return null}var $=Array.isArray,w=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},ue=[],ke=-1;function R(n){return{current:n}}function V(n){0>ke||(n.current=ue[ke],ue[ke]=null,ke--)}function W(n,o){ke++,ue[ke]=n.current,n.current=o}var oe=R(null),me=R(null),Ee=R(null),Ue=R(null);function xt(n,o){switch(W(Ee,o),W(me,n),W(oe,null),o.nodeType){case 9:case 11:n=(n=o.documentElement)&&(n=n.namespaceURI)?mg(n):0;break;default:if(n=o.tagName,o=o.namespaceURI)o=mg(o),n=gg(o,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}V(oe),W(oe,n)}function je(){V(oe),V(me),V(Ee)}function hs(n){n.memoizedState!==null&&W(Ue,n);var o=oe.current,r=gg(o,n.type);o!==r&&(W(me,n),W(oe,r))}function Dl(n){me.current===n&&(V(oe),V(me)),Ue.current===n&&(V(Ue),nl._currentValue=j)}var Fa,Yd;function wi(n){if(Fa===void 0)try{throw Error()}catch(r){var o=r.stack.trim().match(/\n( *(at )?)/);Fa=o&&o[1]||"",Yd=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fa+n+Yd}var Ya=!1;function Ja(n,o){if(!n||Ya)return"";Ya=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var B=function(){throw Error()};if(Object.defineProperty(B.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(B,[])}catch(O){var P=O}Reflect.construct(n,[],B)}else{try{B.call()}catch(O){P=O}n.call(B.prototype)}}else{try{throw Error()}catch(O){P=O}(B=n())&&typeof B.catch=="function"&&B.catch(function(){})}}catch(O){if(O&&P&&typeof O.stack=="string")return[O.stack,P.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),S=y[0],T=y[1];if(S&&T){var A=S.split(`
`),k=T.split(`
`);for(p=u=0;u<A.length&&!A[u].includes("DetermineComponentFrameRoot");)u++;for(;p<k.length&&!k[p].includes("DetermineComponentFrameRoot");)p++;if(u===A.length||p===k.length)for(u=A.length-1,p=k.length-1;1<=u&&0<=p&&A[u]!==k[p];)p--;for(;1<=u&&0<=p;u--,p--)if(A[u]!==k[p]){if(u!==1||p!==1)do if(u--,p--,0>p||A[u]!==k[p]){var z=`
`+A[u].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=u&&0<=p);break}}}finally{Ya=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?wi(r):""}function nS(n,o){switch(n.tag){case 26:case 27:case 5:return wi(n.type);case 16:return wi("Lazy");case 13:return n.child!==o&&o!==null?wi("Suspense Fallback"):wi("Suspense");case 19:return wi("SuspenseList");case 0:case 15:return Ja(n.type,!1);case 11:return Ja(n.type.render,!1);case 1:return Ja(n.type,!0);case 31:return wi("Activity");default:return""}}function Jd(n){try{var o="",r=null;do o+=nS(n,r),r=n,n=n.return;while(n);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ka=Object.prototype.hasOwnProperty,Xa=t.unstable_scheduleCallback,Qa=t.unstable_cancelCallback,iS=t.unstable_shouldYield,oS=t.unstable_requestPaint,zt=t.unstable_now,sS=t.unstable_getCurrentPriorityLevel,Kd=t.unstable_ImmediatePriority,Xd=t.unstable_UserBlockingPriority,Ul=t.unstable_NormalPriority,lS=t.unstable_LowPriority,Qd=t.unstable_IdlePriority,rS=t.log,aS=t.unstable_setDisableYieldValue,ps=null,Gt=null;function Zn(n){if(typeof rS=="function"&&aS(n),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(ps,n)}catch{}}var Ht=Math.clz32?Math.clz32:fS,uS=Math.log,cS=Math.LN2;function fS(n){return n>>>=0,n===0?32:31-(uS(n)/cS|0)|0}var Ll=256,kl=262144,Pl=4194304;function Ii(n){var o=n&42;if(o!==0)return o;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ol(n,o,r){var u=n.pendingLanes;if(u===0)return 0;var p=0,y=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~y,u!==0?p=Ii(u):(S&=T,S!==0?p=Ii(S):r||(r=T&~n,r!==0&&(p=Ii(r))))):(T=u&~y,T!==0?p=Ii(T):S!==0?p=Ii(S):r||(r=u&~n,r!==0&&(p=Ii(r)))),p===0?0:o!==0&&o!==p&&(o&y)===0&&(y=p&-p,r=o&-o,y>=r||y===32&&(r&4194048)!==0)?o:p}function ms(n,o){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&o)===0}function dS(n,o){switch(n){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $d(){var n=Pl;return Pl<<=1,(Pl&62914560)===0&&(Pl=4194304),n}function $a(n){for(var o=[],r=0;31>r;r++)o.push(n);return o}function gs(n,o){n.pendingLanes|=o,o!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function hS(n,o,r,u,p,y){var S=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var T=n.entanglements,A=n.expirationTimes,k=n.hiddenUpdates;for(r=S&~r;0<r;){var z=31-Ht(r),B=1<<z;T[z]=0,A[z]=-1;var P=k[z];if(P!==null)for(k[z]=null,z=0;z<P.length;z++){var O=P[z];O!==null&&(O.lane&=-536870913)}r&=~B}u!==0&&Wd(n,u,0),y!==0&&p===0&&n.tag!==0&&(n.suspendedLanes|=y&~(S&~o))}function Wd(n,o,r){n.pendingLanes|=o,n.suspendedLanes&=~o;var u=31-Ht(o);n.entangledLanes|=o,n.entanglements[u]=n.entanglements[u]|1073741824|r&261930}function Zd(n,o){var r=n.entangledLanes|=o;for(n=n.entanglements;r;){var u=31-Ht(r),p=1<<u;p&o|n[u]&o&&(n[u]|=o),r&=~p}}function jd(n,o){var r=o&-o;return r=(r&42)!==0?1:Wa(r),(r&(n.suspendedLanes|o))!==0?0:r}function Wa(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Za(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function eh(){var n=q.p;return n!==0?n:(n=window.event,n===void 0?32:Gg(n.type))}function th(n,o){var r=q.p;try{return q.p=n,o()}finally{q.p=r}}var jn=Math.random().toString(36).slice(2),ht="__reactFiber$"+jn,wt="__reactProps$"+jn,lo="__reactContainer$"+jn,ja="__reactEvents$"+jn,pS="__reactListeners$"+jn,mS="__reactHandles$"+jn,nh="__reactResources$"+jn,ys="__reactMarker$"+jn;function eu(n){delete n[ht],delete n[wt],delete n[ja],delete n[pS],delete n[mS]}function ro(n){var o=n[ht];if(o)return o;for(var r=n.parentNode;r;){if(o=r[lo]||r[ht]){if(r=o.alternate,o.child!==null||r!==null&&r.child!==null)for(n=Cg(n);n!==null;){if(r=n[ht])return r;n=Cg(n)}return o}n=r,r=n.parentNode}return null}function ao(n){if(n=n[ht]||n[lo]){var o=n.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return n}return null}function vs(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n.stateNode;throw Error(s(33))}function uo(n){var o=n[nh];return o||(o=n[nh]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function at(n){n[ys]=!0}var ih=new Set,oh={};function Mi(n,o){co(n,o),co(n+"Capture",o)}function co(n,o){for(oh[n]=o,n=0;n<o.length;n++)ih.add(o[n])}var gS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sh={},lh={};function yS(n){return Ka.call(lh,n)?!0:Ka.call(sh,n)?!1:gS.test(n)?lh[n]=!0:(sh[n]=!0,!1)}function zl(n,o,r){if(yS(o))if(r===null)n.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(o);return}}n.setAttribute(o,""+r)}}function Gl(n,o,r){if(r===null)n.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttribute(o,""+r)}}function xn(n,o,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(o,r,""+u)}}function Xt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function rh(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function vS(n,o,r){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o);if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return p.call(this)},set:function(S){r=""+S,y.call(this,S)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(S){r=""+S},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function tu(n){if(!n._valueTracker){var o=rh(n)?"checked":"value";n._valueTracker=vS(n,o,""+n[o])}}function ah(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var r=o.getValue(),u="";return n&&(u=rh(n)?n.checked?"true":"false":n.value),n=u,n!==r?(o.setValue(n),!0):!1}function Hl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var _S=/[\n"\\]/g;function Qt(n){return n.replace(_S,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function nu(n,o,r,u,p,y,S,T){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),o!=null?S==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+Xt(o)):n.value!==""+Xt(o)&&(n.value=""+Xt(o)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),o!=null?iu(n,S,Xt(o)):r!=null?iu(n,S,Xt(r)):u!=null&&n.removeAttribute("value"),p==null&&y!=null&&(n.defaultChecked=!!y),p!=null&&(n.checked=p&&typeof p!="function"&&typeof p!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Xt(T):n.removeAttribute("name")}function uh(n,o,r,u,p,y,S,T){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),o!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){tu(n);return}r=r!=null?""+Xt(r):"",o=o!=null?""+Xt(o):r,T||o===n.value||(n.value=o),n.defaultValue=o}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),tu(n)}function iu(n,o,r){o==="number"&&Hl(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function fo(n,o,r,u){if(n=n.options,o){o={};for(var p=0;p<r.length;p++)o["$"+r[p]]=!0;for(r=0;r<n.length;r++)p=o.hasOwnProperty("$"+n[r].value),n[r].selected!==p&&(n[r].selected=p),p&&u&&(n[r].defaultSelected=!0)}else{for(r=""+Xt(r),o=null,p=0;p<n.length;p++){if(n[p].value===r){n[p].selected=!0,u&&(n[p].defaultSelected=!0);return}o!==null||n[p].disabled||(o=n[p])}o!==null&&(o.selected=!0)}}function ch(n,o,r){if(o!=null&&(o=""+Xt(o),o!==n.value&&(n.value=o),r==null)){n.defaultValue!==o&&(n.defaultValue=o);return}n.defaultValue=r!=null?""+Xt(r):""}function fh(n,o,r,u){if(o==null){if(u!=null){if(r!=null)throw Error(s(92));if($(u)){if(1<u.length)throw Error(s(93));u=u[0]}r=u}r==null&&(r=""),o=r}r=Xt(o),n.defaultValue=r,u=n.textContent,u===r&&u!==""&&u!==null&&(n.value=u),tu(n)}function ho(n,o){if(o){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=o;return}}n.textContent=o}var ES=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dh(n,o,r){var u=o.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?n.setProperty(o,""):o==="float"?n.cssFloat="":n[o]="":u?n.setProperty(o,r):typeof r!="number"||r===0||ES.has(o)?o==="float"?n.cssFloat=r:n[o]=(""+r).trim():n[o]=r+"px"}function hh(n,o,r){if(o!=null&&typeof o!="object")throw Error(s(62));if(n=n.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var p in o)u=o[p],o.hasOwnProperty(p)&&r[p]!==u&&dh(n,p,u)}else for(var y in o)o.hasOwnProperty(y)&&dh(n,y,o[y])}function ou(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),TS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bl(n){return TS.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function An(){}var su=null;function lu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var po=null,mo=null;function ph(n){var o=ao(n);if(o&&(n=o.stateNode)){var r=n[wt]||null;e:switch(n=o.stateNode,o.type){case"input":if(nu(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),o=r.name,r.type==="radio"&&o!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Qt(""+o)+'"][type="radio"]'),o=0;o<r.length;o++){var u=r[o];if(u!==n&&u.form===n.form){var p=u[wt]||null;if(!p)throw Error(s(90));nu(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<r.length;o++)u=r[o],u.form===n.form&&ah(u)}break e;case"textarea":ch(n,r.value,r.defaultValue);break e;case"select":o=r.value,o!=null&&fo(n,!!r.multiple,o,!1)}}}var ru=!1;function mh(n,o,r){if(ru)return n(o,r);ru=!0;try{var u=n(o);return u}finally{if(ru=!1,(po!==null||mo!==null)&&(Rr(),po&&(o=po,n=mo,mo=po=null,ph(o),n)))for(o=0;o<n.length;o++)ph(n[o])}}function _s(n,o){var r=n.stateNode;if(r===null)return null;var u=r[wt]||null;if(u===null)return null;r=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(s(231,o,typeof r));return r}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),au=!1;if(bn)try{var Es={};Object.defineProperty(Es,"passive",{get:function(){au=!0}}),window.addEventListener("test",Es,Es),window.removeEventListener("test",Es,Es)}catch{au=!1}var ei=null,uu=null,Vl=null;function gh(){if(Vl)return Vl;var n,o=uu,r=o.length,u,p="value"in ei?ei.value:ei.textContent,y=p.length;for(n=0;n<r&&o[n]===p[n];n++);var S=r-n;for(u=1;u<=S&&o[r-u]===p[y-u];u++);return Vl=p.slice(n,1<u?1-u:void 0)}function ql(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Fl(){return!0}function yh(){return!1}function It(n){function o(r,u,p,y,S){this._reactName=r,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(r=n[T],this[T]=r?r(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Fl:yh,this.isPropagationStopped=yh,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),o}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yl=It(Di),Ss=_({},Di,{view:0,detail:0}),CS=It(Ss),cu,fu,Ts,Jl=_({},Ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ts&&(Ts&&n.type==="mousemove"?(cu=n.screenX-Ts.screenX,fu=n.screenY-Ts.screenY):fu=cu=0,Ts=n),cu)},movementY:function(n){return"movementY"in n?n.movementY:fu}}),vh=It(Jl),xS=_({},Jl,{dataTransfer:0}),AS=It(xS),bS=_({},Ss,{relatedTarget:0}),du=It(bS),NS=_({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),RS=It(NS),wS=_({},Di,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),IS=It(wS),MS=_({},Di,{data:0}),_h=It(MS),DS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},US={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kS(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=LS[n])?!!o[n]:!1}function hu(){return kS}var PS=_({},Ss,{key:function(n){if(n.key){var o=DS[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=ql(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?US[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hu,charCode:function(n){return n.type==="keypress"?ql(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ql(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),OS=It(PS),zS=_({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eh=It(zS),GS=_({},Ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hu}),HS=It(GS),BS=_({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),VS=It(BS),qS=_({},Jl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),FS=It(qS),YS=_({},Di,{newState:0,oldState:0}),JS=It(YS),KS=[9,13,27,32],pu=bn&&"CompositionEvent"in window,Cs=null;bn&&"documentMode"in document&&(Cs=document.documentMode);var XS=bn&&"TextEvent"in window&&!Cs,Sh=bn&&(!pu||Cs&&8<Cs&&11>=Cs),Th=" ",Ch=!1;function xh(n,o){switch(n){case"keyup":return KS.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ah(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var go=!1;function QS(n,o){switch(n){case"compositionend":return Ah(o);case"keypress":return o.which!==32?null:(Ch=!0,Th);case"textInput":return n=o.data,n===Th&&Ch?null:n;default:return null}}function $S(n,o){if(go)return n==="compositionend"||!pu&&xh(n,o)?(n=gh(),Vl=uu=ei=null,go=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Sh&&o.locale!=="ko"?null:o.data;default:return null}}var WS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bh(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!WS[n.type]:o==="textarea"}function Nh(n,o,r,u){po?mo?mo.push(u):mo=[u]:po=u,o=kr(o,"onChange"),0<o.length&&(r=new Yl("onChange","change",null,r,u),n.push({event:r,listeners:o}))}var xs=null,As=null;function ZS(n){ug(n,0)}function Kl(n){var o=vs(n);if(ah(o))return n}function Rh(n,o){if(n==="change")return o}var wh=!1;if(bn){var mu;if(bn){var gu="oninput"in document;if(!gu){var Ih=document.createElement("div");Ih.setAttribute("oninput","return;"),gu=typeof Ih.oninput=="function"}mu=gu}else mu=!1;wh=mu&&(!document.documentMode||9<document.documentMode)}function Mh(){xs&&(xs.detachEvent("onpropertychange",Dh),As=xs=null)}function Dh(n){if(n.propertyName==="value"&&Kl(As)){var o=[];Nh(o,As,n,lu(n)),mh(ZS,o)}}function jS(n,o,r){n==="focusin"?(Mh(),xs=o,As=r,xs.attachEvent("onpropertychange",Dh)):n==="focusout"&&Mh()}function eT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Kl(As)}function tT(n,o){if(n==="click")return Kl(o)}function nT(n,o){if(n==="input"||n==="change")return Kl(o)}function iT(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var Bt=typeof Object.is=="function"?Object.is:iT;function bs(n,o){if(Bt(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var r=Object.keys(n),u=Object.keys(o);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var p=r[u];if(!Ka.call(o,p)||!Bt(n[p],o[p]))return!1}return!0}function Uh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Lh(n,o){var r=Uh(n);n=0;for(var u;r;){if(r.nodeType===3){if(u=n+r.textContent.length,n<=o&&u>=o)return{node:r,offset:o-n};n=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Uh(r)}}function kh(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?kh(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Ph(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var o=Hl(n.document);o instanceof n.HTMLIFrameElement;){try{var r=typeof o.contentWindow.location.href=="string"}catch{r=!1}if(r)n=o.contentWindow;else break;o=Hl(n.document)}return o}function yu(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}var oT=bn&&"documentMode"in document&&11>=document.documentMode,yo=null,vu=null,Ns=null,_u=!1;function Oh(n,o,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_u||yo==null||yo!==Hl(u)||(u=yo,"selectionStart"in u&&yu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ns&&bs(Ns,u)||(Ns=u,u=kr(vu,"onSelect"),0<u.length&&(o=new Yl("onSelect","select",null,o,r),n.push({event:o,listeners:u}),o.target=yo)))}function Ui(n,o){var r={};return r[n.toLowerCase()]=o.toLowerCase(),r["Webkit"+n]="webkit"+o,r["Moz"+n]="moz"+o,r}var vo={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionrun:Ui("Transition","TransitionRun"),transitionstart:Ui("Transition","TransitionStart"),transitioncancel:Ui("Transition","TransitionCancel"),transitionend:Ui("Transition","TransitionEnd")},Eu={},zh={};bn&&(zh=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function Li(n){if(Eu[n])return Eu[n];if(!vo[n])return n;var o=vo[n],r;for(r in o)if(o.hasOwnProperty(r)&&r in zh)return Eu[n]=o[r];return n}var Gh=Li("animationend"),Hh=Li("animationiteration"),Bh=Li("animationstart"),sT=Li("transitionrun"),lT=Li("transitionstart"),rT=Li("transitioncancel"),Vh=Li("transitionend"),qh=new Map,Su="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Su.push("scrollEnd");function un(n,o){qh.set(n,o),Mi(o,[n])}var Xl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},$t=[],_o=0,Tu=0;function Ql(){for(var n=_o,o=Tu=_o=0;o<n;){var r=$t[o];$t[o++]=null;var u=$t[o];$t[o++]=null;var p=$t[o];$t[o++]=null;var y=$t[o];if($t[o++]=null,u!==null&&p!==null){var S=u.pending;S===null?p.next=p:(p.next=S.next,S.next=p),u.pending=p}y!==0&&Fh(r,p,y)}}function $l(n,o,r,u){$t[_o++]=n,$t[_o++]=o,$t[_o++]=r,$t[_o++]=u,Tu|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Cu(n,o,r,u){return $l(n,o,r,u),Wl(n)}function ki(n,o){return $l(n,null,null,o),Wl(n)}function Fh(n,o,r){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r);for(var p=!1,y=n.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(p=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,p&&o!==null&&(p=31-Ht(r),n=y.hiddenUpdates,u=n[p],u===null?n[p]=[o]:u.push(o),o.lane=r|536870912),y):null}function Wl(n){if(50<Qs)throw Qs=0,Dc=null,Error(s(185));for(var o=n.return;o!==null;)n=o,o=n.return;return n.tag===3?n.stateNode:null}var Eo={};function aT(n,o,r,u){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(n,o,r,u){return new aT(n,o,r,u)}function xu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Nn(n,o){var r=n.alternate;return r===null?(r=Vt(n.tag,o,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=o,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,o=n.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function Yh(n,o){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,o=r.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n}function Zl(n,o,r,u,p,y){var S=0;if(u=n,typeof n=="function")xu(n)&&(S=1);else if(typeof n=="string")S=hC(n,r,oe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case M:return n=Vt(31,r,o,p),n.elementType=M,n.lanes=y,n;case D:return Pi(r.children,p,y,o);case U:S=8,p|=24;break;case G:return n=Vt(12,r,o,p|2),n.elementType=G,n.lanes=y,n;case se:return n=Vt(13,r,o,p),n.elementType=se,n.lanes=y,n;case te:return n=Vt(19,r,o,p),n.elementType=te,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case F:S=10;break e;case K:S=9;break e;case X:S=11;break e;case Y:S=14;break e;case ne:S=16,u=null;break e}S=29,r=Error(s(130,n===null?"null":typeof n,"")),u=null}return o=Vt(S,r,o,p),o.elementType=n,o.type=u,o.lanes=y,o}function Pi(n,o,r,u){return n=Vt(7,n,u,o),n.lanes=r,n}function Au(n,o,r){return n=Vt(6,n,null,o),n.lanes=r,n}function Jh(n){var o=Vt(18,null,null,0);return o.stateNode=n,o}function bu(n,o,r){return o=Vt(4,n.children!==null?n.children:[],n.key,o),o.lanes=r,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}var Kh=new WeakMap;function Wt(n,o){if(typeof n=="object"&&n!==null){var r=Kh.get(n);return r!==void 0?r:(o={value:n,source:o,stack:Jd(o)},Kh.set(n,o),o)}return{value:n,source:o,stack:Jd(o)}}var So=[],To=0,jl=null,Rs=0,Zt=[],jt=0,ti=null,_n=1,En="";function Rn(n,o){So[To++]=Rs,So[To++]=jl,jl=n,Rs=o}function Xh(n,o,r){Zt[jt++]=_n,Zt[jt++]=En,Zt[jt++]=ti,ti=n;var u=_n;n=En;var p=32-Ht(u)-1;u&=~(1<<p),r+=1;var y=32-Ht(o)+p;if(30<y){var S=p-p%5;y=(u&(1<<S)-1).toString(32),u>>=S,p-=S,_n=1<<32-Ht(o)+p|r<<p|u,En=y+n}else _n=1<<y|r<<p|u,En=n}function Nu(n){n.return!==null&&(Rn(n,1),Xh(n,1,0))}function Ru(n){for(;n===jl;)jl=So[--To],So[To]=null,Rs=So[--To],So[To]=null;for(;n===ti;)ti=Zt[--jt],Zt[jt]=null,En=Zt[--jt],Zt[jt]=null,_n=Zt[--jt],Zt[jt]=null}function Qh(n,o){Zt[jt++]=_n,Zt[jt++]=En,Zt[jt++]=ti,_n=o.id,En=o.overflow,ti=n}var pt=null,Ye=null,be=!1,ni=null,en=!1,wu=Error(s(519));function ii(n){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ws(Wt(o,n)),wu}function $h(n){var o=n.stateNode,r=n.type,u=n.memoizedProps;switch(o[ht]=n,o[wt]=u,r){case"dialog":Te("cancel",o),Te("close",o);break;case"iframe":case"object":case"embed":Te("load",o);break;case"video":case"audio":for(r=0;r<Ws.length;r++)Te(Ws[r],o);break;case"source":Te("error",o);break;case"img":case"image":case"link":Te("error",o),Te("load",o);break;case"details":Te("toggle",o);break;case"input":Te("invalid",o),uh(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Te("invalid",o);break;case"textarea":Te("invalid",o),fh(o,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||o.textContent===""+r||u.suppressHydrationWarning===!0||hg(o.textContent,r)?(u.popover!=null&&(Te("beforetoggle",o),Te("toggle",o)),u.onScroll!=null&&Te("scroll",o),u.onScrollEnd!=null&&Te("scrollend",o),u.onClick!=null&&(o.onclick=An),o=!0):o=!1,o||ii(n,!0)}function Wh(n){for(pt=n.return;pt;)switch(pt.tag){case 5:case 31:case 13:en=!1;return;case 27:case 3:en=!0;return;default:pt=pt.return}}function Co(n){if(n!==pt)return!1;if(!be)return Wh(n),be=!0,!1;var o=n.tag,r;if((r=o!==3&&o!==27)&&((r=o===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||Kc(n.type,n.memoizedProps)),r=!r),r&&Ye&&ii(n),Wh(n),o===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ye=Tg(n)}else if(o===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ye=Tg(n)}else o===27?(o=Ye,yi(n.type)?(n=Zc,Zc=null,Ye=n):Ye=o):Ye=pt?nn(n.stateNode.nextSibling):null;return!0}function Oi(){Ye=pt=null,be=!1}function Iu(){var n=ni;return n!==null&&(Lt===null?Lt=n:Lt.push.apply(Lt,n),ni=null),n}function ws(n){ni===null?ni=[n]:ni.push(n)}var Mu=R(null),zi=null,wn=null;function oi(n,o,r){W(Mu,o._currentValue),o._currentValue=r}function In(n){n._currentValue=Mu.current,V(Mu)}function Du(n,o,r){for(;n!==null;){var u=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),n===r)break;n=n.return}}function Uu(n,o,r,u){var p=n.child;for(p!==null&&(p.return=n);p!==null;){var y=p.dependencies;if(y!==null){var S=p.child;y=y.firstContext;e:for(;y!==null;){var T=y;y=p;for(var A=0;A<o.length;A++)if(T.context===o[A]){y.lanes|=r,T=y.alternate,T!==null&&(T.lanes|=r),Du(y.return,r,n),u||(S=null);break e}y=T.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(s(341));S.lanes|=r,y=S.alternate,y!==null&&(y.lanes|=r),Du(S,r,n),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===n){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function xo(n,o,r,u){n=null;for(var p=o,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var T=p.type;Bt(p.pendingProps.value,S.value)||(n!==null?n.push(T):n=[T])}}else if(p===Ue.current){if(S=p.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(n!==null?n.push(nl):n=[nl])}p=p.return}n!==null&&Uu(o,n,r,u),o.flags|=262144}function er(n){for(n=n.firstContext;n!==null;){if(!Bt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Gi(n){zi=n,wn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function mt(n){return Zh(zi,n)}function tr(n,o){return zi===null&&Gi(n),Zh(n,o)}function Zh(n,o){var r=o._currentValue;if(o={context:o,memoizedValue:r,next:null},wn===null){if(n===null)throw Error(s(308));wn=o,n.dependencies={lanes:0,firstContext:o},n.flags|=524288}else wn=wn.next=o;return r}var uT=typeof AbortController<"u"?AbortController:function(){var n=[],o=this.signal={aborted:!1,addEventListener:function(r,u){n.push(u)}};this.abort=function(){o.aborted=!0,n.forEach(function(r){return r()})}},cT=t.unstable_scheduleCallback,fT=t.unstable_NormalPriority,nt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lu(){return{controller:new uT,data:new Map,refCount:0}}function Is(n){n.refCount--,n.refCount===0&&cT(fT,function(){n.controller.abort()})}var Ms=null,ku=0,Ao=0,bo=null;function dT(n,o){if(Ms===null){var r=Ms=[];ku=0,Ao=zc(),bo={status:"pending",value:void 0,then:function(u){r.push(u)}}}return ku++,o.then(jh,jh),o}function jh(){if(--ku===0&&Ms!==null){bo!==null&&(bo.status="fulfilled");var n=Ms;Ms=null,Ao=0,bo=null;for(var o=0;o<n.length;o++)(0,n[o])()}}function hT(n,o){var r=[],u={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return n.then(function(){u.status="fulfilled",u.value=o;for(var p=0;p<r.length;p++)(0,r[p])(o)},function(p){for(u.status="rejected",u.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),u}var ep=w.S;w.S=function(n,o){Om=zt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&dT(n,o),ep!==null&&ep(n,o)};var Hi=R(null);function Pu(){var n=Hi.current;return n!==null?n:Ve.pooledCache}function nr(n,o){o===null?W(Hi,Hi.current):W(Hi,o.pool)}function tp(){var n=Pu();return n===null?null:{parent:nt._currentValue,pool:n}}var No=Error(s(460)),Ou=Error(s(474)),ir=Error(s(542)),or={then:function(){}};function np(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ip(n,o,r){switch(r=n[r],r===void 0?n.push(o):r!==o&&(o.then(An,An),o=r),o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,sp(n),n;default:if(typeof o.status=="string")o.then(An,An);else{if(n=Ve,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=o,n.status="pending",n.then(function(u){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=u}},function(u){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,sp(n),n}throw Vi=o,No}}function Bi(n){try{var o=n._init;return o(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Vi=r,No):r}}var Vi=null;function op(){if(Vi===null)throw Error(s(459));var n=Vi;return Vi=null,n}function sp(n){if(n===No||n===ir)throw Error(s(483))}var Ro=null,Ds=0;function sr(n){var o=Ds;return Ds+=1,Ro===null&&(Ro=[]),ip(Ro,n,o)}function Us(n,o){o=o.props.ref,n.ref=o!==void 0?o:null}function lr(n,o){throw o.$$typeof===E?Error(s(525)):(n=Object.prototype.toString.call(o),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)))}function lp(n){function o(I,b){if(n){var L=I.deletions;L===null?(I.deletions=[b],I.flags|=16):L.push(b)}}function r(I,b){if(!n)return null;for(;b!==null;)o(I,b),b=b.sibling;return null}function u(I){for(var b=new Map;I!==null;)I.key!==null?b.set(I.key,I):b.set(I.index,I),I=I.sibling;return b}function p(I,b){return I=Nn(I,b),I.index=0,I.sibling=null,I}function y(I,b,L){return I.index=L,n?(L=I.alternate,L!==null?(L=L.index,L<b?(I.flags|=67108866,b):L):(I.flags|=67108866,b)):(I.flags|=1048576,b)}function S(I){return n&&I.alternate===null&&(I.flags|=67108866),I}function T(I,b,L,H){return b===null||b.tag!==6?(b=Au(L,I.mode,H),b.return=I,b):(b=p(b,L),b.return=I,b)}function A(I,b,L,H){var ce=L.type;return ce===D?z(I,b,L.props.children,H,L.key):b!==null&&(b.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===ne&&Bi(ce)===b.type)?(b=p(b,L.props),Us(b,L),b.return=I,b):(b=Zl(L.type,L.key,L.props,null,I.mode,H),Us(b,L),b.return=I,b)}function k(I,b,L,H){return b===null||b.tag!==4||b.stateNode.containerInfo!==L.containerInfo||b.stateNode.implementation!==L.implementation?(b=bu(L,I.mode,H),b.return=I,b):(b=p(b,L.children||[]),b.return=I,b)}function z(I,b,L,H,ce){return b===null||b.tag!==7?(b=Pi(L,I.mode,H,ce),b.return=I,b):(b=p(b,L),b.return=I,b)}function B(I,b,L){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=Au(""+b,I.mode,L),b.return=I,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case x:return L=Zl(b.type,b.key,b.props,null,I.mode,L),Us(L,b),L.return=I,L;case N:return b=bu(b,I.mode,L),b.return=I,b;case ne:return b=Bi(b),B(I,b,L)}if($(b)||ie(b))return b=Pi(b,I.mode,L,null),b.return=I,b;if(typeof b.then=="function")return B(I,sr(b),L);if(b.$$typeof===F)return B(I,tr(I,b),L);lr(I,b)}return null}function P(I,b,L,H){var ce=b!==null?b.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return ce!==null?null:T(I,b,""+L,H);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case x:return L.key===ce?A(I,b,L,H):null;case N:return L.key===ce?k(I,b,L,H):null;case ne:return L=Bi(L),P(I,b,L,H)}if($(L)||ie(L))return ce!==null?null:z(I,b,L,H,null);if(typeof L.then=="function")return P(I,b,sr(L),H);if(L.$$typeof===F)return P(I,b,tr(I,L),H);lr(I,L)}return null}function O(I,b,L,H,ce){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return I=I.get(L)||null,T(b,I,""+H,ce);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case x:return I=I.get(H.key===null?L:H.key)||null,A(b,I,H,ce);case N:return I=I.get(H.key===null?L:H.key)||null,k(b,I,H,ce);case ne:return H=Bi(H),O(I,b,L,H,ce)}if($(H)||ie(H))return I=I.get(L)||null,z(b,I,H,ce,null);if(typeof H.then=="function")return O(I,b,L,sr(H),ce);if(H.$$typeof===F)return O(I,b,L,tr(b,H),ce);lr(b,H)}return null}function ee(I,b,L,H){for(var ce=null,we=null,le=b,ve=b=0,xe=null;le!==null&&ve<L.length;ve++){le.index>ve?(xe=le,le=null):xe=le.sibling;var Ie=P(I,le,L[ve],H);if(Ie===null){le===null&&(le=xe);break}n&&le&&Ie.alternate===null&&o(I,le),b=y(Ie,b,ve),we===null?ce=Ie:we.sibling=Ie,we=Ie,le=xe}if(ve===L.length)return r(I,le),be&&Rn(I,ve),ce;if(le===null){for(;ve<L.length;ve++)le=B(I,L[ve],H),le!==null&&(b=y(le,b,ve),we===null?ce=le:we.sibling=le,we=le);return be&&Rn(I,ve),ce}for(le=u(le);ve<L.length;ve++)xe=O(le,I,ve,L[ve],H),xe!==null&&(n&&xe.alternate!==null&&le.delete(xe.key===null?ve:xe.key),b=y(xe,b,ve),we===null?ce=xe:we.sibling=xe,we=xe);return n&&le.forEach(function(Ti){return o(I,Ti)}),be&&Rn(I,ve),ce}function fe(I,b,L,H){if(L==null)throw Error(s(151));for(var ce=null,we=null,le=b,ve=b=0,xe=null,Ie=L.next();le!==null&&!Ie.done;ve++,Ie=L.next()){le.index>ve?(xe=le,le=null):xe=le.sibling;var Ti=P(I,le,Ie.value,H);if(Ti===null){le===null&&(le=xe);break}n&&le&&Ti.alternate===null&&o(I,le),b=y(Ti,b,ve),we===null?ce=Ti:we.sibling=Ti,we=Ti,le=xe}if(Ie.done)return r(I,le),be&&Rn(I,ve),ce;if(le===null){for(;!Ie.done;ve++,Ie=L.next())Ie=B(I,Ie.value,H),Ie!==null&&(b=y(Ie,b,ve),we===null?ce=Ie:we.sibling=Ie,we=Ie);return be&&Rn(I,ve),ce}for(le=u(le);!Ie.done;ve++,Ie=L.next())Ie=O(le,I,ve,Ie.value,H),Ie!==null&&(n&&Ie.alternate!==null&&le.delete(Ie.key===null?ve:Ie.key),b=y(Ie,b,ve),we===null?ce=Ie:we.sibling=Ie,we=Ie);return n&&le.forEach(function(xC){return o(I,xC)}),be&&Rn(I,ve),ce}function He(I,b,L,H){if(typeof L=="object"&&L!==null&&L.type===D&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case x:e:{for(var ce=L.key;b!==null;){if(b.key===ce){if(ce=L.type,ce===D){if(b.tag===7){r(I,b.sibling),H=p(b,L.props.children),H.return=I,I=H;break e}}else if(b.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===ne&&Bi(ce)===b.type){r(I,b.sibling),H=p(b,L.props),Us(H,L),H.return=I,I=H;break e}r(I,b);break}else o(I,b);b=b.sibling}L.type===D?(H=Pi(L.props.children,I.mode,H,L.key),H.return=I,I=H):(H=Zl(L.type,L.key,L.props,null,I.mode,H),Us(H,L),H.return=I,I=H)}return S(I);case N:e:{for(ce=L.key;b!==null;){if(b.key===ce)if(b.tag===4&&b.stateNode.containerInfo===L.containerInfo&&b.stateNode.implementation===L.implementation){r(I,b.sibling),H=p(b,L.children||[]),H.return=I,I=H;break e}else{r(I,b);break}else o(I,b);b=b.sibling}H=bu(L,I.mode,H),H.return=I,I=H}return S(I);case ne:return L=Bi(L),He(I,b,L,H)}if($(L))return ee(I,b,L,H);if(ie(L)){if(ce=ie(L),typeof ce!="function")throw Error(s(150));return L=ce.call(L),fe(I,b,L,H)}if(typeof L.then=="function")return He(I,b,sr(L),H);if(L.$$typeof===F)return He(I,b,tr(I,L),H);lr(I,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,b!==null&&b.tag===6?(r(I,b.sibling),H=p(b,L),H.return=I,I=H):(r(I,b),H=Au(L,I.mode,H),H.return=I,I=H),S(I)):r(I,b)}return function(I,b,L,H){try{Ds=0;var ce=He(I,b,L,H);return Ro=null,ce}catch(le){if(le===No||le===ir)throw le;var we=Vt(29,le,null,I.mode);return we.lanes=H,we.return=I,we}finally{}}}var qi=lp(!0),rp=lp(!1),si=!1;function zu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gu(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function li(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ri(n,o,r){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(De&2)!==0){var p=u.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),u.pending=o,o=Wl(n),Fh(n,null,r),o}return $l(n,u,o,r),Wl(n)}function Ls(n,o,r){if(o=o.updateQueue,o!==null&&(o=o.shared,(r&4194048)!==0)){var u=o.lanes;u&=n.pendingLanes,r|=u,o.lanes=r,Zd(n,r)}}function Hu(n,o){var r=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var p=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?p=y=S:y=y.next=S,r=r.next}while(r!==null);y===null?p=y=o:y=y.next=o}else p=y=o;r={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=o:n.next=o,r.lastBaseUpdate=o}var Bu=!1;function ks(){if(Bu){var n=bo;if(n!==null)throw n}}function Ps(n,o,r,u){Bu=!1;var p=n.updateQueue;si=!1;var y=p.firstBaseUpdate,S=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var A=T,k=A.next;A.next=null,S===null?y=k:S.next=k,S=A;var z=n.alternate;z!==null&&(z=z.updateQueue,T=z.lastBaseUpdate,T!==S&&(T===null?z.firstBaseUpdate=k:T.next=k,z.lastBaseUpdate=A))}if(y!==null){var B=p.baseState;S=0,z=k=A=null,T=y;do{var P=T.lane&-536870913,O=P!==T.lane;if(O?(Ce&P)===P:(u&P)===P){P!==0&&P===Ao&&(Bu=!0),z!==null&&(z=z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ee=n,fe=T;P=o;var He=r;switch(fe.tag){case 1:if(ee=fe.payload,typeof ee=="function"){B=ee.call(He,B,P);break e}B=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=fe.payload,P=typeof ee=="function"?ee.call(He,B,P):ee,P==null)break e;B=_({},B,P);break e;case 2:si=!0}}P=T.callback,P!==null&&(n.flags|=64,O&&(n.flags|=8192),O=p.callbacks,O===null?p.callbacks=[P]:O.push(P))}else O={lane:P,tag:T.tag,payload:T.payload,callback:T.callback,next:null},z===null?(k=z=O,A=B):z=z.next=O,S|=P;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;O=T,T=O.next,O.next=null,p.lastBaseUpdate=O,p.shared.pending=null}}while(!0);z===null&&(A=B),p.baseState=A,p.firstBaseUpdate=k,p.lastBaseUpdate=z,y===null&&(p.shared.lanes=0),di|=S,n.lanes=S,n.memoizedState=B}}function ap(n,o){if(typeof n!="function")throw Error(s(191,n));n.call(o)}function up(n,o){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)ap(r[n],o)}var wo=R(null),rr=R(0);function cp(n,o){n=Gn,W(rr,n),W(wo,o),Gn=n|o.baseLanes}function Vu(){W(rr,Gn),W(wo,wo.current)}function qu(){Gn=rr.current,V(wo),V(rr)}var qt=R(null),tn=null;function ai(n){var o=n.alternate;W(et,et.current&1),W(qt,n),tn===null&&(o===null||wo.current!==null||o.memoizedState!==null)&&(tn=n)}function Fu(n){W(et,et.current),W(qt,n),tn===null&&(tn=n)}function fp(n){n.tag===22?(W(et,et.current),W(qt,n),tn===null&&(tn=n)):ui()}function ui(){W(et,et.current),W(qt,qt.current)}function Ft(n){V(qt),tn===n&&(tn=null),V(et)}var et=R(0);function ar(n){for(var o=n;o!==null;){if(o.tag===13){var r=o.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||$c(r)||Wc(r)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Mn=0,ge=null,ze=null,it=null,ur=!1,Io=!1,Fi=!1,cr=0,Os=0,Mo=null,pT=0;function We(){throw Error(s(321))}function Yu(n,o){if(o===null)return!1;for(var r=0;r<o.length&&r<n.length;r++)if(!Bt(n[r],o[r]))return!1;return!0}function Ju(n,o,r,u,p,y){return Mn=y,ge=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,w.H=n===null||n.memoizedState===null?Xp:rc,Fi=!1,y=r(u,p),Fi=!1,Io&&(y=hp(o,r,u,p)),dp(n),y}function dp(n){w.H=Hs;var o=ze!==null&&ze.next!==null;if(Mn=0,it=ze=ge=null,ur=!1,Os=0,Mo=null,o)throw Error(s(300));n===null||ot||(n=n.dependencies,n!==null&&er(n)&&(ot=!0))}function hp(n,o,r,u){ge=n;var p=0;do{if(Io&&(Mo=null),Os=0,Io=!1,25<=p)throw Error(s(301));if(p+=1,it=ze=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}w.H=Qp,y=o(r,u)}while(Io);return y}function mT(){var n=w.H,o=n.useState()[0];return o=typeof o.then=="function"?zs(o):o,n=n.useState()[0],(ze!==null?ze.memoizedState:null)!==n&&(ge.flags|=1024),o}function Ku(){var n=cr!==0;return cr=0,n}function Xu(n,o,r){o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~r}function Qu(n){if(ur){for(n=n.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}ur=!1}Mn=0,it=ze=ge=null,Io=!1,Os=cr=0,Mo=null}function At(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?ge.memoizedState=it=n:it=it.next=n,it}function tt(){if(ze===null){var n=ge.alternate;n=n!==null?n.memoizedState:null}else n=ze.next;var o=it===null?ge.memoizedState:it.next;if(o!==null)it=o,ze=n;else{if(n===null)throw ge.alternate===null?Error(s(467)):Error(s(310));ze=n,n={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},it===null?ge.memoizedState=it=n:it=it.next=n}return it}function fr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zs(n){var o=Os;return Os+=1,Mo===null&&(Mo=[]),n=ip(Mo,n,o),o=ge,(it===null?o.memoizedState:it.next)===null&&(o=o.alternate,w.H=o===null||o.memoizedState===null?Xp:rc),n}function dr(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return zs(n);if(n.$$typeof===F)return mt(n)}throw Error(s(438,String(n)))}function $u(n){var o=null,r=ge.updateQueue;if(r!==null&&(o=r.memoCache),o==null){var u=ge.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),r===null&&(r=fr(),ge.updateQueue=r),r.memoCache=o,r=o.data[o.index],r===void 0)for(r=o.data[o.index]=Array(n),u=0;u<n;u++)r[u]=J;return o.index++,r}function Dn(n,o){return typeof o=="function"?o(n):o}function hr(n){var o=tt();return Wu(o,ze,n)}function Wu(n,o,r){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var p=n.baseQueue,y=u.pending;if(y!==null){if(p!==null){var S=p.next;p.next=y.next,y.next=S}o.baseQueue=p=y,u.pending=null}if(y=n.baseState,p===null)n.memoizedState=y;else{o=p.next;var T=S=null,A=null,k=o,z=!1;do{var B=k.lane&-536870913;if(B!==k.lane?(Ce&B)===B:(Mn&B)===B){var P=k.revertLane;if(P===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),B===Ao&&(z=!0);else if((Mn&P)===P){k=k.next,P===Ao&&(z=!0);continue}else B={lane:0,revertLane:k.revertLane,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},A===null?(T=A=B,S=y):A=A.next=B,ge.lanes|=P,di|=P;B=k.action,Fi&&r(y,B),y=k.hasEagerState?k.eagerState:r(y,B)}else P={lane:B,revertLane:k.revertLane,gesture:k.gesture,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},A===null?(T=A=P,S=y):A=A.next=P,ge.lanes|=B,di|=B;k=k.next}while(k!==null&&k!==o);if(A===null?S=y:A.next=T,!Bt(y,n.memoizedState)&&(ot=!0,z&&(r=bo,r!==null)))throw r;n.memoizedState=y,n.baseState=S,n.baseQueue=A,u.lastRenderedState=y}return p===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Zu(n){var o=tt(),r=o.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=n;var u=r.dispatch,p=r.pending,y=o.memoizedState;if(p!==null){r.pending=null;var S=p=p.next;do y=n(y,S.action),S=S.next;while(S!==p);Bt(y,o.memoizedState)||(ot=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),r.lastRenderedState=y}return[y,u]}function pp(n,o,r){var u=ge,p=tt(),y=be;if(y){if(r===void 0)throw Error(s(407));r=r()}else r=o();var S=!Bt((ze||p).memoizedState,r);if(S&&(p.memoizedState=r,ot=!0),p=p.queue,tc(yp.bind(null,u,p,n),[n]),p.getSnapshot!==o||S||it!==null&&it.memoizedState.tag&1){if(u.flags|=2048,Do(9,{destroy:void 0},gp.bind(null,u,p,r,o),null),Ve===null)throw Error(s(349));y||(Mn&127)!==0||mp(u,o,r)}return r}function mp(n,o,r){n.flags|=16384,n={getSnapshot:o,value:r},o=ge.updateQueue,o===null?(o=fr(),ge.updateQueue=o,o.stores=[n]):(r=o.stores,r===null?o.stores=[n]:r.push(n))}function gp(n,o,r,u){o.value=r,o.getSnapshot=u,vp(o)&&_p(n)}function yp(n,o,r){return r(function(){vp(o)&&_p(n)})}function vp(n){var o=n.getSnapshot;n=n.value;try{var r=o();return!Bt(n,r)}catch{return!0}}function _p(n){var o=ki(n,2);o!==null&&kt(o,n,2)}function ju(n){var o=At();if(typeof n=="function"){var r=n;if(n=r(),Fi){Zn(!0);try{r()}finally{Zn(!1)}}}return o.memoizedState=o.baseState=n,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:n},o}function Ep(n,o,r,u){return n.baseState=r,Wu(n,ze,typeof u=="function"?u:Dn)}function gT(n,o,r,u,p){if(gr(n))throw Error(s(485));if(n=o.action,n!==null){var y={payload:p,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};w.T!==null?r(!0):y.isTransition=!1,u(y),r=o.pending,r===null?(y.next=o.pending=y,Sp(o,y)):(y.next=r.next,o.pending=r.next=y)}}function Sp(n,o){var r=o.action,u=o.payload,p=n.state;if(o.isTransition){var y=w.T,S={};w.T=S;try{var T=r(p,u),A=w.S;A!==null&&A(S,T),Tp(n,o,T)}catch(k){ec(n,o,k)}finally{y!==null&&S.types!==null&&(y.types=S.types),w.T=y}}else try{y=r(p,u),Tp(n,o,y)}catch(k){ec(n,o,k)}}function Tp(n,o,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){Cp(n,o,u)},function(u){return ec(n,o,u)}):Cp(n,o,r)}function Cp(n,o,r){o.status="fulfilled",o.value=r,xp(o),n.state=r,o=n.pending,o!==null&&(r=o.next,r===o?n.pending=null:(r=r.next,o.next=r,Sp(n,r)))}function ec(n,o,r){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=r,xp(o),o=o.next;while(o!==u)}n.action=null}function xp(n){n=n.listeners;for(var o=0;o<n.length;o++)(0,n[o])()}function Ap(n,o){return o}function bp(n,o){if(be){var r=Ve.formState;if(r!==null){e:{var u=ge;if(be){if(Ye){t:{for(var p=Ye,y=en;p.nodeType!==8;){if(!y){p=null;break t}if(p=nn(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Ye=nn(p.nextSibling),u=p.data==="F!";break e}}ii(u)}u=!1}u&&(o=r[0])}}return r=At(),r.memoizedState=r.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:o},r.queue=u,r=Yp.bind(null,ge,u),u.dispatch=r,u=ju(!1),y=lc.bind(null,ge,!1,u.queue),u=At(),p={state:o,dispatch:null,action:n,pending:null},u.queue=p,r=gT.bind(null,ge,p,y,r),p.dispatch=r,u.memoizedState=n,[o,r,!1]}function Np(n){var o=tt();return Rp(o,ze,n)}function Rp(n,o,r){if(o=Wu(n,o,Ap)[0],n=hr(Dn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=zs(o)}catch(S){throw S===No?ir:S}else u=o;o=tt();var p=o.queue,y=p.dispatch;return r!==o.memoizedState&&(ge.flags|=2048,Do(9,{destroy:void 0},yT.bind(null,p,r),null)),[u,y,n]}function yT(n,o){n.action=o}function wp(n){var o=tt(),r=ze;if(r!==null)return Rp(o,r,n);tt(),o=o.memoizedState,r=tt();var u=r.queue.dispatch;return r.memoizedState=n,[o,u,!1]}function Do(n,o,r,u){return n={tag:n,create:r,deps:u,inst:o,next:null},o=ge.updateQueue,o===null&&(o=fr(),ge.updateQueue=o),r=o.lastEffect,r===null?o.lastEffect=n.next=n:(u=r.next,r.next=n,n.next=u,o.lastEffect=n),n}function Ip(){return tt().memoizedState}function pr(n,o,r,u){var p=At();ge.flags|=n,p.memoizedState=Do(1|o,{destroy:void 0},r,u===void 0?null:u)}function mr(n,o,r,u){var p=tt();u=u===void 0?null:u;var y=p.memoizedState.inst;ze!==null&&u!==null&&Yu(u,ze.memoizedState.deps)?p.memoizedState=Do(o,y,r,u):(ge.flags|=n,p.memoizedState=Do(1|o,y,r,u))}function Mp(n,o){pr(8390656,8,n,o)}function tc(n,o){mr(2048,8,n,o)}function vT(n){ge.flags|=4;var o=ge.updateQueue;if(o===null)o=fr(),ge.updateQueue=o,o.events=[n];else{var r=o.events;r===null?o.events=[n]:r.push(n)}}function Dp(n){var o=tt().memoizedState;return vT({ref:o,nextImpl:n}),function(){if((De&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function Up(n,o){return mr(4,2,n,o)}function Lp(n,o){return mr(4,4,n,o)}function kp(n,o){if(typeof o=="function"){n=n();var r=o(n);return function(){typeof r=="function"?r():o(null)}}if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function Pp(n,o,r){r=r!=null?r.concat([n]):null,mr(4,4,kp.bind(null,o,n),r)}function nc(){}function Op(n,o){var r=tt();o=o===void 0?null:o;var u=r.memoizedState;return o!==null&&Yu(o,u[1])?u[0]:(r.memoizedState=[n,o],n)}function zp(n,o){var r=tt();o=o===void 0?null:o;var u=r.memoizedState;if(o!==null&&Yu(o,u[1]))return u[0];if(u=n(),Fi){Zn(!0);try{n()}finally{Zn(!1)}}return r.memoizedState=[u,o],u}function ic(n,o,r){return r===void 0||(Mn&1073741824)!==0&&(Ce&261930)===0?n.memoizedState=o:(n.memoizedState=r,n=Gm(),ge.lanes|=n,di|=n,r)}function Gp(n,o,r,u){return Bt(r,o)?r:wo.current!==null?(n=ic(n,r,u),Bt(n,o)||(ot=!0),n):(Mn&42)===0||(Mn&1073741824)!==0&&(Ce&261930)===0?(ot=!0,n.memoizedState=r):(n=Gm(),ge.lanes|=n,di|=n,o)}function Hp(n,o,r,u,p){var y=q.p;q.p=y!==0&&8>y?y:8;var S=w.T,T={};w.T=T,lc(n,!1,o,r);try{var A=p(),k=w.S;if(k!==null&&k(T,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var z=hT(A,u);Gs(n,o,z,Kt(n))}else Gs(n,o,u,Kt(n))}catch(B){Gs(n,o,{then:function(){},status:"rejected",reason:B},Kt())}finally{q.p=y,S!==null&&T.types!==null&&(S.types=T.types),w.T=S}}function _T(){}function oc(n,o,r,u){if(n.tag!==5)throw Error(s(476));var p=Bp(n).queue;Hp(n,p,o,j,r===null?_T:function(){return Vp(n),r(u)})}function Bp(n){var o=n.memoizedState;if(o!==null)return o;o={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:j},next:null};var r={};return o.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:r},next:null},n.memoizedState=o,n=n.alternate,n!==null&&(n.memoizedState=o),o}function Vp(n){var o=Bp(n);o.next===null&&(o=n.alternate.memoizedState),Gs(n,o.next.queue,{},Kt())}function sc(){return mt(nl)}function qp(){return tt().memoizedState}function Fp(){return tt().memoizedState}function ET(n){for(var o=n.return;o!==null;){switch(o.tag){case 24:case 3:var r=Kt();n=li(r);var u=ri(o,n,r);u!==null&&(kt(u,o,r),Ls(u,o,r)),o={cache:Lu()},n.payload=o;return}o=o.return}}function ST(n,o,r){var u=Kt();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},gr(n)?Jp(o,r):(r=Cu(n,o,r,u),r!==null&&(kt(r,n,u),Kp(r,o,u)))}function Yp(n,o,r){var u=Kt();Gs(n,o,r,u)}function Gs(n,o,r,u){var p={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(gr(n))Jp(o,p);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var S=o.lastRenderedState,T=y(S,r);if(p.hasEagerState=!0,p.eagerState=T,Bt(T,S))return $l(n,o,p,0),Ve===null&&Ql(),!1}catch{}finally{}if(r=Cu(n,o,p,u),r!==null)return kt(r,n,u),Kp(r,o,u),!0}return!1}function lc(n,o,r,u){if(u={lane:2,revertLane:zc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},gr(n)){if(o)throw Error(s(479))}else o=Cu(n,r,u,2),o!==null&&kt(o,n,2)}function gr(n){var o=n.alternate;return n===ge||o!==null&&o===ge}function Jp(n,o){Io=ur=!0;var r=n.pending;r===null?o.next=o:(o.next=r.next,r.next=o),n.pending=o}function Kp(n,o,r){if((r&4194048)!==0){var u=o.lanes;u&=n.pendingLanes,r|=u,o.lanes=r,Zd(n,r)}}var Hs={readContext:mt,use:dr,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};Hs.useEffectEvent=We;var Xp={readContext:mt,use:dr,useCallback:function(n,o){return At().memoizedState=[n,o===void 0?null:o],n},useContext:mt,useEffect:Mp,useImperativeHandle:function(n,o,r){r=r!=null?r.concat([n]):null,pr(4194308,4,kp.bind(null,o,n),r)},useLayoutEffect:function(n,o){return pr(4194308,4,n,o)},useInsertionEffect:function(n,o){pr(4,2,n,o)},useMemo:function(n,o){var r=At();o=o===void 0?null:o;var u=n();if(Fi){Zn(!0);try{n()}finally{Zn(!1)}}return r.memoizedState=[u,o],u},useReducer:function(n,o,r){var u=At();if(r!==void 0){var p=r(o);if(Fi){Zn(!0);try{r(o)}finally{Zn(!1)}}}else p=o;return u.memoizedState=u.baseState=p,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:p},u.queue=n,n=n.dispatch=ST.bind(null,ge,n),[u.memoizedState,n]},useRef:function(n){var o=At();return n={current:n},o.memoizedState=n},useState:function(n){n=ju(n);var o=n.queue,r=Yp.bind(null,ge,o);return o.dispatch=r,[n.memoizedState,r]},useDebugValue:nc,useDeferredValue:function(n,o){var r=At();return ic(r,n,o)},useTransition:function(){var n=ju(!1);return n=Hp.bind(null,ge,n.queue,!0,!1),At().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,o,r){var u=ge,p=At();if(be){if(r===void 0)throw Error(s(407));r=r()}else{if(r=o(),Ve===null)throw Error(s(349));(Ce&127)!==0||mp(u,o,r)}p.memoizedState=r;var y={value:r,getSnapshot:o};return p.queue=y,Mp(yp.bind(null,u,y,n),[n]),u.flags|=2048,Do(9,{destroy:void 0},gp.bind(null,u,y,r,o),null),r},useId:function(){var n=At(),o=Ve.identifierPrefix;if(be){var r=En,u=_n;r=(u&~(1<<32-Ht(u)-1)).toString(32)+r,o="_"+o+"R_"+r,r=cr++,0<r&&(o+="H"+r.toString(32)),o+="_"}else r=pT++,o="_"+o+"r_"+r.toString(32)+"_";return n.memoizedState=o},useHostTransitionStatus:sc,useFormState:bp,useActionState:bp,useOptimistic:function(n){var o=At();o.memoizedState=o.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=r,o=lc.bind(null,ge,!0,r),r.dispatch=o,[n,o]},useMemoCache:$u,useCacheRefresh:function(){return At().memoizedState=ET.bind(null,ge)},useEffectEvent:function(n){var o=At(),r={impl:n};return o.memoizedState=r,function(){if((De&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},rc={readContext:mt,use:dr,useCallback:Op,useContext:mt,useEffect:tc,useImperativeHandle:Pp,useInsertionEffect:Up,useLayoutEffect:Lp,useMemo:zp,useReducer:hr,useRef:Ip,useState:function(){return hr(Dn)},useDebugValue:nc,useDeferredValue:function(n,o){var r=tt();return Gp(r,ze.memoizedState,n,o)},useTransition:function(){var n=hr(Dn)[0],o=tt().memoizedState;return[typeof n=="boolean"?n:zs(n),o]},useSyncExternalStore:pp,useId:qp,useHostTransitionStatus:sc,useFormState:Np,useActionState:Np,useOptimistic:function(n,o){var r=tt();return Ep(r,ze,n,o)},useMemoCache:$u,useCacheRefresh:Fp};rc.useEffectEvent=Dp;var Qp={readContext:mt,use:dr,useCallback:Op,useContext:mt,useEffect:tc,useImperativeHandle:Pp,useInsertionEffect:Up,useLayoutEffect:Lp,useMemo:zp,useReducer:Zu,useRef:Ip,useState:function(){return Zu(Dn)},useDebugValue:nc,useDeferredValue:function(n,o){var r=tt();return ze===null?ic(r,n,o):Gp(r,ze.memoizedState,n,o)},useTransition:function(){var n=Zu(Dn)[0],o=tt().memoizedState;return[typeof n=="boolean"?n:zs(n),o]},useSyncExternalStore:pp,useId:qp,useHostTransitionStatus:sc,useFormState:wp,useActionState:wp,useOptimistic:function(n,o){var r=tt();return ze!==null?Ep(r,ze,n,o):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:$u,useCacheRefresh:Fp};Qp.useEffectEvent=Dp;function ac(n,o,r,u){o=n.memoizedState,r=r(u,o),r=r==null?o:_({},o,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var uc={enqueueSetState:function(n,o,r){n=n._reactInternals;var u=Kt(),p=li(u);p.payload=o,r!=null&&(p.callback=r),o=ri(n,p,u),o!==null&&(kt(o,n,u),Ls(o,n,u))},enqueueReplaceState:function(n,o,r){n=n._reactInternals;var u=Kt(),p=li(u);p.tag=1,p.payload=o,r!=null&&(p.callback=r),o=ri(n,p,u),o!==null&&(kt(o,n,u),Ls(o,n,u))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var r=Kt(),u=li(r);u.tag=2,o!=null&&(u.callback=o),o=ri(n,u,r),o!==null&&(kt(o,n,r),Ls(o,n,r))}};function $p(n,o,r,u,p,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,S):o.prototype&&o.prototype.isPureReactComponent?!bs(r,u)||!bs(p,y):!0}function Wp(n,o,r,u){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(r,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(r,u),o.state!==n&&uc.enqueueReplaceState(o,o.state,null)}function Yi(n,o){var r=o;if("ref"in o){r={};for(var u in o)u!=="ref"&&(r[u]=o[u])}if(n=n.defaultProps){r===o&&(r=_({},r));for(var p in n)r[p]===void 0&&(r[p]=n[p])}return r}function Zp(n){Xl(n)}function jp(n){console.error(n)}function em(n){Xl(n)}function yr(n,o){try{var r=n.onUncaughtError;r(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function tm(n,o,r){try{var u=n.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function cc(n,o,r){return r=li(r),r.tag=3,r.payload={element:null},r.callback=function(){yr(n,o)},r}function nm(n){return n=li(n),n.tag=3,n}function im(n,o,r,u){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;n.payload=function(){return p(y)},n.callback=function(){tm(o,r,u)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){tm(o,r,u),typeof p!="function"&&(hi===null?hi=new Set([this]):hi.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function TT(n,o,r,u,p){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=r.alternate,o!==null&&xo(o,r,p,!0),r=qt.current,r!==null){switch(r.tag){case 31:case 13:return tn===null?wr():r.alternate===null&&Ze===0&&(Ze=3),r.flags&=-257,r.flags|=65536,r.lanes=p,u===or?r.flags|=16384:(o=r.updateQueue,o===null?r.updateQueue=new Set([u]):o.add(u),kc(n,u,p)),!1;case 22:return r.flags|=65536,u===or?r.flags|=16384:(o=r.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=o):(r=o.retryQueue,r===null?o.retryQueue=new Set([u]):r.add(u)),kc(n,u,p)),!1}throw Error(s(435,r.tag))}return kc(n,u,p),wr(),!1}if(be)return o=qt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,u!==wu&&(n=Error(s(422),{cause:u}),ws(Wt(n,r)))):(u!==wu&&(o=Error(s(423),{cause:u}),ws(Wt(o,r))),n=n.current.alternate,n.flags|=65536,p&=-p,n.lanes|=p,u=Wt(u,r),p=cc(n.stateNode,u,p),Hu(n,p),Ze!==4&&(Ze=2)),!1;var y=Error(s(520),{cause:u});if(y=Wt(y,r),Xs===null?Xs=[y]:Xs.push(y),Ze!==4&&(Ze=2),o===null)return!0;u=Wt(u,r),r=o;do{switch(r.tag){case 3:return r.flags|=65536,n=p&-p,r.lanes|=n,n=cc(r.stateNode,u,n),Hu(r,n),!1;case 1:if(o=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(hi===null||!hi.has(y))))return r.flags|=65536,p&=-p,r.lanes|=p,p=nm(p),im(p,n,r,u),Hu(r,p),!1}r=r.return}while(r!==null);return!1}var fc=Error(s(461)),ot=!1;function gt(n,o,r,u){o.child=n===null?rp(o,null,r,u):qi(o,n.child,r,u)}function om(n,o,r,u,p){r=r.render;var y=o.ref;if("ref"in u){var S={};for(var T in u)T!=="ref"&&(S[T]=u[T])}else S=u;return Gi(o),u=Ju(n,o,r,S,y,p),T=Ku(),n!==null&&!ot?(Xu(n,o,p),Un(n,o,p)):(be&&T&&Nu(o),o.flags|=1,gt(n,o,u,p),o.child)}function sm(n,o,r,u,p){if(n===null){var y=r.type;return typeof y=="function"&&!xu(y)&&y.defaultProps===void 0&&r.compare===null?(o.tag=15,o.type=y,lm(n,o,y,u,p)):(n=Zl(r.type,null,u,o,o.mode,p),n.ref=o.ref,n.return=o,o.child=n)}if(y=n.child,!_c(n,p)){var S=y.memoizedProps;if(r=r.compare,r=r!==null?r:bs,r(S,u)&&n.ref===o.ref)return Un(n,o,p)}return o.flags|=1,n=Nn(y,u),n.ref=o.ref,n.return=o,o.child=n}function lm(n,o,r,u,p){if(n!==null){var y=n.memoizedProps;if(bs(y,u)&&n.ref===o.ref)if(ot=!1,o.pendingProps=u=y,_c(n,p))(n.flags&131072)!==0&&(ot=!0);else return o.lanes=n.lanes,Un(n,o,p)}return dc(n,o,r,u,p)}function rm(n,o,r,u){var p=u.children,y=n!==null?n.memoizedState:null;if(n===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,n!==null){for(u=o.child=n.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,o.child=null;return am(n,o,y,r,u)}if((r&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},n!==null&&nr(o,y!==null?y.cachePool:null),y!==null?cp(o,y):Vu(),fp(o);else return u=o.lanes=536870912,am(n,o,y!==null?y.baseLanes|r:r,r,u)}else y!==null?(nr(o,y.cachePool),cp(o,y),ui(),o.memoizedState=null):(n!==null&&nr(o,null),Vu(),ui());return gt(n,o,p,r),o.child}function Bs(n,o){return n!==null&&n.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function am(n,o,r,u,p){var y=Pu();return y=y===null?null:{parent:nt._currentValue,pool:y},o.memoizedState={baseLanes:r,cachePool:y},n!==null&&nr(o,null),Vu(),fp(o),n!==null&&xo(n,o,u,!0),o.childLanes=p,null}function vr(n,o){return o=Er({mode:o.mode,children:o.children},n.mode),o.ref=n.ref,n.child=o,o.return=n,o}function um(n,o,r){return qi(o,n.child,null,r),n=vr(o,o.pendingProps),n.flags|=2,Ft(o),o.memoizedState=null,n}function CT(n,o,r){var u=o.pendingProps,p=(o.flags&128)!==0;if(o.flags&=-129,n===null){if(be){if(u.mode==="hidden")return n=vr(o,u),o.lanes=536870912,Bs(null,n);if(Fu(o),(n=Ye)?(n=Sg(n,en),n=n!==null&&n.data==="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:ti!==null?{id:_n,overflow:En}:null,retryLane:536870912,hydrationErrors:null},r=Jh(n),r.return=o,o.child=r,pt=o,Ye=null)):n=null,n===null)throw ii(o);return o.lanes=536870912,null}return vr(o,u)}var y=n.memoizedState;if(y!==null){var S=y.dehydrated;if(Fu(o),p)if(o.flags&256)o.flags&=-257,o=um(n,o,r);else if(o.memoizedState!==null)o.child=n.child,o.flags|=128,o=null;else throw Error(s(558));else if(ot||xo(n,o,r,!1),p=(r&n.childLanes)!==0,ot||p){if(u=Ve,u!==null&&(S=jd(u,r),S!==0&&S!==y.retryLane))throw y.retryLane=S,ki(n,S),kt(u,n,S),fc;wr(),o=um(n,o,r)}else n=y.treeContext,Ye=nn(S.nextSibling),pt=o,be=!0,ni=null,en=!1,n!==null&&Qh(o,n),o=vr(o,u),o.flags|=4096;return o}return n=Nn(n.child,{mode:u.mode,children:u.children}),n.ref=o.ref,o.child=n,n.return=o,n}function _r(n,o){var r=o.ref;if(r===null)n!==null&&n.ref!==null&&(o.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(n===null||n.ref!==r)&&(o.flags|=4194816)}}function dc(n,o,r,u,p){return Gi(o),r=Ju(n,o,r,u,void 0,p),u=Ku(),n!==null&&!ot?(Xu(n,o,p),Un(n,o,p)):(be&&u&&Nu(o),o.flags|=1,gt(n,o,r,p),o.child)}function cm(n,o,r,u,p,y){return Gi(o),o.updateQueue=null,r=hp(o,u,r,p),dp(n),u=Ku(),n!==null&&!ot?(Xu(n,o,y),Un(n,o,y)):(be&&u&&Nu(o),o.flags|=1,gt(n,o,r,y),o.child)}function fm(n,o,r,u,p){if(Gi(o),o.stateNode===null){var y=Eo,S=r.contextType;typeof S=="object"&&S!==null&&(y=mt(S)),y=new r(u,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=uc,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=u,y.state=o.memoizedState,y.refs={},zu(o),S=r.contextType,y.context=typeof S=="object"&&S!==null?mt(S):Eo,y.state=o.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(ac(o,r,S,u),y.state=o.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&uc.enqueueReplaceState(y,y.state,null),Ps(o,u,y,p),ks(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(n===null){y=o.stateNode;var T=o.memoizedProps,A=Yi(r,T);y.props=A;var k=y.context,z=r.contextType;S=Eo,typeof z=="object"&&z!==null&&(S=mt(z));var B=r.getDerivedStateFromProps;z=typeof B=="function"||typeof y.getSnapshotBeforeUpdate=="function",T=o.pendingProps!==T,z||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T||k!==S)&&Wp(o,y,u,S),si=!1;var P=o.memoizedState;y.state=P,Ps(o,u,y,p),ks(),k=o.memoizedState,T||P!==k||si?(typeof B=="function"&&(ac(o,r,B,u),k=o.memoizedState),(A=si||$p(o,r,A,u,P,k,S))?(z||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=k),y.props=u,y.state=k,y.context=S,u=A):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{y=o.stateNode,Gu(n,o),S=o.memoizedProps,z=Yi(r,S),y.props=z,B=o.pendingProps,P=y.context,k=r.contextType,A=Eo,typeof k=="object"&&k!==null&&(A=mt(k)),T=r.getDerivedStateFromProps,(k=typeof T=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==B||P!==A)&&Wp(o,y,u,A),si=!1,P=o.memoizedState,y.state=P,Ps(o,u,y,p),ks();var O=o.memoizedState;S!==B||P!==O||si||n!==null&&n.dependencies!==null&&er(n.dependencies)?(typeof T=="function"&&(ac(o,r,T,u),O=o.memoizedState),(z=si||$p(o,r,z,u,P,O,A)||n!==null&&n.dependencies!==null&&er(n.dependencies))?(k||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,O,A),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,O,A)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&P===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&P===n.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=O),y.props=u,y.state=O,y.context=A,u=z):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&P===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&P===n.memoizedState||(o.flags|=1024),u=!1)}return y=u,_r(n,o),u=(o.flags&128)!==0,y||u?(y=o.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,n!==null&&u?(o.child=qi(o,n.child,null,p),o.child=qi(o,null,r,p)):gt(n,o,r,p),o.memoizedState=y.state,n=o.child):n=Un(n,o,p),n}function dm(n,o,r,u){return Oi(),o.flags|=256,gt(n,o,r,u),o.child}var hc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pc(n){return{baseLanes:n,cachePool:tp()}}function mc(n,o,r){return n=n!==null?n.childLanes&~r:0,o&&(n|=Jt),n}function hm(n,o,r){var u=o.pendingProps,p=!1,y=(o.flags&128)!==0,S;if((S=y)||(S=n!==null&&n.memoizedState===null?!1:(et.current&2)!==0),S&&(p=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,n===null){if(be){if(p?ai(o):ui(),(n=Ye)?(n=Sg(n,en),n=n!==null&&n.data!=="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:ti!==null?{id:_n,overflow:En}:null,retryLane:536870912,hydrationErrors:null},r=Jh(n),r.return=o,o.child=r,pt=o,Ye=null)):n=null,n===null)throw ii(o);return Wc(n)?o.lanes=32:o.lanes=536870912,null}var T=u.children;return u=u.fallback,p?(ui(),p=o.mode,T=Er({mode:"hidden",children:T},p),u=Pi(u,p,r,null),T.return=o,u.return=o,T.sibling=u,o.child=T,u=o.child,u.memoizedState=pc(r),u.childLanes=mc(n,S,r),o.memoizedState=hc,Bs(null,u)):(ai(o),gc(o,T))}var A=n.memoizedState;if(A!==null&&(T=A.dehydrated,T!==null)){if(y)o.flags&256?(ai(o),o.flags&=-257,o=yc(n,o,r)):o.memoizedState!==null?(ui(),o.child=n.child,o.flags|=128,o=null):(ui(),T=u.fallback,p=o.mode,u=Er({mode:"visible",children:u.children},p),T=Pi(T,p,r,null),T.flags|=2,u.return=o,T.return=o,u.sibling=T,o.child=u,qi(o,n.child,null,r),u=o.child,u.memoizedState=pc(r),u.childLanes=mc(n,S,r),o.memoizedState=hc,o=Bs(null,u));else if(ai(o),Wc(T)){if(S=T.nextSibling&&T.nextSibling.dataset,S)var k=S.dgst;S=k,u=Error(s(419)),u.stack="",u.digest=S,ws({value:u,source:null,stack:null}),o=yc(n,o,r)}else if(ot||xo(n,o,r,!1),S=(r&n.childLanes)!==0,ot||S){if(S=Ve,S!==null&&(u=jd(S,r),u!==0&&u!==A.retryLane))throw A.retryLane=u,ki(n,u),kt(S,n,u),fc;$c(T)||wr(),o=yc(n,o,r)}else $c(T)?(o.flags|=192,o.child=n.child,o=null):(n=A.treeContext,Ye=nn(T.nextSibling),pt=o,be=!0,ni=null,en=!1,n!==null&&Qh(o,n),o=gc(o,u.children),o.flags|=4096);return o}return p?(ui(),T=u.fallback,p=o.mode,A=n.child,k=A.sibling,u=Nn(A,{mode:"hidden",children:u.children}),u.subtreeFlags=A.subtreeFlags&65011712,k!==null?T=Nn(k,T):(T=Pi(T,p,r,null),T.flags|=2),T.return=o,u.return=o,u.sibling=T,o.child=u,Bs(null,u),u=o.child,T=n.child.memoizedState,T===null?T=pc(r):(p=T.cachePool,p!==null?(A=nt._currentValue,p=p.parent!==A?{parent:A,pool:A}:p):p=tp(),T={baseLanes:T.baseLanes|r,cachePool:p}),u.memoizedState=T,u.childLanes=mc(n,S,r),o.memoizedState=hc,Bs(n.child,u)):(ai(o),r=n.child,n=r.sibling,r=Nn(r,{mode:"visible",children:u.children}),r.return=o,r.sibling=null,n!==null&&(S=o.deletions,S===null?(o.deletions=[n],o.flags|=16):S.push(n)),o.child=r,o.memoizedState=null,r)}function gc(n,o){return o=Er({mode:"visible",children:o},n.mode),o.return=n,n.child=o}function Er(n,o){return n=Vt(22,n,null,o),n.lanes=0,n}function yc(n,o,r){return qi(o,n.child,null,r),n=gc(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function pm(n,o,r){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o),Du(n.return,o,r)}function vc(n,o,r,u,p,y){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:p,treeForkCount:y}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=r,S.tailMode=p,S.treeForkCount=y)}function mm(n,o,r){var u=o.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var S=et.current,T=(S&2)!==0;if(T?(S=S&1|2,o.flags|=128):S&=1,W(et,S),gt(n,o,u,r),u=be?Rs:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&pm(n,r,o);else if(n.tag===19)pm(n,r,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(p){case"forwards":for(r=o.child,p=null;r!==null;)n=r.alternate,n!==null&&ar(n)===null&&(p=r),r=r.sibling;r=p,r===null?(p=o.child,o.child=null):(p=r.sibling,r.sibling=null),vc(o,!1,p,r,y,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=o.child,o.child=null;p!==null;){if(n=p.alternate,n!==null&&ar(n)===null){o.child=p;break}n=p.sibling,p.sibling=r,r=p,p=n}vc(o,!0,r,null,y,u);break;case"together":vc(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function Un(n,o,r){if(n!==null&&(o.dependencies=n.dependencies),di|=o.lanes,(r&o.childLanes)===0)if(n!==null){if(xo(n,o,r,!1),(r&o.childLanes)===0)return null}else return null;if(n!==null&&o.child!==n.child)throw Error(s(153));if(o.child!==null){for(n=o.child,r=Nn(n,n.pendingProps),o.child=r,r.return=o;n.sibling!==null;)n=n.sibling,r=r.sibling=Nn(n,n.pendingProps),r.return=o;r.sibling=null}return o.child}function _c(n,o){return(n.lanes&o)!==0?!0:(n=n.dependencies,!!(n!==null&&er(n)))}function xT(n,o,r){switch(o.tag){case 3:xt(o,o.stateNode.containerInfo),oi(o,nt,n.memoizedState.cache),Oi();break;case 27:case 5:hs(o);break;case 4:xt(o,o.stateNode.containerInfo);break;case 10:oi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Fu(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(ai(o),o.flags|=128,null):(r&o.child.childLanes)!==0?hm(n,o,r):(ai(o),n=Un(n,o,r),n!==null?n.sibling:null);ai(o);break;case 19:var p=(n.flags&128)!==0;if(u=(r&o.childLanes)!==0,u||(xo(n,o,r,!1),u=(r&o.childLanes)!==0),p){if(u)return mm(n,o,r);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),W(et,et.current),u)break;return null;case 22:return o.lanes=0,rm(n,o,r,o.pendingProps);case 24:oi(o,nt,n.memoizedState.cache)}return Un(n,o,r)}function gm(n,o,r){if(n!==null)if(n.memoizedProps!==o.pendingProps)ot=!0;else{if(!_c(n,r)&&(o.flags&128)===0)return ot=!1,xT(n,o,r);ot=(n.flags&131072)!==0}else ot=!1,be&&(o.flags&1048576)!==0&&Xh(o,Rs,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(n=Bi(o.elementType),o.type=n,typeof n=="function")xu(n)?(u=Yi(n,u),o.tag=1,o=fm(null,o,n,u,r)):(o.tag=0,o=dc(null,o,n,u,r));else{if(n!=null){var p=n.$$typeof;if(p===X){o.tag=11,o=om(null,o,n,u,r);break e}else if(p===Y){o.tag=14,o=sm(null,o,n,u,r);break e}}throw o=_e(n)||n,Error(s(306,o,""))}}return o;case 0:return dc(n,o,o.type,o.pendingProps,r);case 1:return u=o.type,p=Yi(u,o.pendingProps),fm(n,o,u,p,r);case 3:e:{if(xt(o,o.stateNode.containerInfo),n===null)throw Error(s(387));u=o.pendingProps;var y=o.memoizedState;p=y.element,Gu(n,o),Ps(o,u,null,r);var S=o.memoizedState;if(u=S.cache,oi(o,nt,u),u!==y.cache&&Uu(o,[nt],r,!0),ks(),u=S.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=dm(n,o,u,r);break e}else if(u!==p){p=Wt(Error(s(424)),o),ws(p),o=dm(n,o,u,r);break e}else{switch(n=o.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ye=nn(n.firstChild),pt=o,be=!0,ni=null,en=!0,r=rp(o,null,u,r),o.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Oi(),u===p){o=Un(n,o,r);break e}gt(n,o,u,r)}o=o.child}return o;case 26:return _r(n,o),n===null?(r=Ng(o.type,null,o.pendingProps,null))?o.memoizedState=r:be||(r=o.type,n=o.pendingProps,u=Pr(Ee.current).createElement(r),u[ht]=o,u[wt]=n,yt(u,r,n),at(u),o.stateNode=u):o.memoizedState=Ng(o.type,n.memoizedProps,o.pendingProps,n.memoizedState),null;case 27:return hs(o),n===null&&be&&(u=o.stateNode=xg(o.type,o.pendingProps,Ee.current),pt=o,en=!0,p=Ye,yi(o.type)?(Zc=p,Ye=nn(u.firstChild)):Ye=p),gt(n,o,o.pendingProps.children,r),_r(n,o),n===null&&(o.flags|=4194304),o.child;case 5:return n===null&&be&&((p=u=Ye)&&(u=eC(u,o.type,o.pendingProps,en),u!==null?(o.stateNode=u,pt=o,Ye=nn(u.firstChild),en=!1,p=!0):p=!1),p||ii(o)),hs(o),p=o.type,y=o.pendingProps,S=n!==null?n.memoizedProps:null,u=y.children,Kc(p,y)?u=null:S!==null&&Kc(p,S)&&(o.flags|=32),o.memoizedState!==null&&(p=Ju(n,o,mT,null,null,r),nl._currentValue=p),_r(n,o),gt(n,o,u,r),o.child;case 6:return n===null&&be&&((n=r=Ye)&&(r=tC(r,o.pendingProps,en),r!==null?(o.stateNode=r,pt=o,Ye=null,n=!0):n=!1),n||ii(o)),null;case 13:return hm(n,o,r);case 4:return xt(o,o.stateNode.containerInfo),u=o.pendingProps,n===null?o.child=qi(o,null,u,r):gt(n,o,u,r),o.child;case 11:return om(n,o,o.type,o.pendingProps,r);case 7:return gt(n,o,o.pendingProps,r),o.child;case 8:return gt(n,o,o.pendingProps.children,r),o.child;case 12:return gt(n,o,o.pendingProps.children,r),o.child;case 10:return u=o.pendingProps,oi(o,o.type,u.value),gt(n,o,u.children,r),o.child;case 9:return p=o.type._context,u=o.pendingProps.children,Gi(o),p=mt(p),u=u(p),o.flags|=1,gt(n,o,u,r),o.child;case 14:return sm(n,o,o.type,o.pendingProps,r);case 15:return lm(n,o,o.type,o.pendingProps,r);case 19:return mm(n,o,r);case 31:return CT(n,o,r);case 22:return rm(n,o,r,o.pendingProps);case 24:return Gi(o),u=mt(nt),n===null?(p=Pu(),p===null&&(p=Ve,y=Lu(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=r),p=y),o.memoizedState={parent:u,cache:p},zu(o),oi(o,nt,p)):((n.lanes&r)!==0&&(Gu(n,o),Ps(o,null,null,r),ks()),p=n.memoizedState,y=o.memoizedState,p.parent!==u?(p={parent:u,cache:u},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),oi(o,nt,u)):(u=y.cache,oi(o,nt,u),u!==p.cache&&Uu(o,[nt],r,!0))),gt(n,o,o.pendingProps.children,r),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Ln(n){n.flags|=4}function Ec(n,o,r,u,p){if((o=(n.mode&32)!==0)&&(o=!1),o){if(n.flags|=16777216,(p&335544128)===p)if(n.stateNode.complete)n.flags|=8192;else if(qm())n.flags|=8192;else throw Vi=or,Ou}else n.flags&=-16777217}function ym(n,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Dg(o))if(qm())n.flags|=8192;else throw Vi=or,Ou}function Sr(n,o){o!==null&&(n.flags|=4),n.flags&16384&&(o=n.tag!==22?$d():536870912,n.lanes|=o,Po|=o)}function Vs(n,o){if(!be)switch(n.tailMode){case"hidden":o=n.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Je(n){var o=n.alternate!==null&&n.alternate.child===n.child,r=0,u=0;if(o)for(var p=n.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=u,n.childLanes=r,o}function AT(n,o,r){var u=o.pendingProps;switch(Ru(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(o),null;case 1:return Je(o),null;case 3:return r=o.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),In(nt),je(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Co(o)?Ln(o):n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Iu())),Je(o),null;case 26:var p=o.type,y=o.memoizedState;return n===null?(Ln(o),y!==null?(Je(o),ym(o,y)):(Je(o),Ec(o,p,null,u,r))):y?y!==n.memoizedState?(Ln(o),Je(o),ym(o,y)):(Je(o),o.flags&=-16777217):(n=n.memoizedProps,n!==u&&Ln(o),Je(o),Ec(o,p,n,u,r)),null;case 27:if(Dl(o),r=Ee.current,p=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&Ln(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return Je(o),null}n=oe.current,Co(o)?$h(o):(n=xg(p,u,r),o.stateNode=n,Ln(o))}return Je(o),null;case 5:if(Dl(o),p=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&Ln(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return Je(o),null}if(y=oe.current,Co(o))$h(o);else{var S=Pr(Ee.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?S.createElement(p,{is:u.is}):S.createElement(p)}}y[ht]=o,y[wt]=u;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=y;e:switch(yt(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ln(o)}}return Je(o),Ec(o,o.type,n===null?null:n.memoizedProps,o.pendingProps,r),null;case 6:if(n&&o.stateNode!=null)n.memoizedProps!==u&&Ln(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(n=Ee.current,Co(o)){if(n=o.stateNode,r=o.memoizedProps,u=null,p=pt,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}n[ht]=o,n=!!(n.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||hg(n.nodeValue,r)),n||ii(o,!0)}else n=Pr(n).createTextNode(u),n[ht]=o,o.stateNode=n}return Je(o),null;case 31:if(r=o.memoizedState,n===null||n.memoizedState!==null){if(u=Co(o),r!==null){if(n===null){if(!u)throw Error(s(318));if(n=o.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[ht]=o}else Oi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Je(o),n=!1}else r=Iu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return o.flags&256?(Ft(o),o):(Ft(o),null);if((o.flags&128)!==0)throw Error(s(558))}return Je(o),null;case 13:if(u=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(p=Co(o),u!==null&&u.dehydrated!==null){if(n===null){if(!p)throw Error(s(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[ht]=o}else Oi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Je(o),p=!1}else p=Iu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(Ft(o),o):(Ft(o),null)}return Ft(o),(o.flags&128)!==0?(o.lanes=r,o):(r=u!==null,n=n!==null&&n.memoizedState!==null,r&&(u=o.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),r!==n&&r&&(o.child.flags|=8192),Sr(o,o.updateQueue),Je(o),null);case 4:return je(),n===null&&Vc(o.stateNode.containerInfo),Je(o),null;case 10:return In(o.type),Je(o),null;case 19:if(V(et),u=o.memoizedState,u===null)return Je(o),null;if(p=(o.flags&128)!==0,y=u.rendering,y===null)if(p)Vs(u,!1);else{if(Ze!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(y=ar(n),y!==null){for(o.flags|=128,Vs(u,!1),n=y.updateQueue,o.updateQueue=n,Sr(o,n),o.subtreeFlags=0,n=r,r=o.child;r!==null;)Yh(r,n),r=r.sibling;return W(et,et.current&1|2),be&&Rn(o,u.treeForkCount),o.child}n=n.sibling}u.tail!==null&&zt()>br&&(o.flags|=128,p=!0,Vs(u,!1),o.lanes=4194304)}else{if(!p)if(n=ar(y),n!==null){if(o.flags|=128,p=!0,n=n.updateQueue,o.updateQueue=n,Sr(o,n),Vs(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!be)return Je(o),null}else 2*zt()-u.renderingStartTime>br&&r!==536870912&&(o.flags|=128,p=!0,Vs(u,!1),o.lanes=4194304);u.isBackwards?(y.sibling=o.child,o.child=y):(n=u.last,n!==null?n.sibling=y:o.child=y,u.last=y)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=zt(),n.sibling=null,r=et.current,W(et,p?r&1|2:r&1),be&&Rn(o,u.treeForkCount),n):(Je(o),null);case 22:case 23:return Ft(o),qu(),u=o.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(r&536870912)!==0&&(o.flags&128)===0&&(Je(o),o.subtreeFlags&6&&(o.flags|=8192)):Je(o),r=o.updateQueue,r!==null&&Sr(o,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==r&&(o.flags|=2048),n!==null&&V(Hi),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),o.memoizedState.cache!==r&&(o.flags|=2048),In(nt),Je(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function bT(n,o){switch(Ru(o),o.tag){case 1:return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return In(nt),je(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 26:case 27:case 5:return Dl(o),null;case 31:if(o.memoizedState!==null){if(Ft(o),o.alternate===null)throw Error(s(340));Oi()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 13:if(Ft(o),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Oi()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return V(et),null;case 4:return je(),null;case 10:return In(o.type),null;case 22:case 23:return Ft(o),qu(),n!==null&&V(Hi),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 24:return In(nt),null;case 25:return null;default:return null}}function vm(n,o){switch(Ru(o),o.tag){case 3:In(nt),je();break;case 26:case 27:case 5:Dl(o);break;case 4:je();break;case 31:o.memoizedState!==null&&Ft(o);break;case 13:Ft(o);break;case 19:V(et);break;case 10:In(o.type);break;case 22:case 23:Ft(o),qu(),n!==null&&V(Hi);break;case 24:In(nt)}}function qs(n,o){try{var r=o.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var p=u.next;r=p;do{if((r.tag&n)===n){u=void 0;var y=r.create,S=r.inst;u=y(),S.destroy=u}r=r.next}while(r!==p)}}catch(T){Oe(o,o.return,T)}}function ci(n,o,r){try{var u=o.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&n)===n){var S=u.inst,T=S.destroy;if(T!==void 0){S.destroy=void 0,p=o;var A=r,k=T;try{k()}catch(z){Oe(p,A,z)}}}u=u.next}while(u!==y)}}catch(z){Oe(o,o.return,z)}}function _m(n){var o=n.updateQueue;if(o!==null){var r=n.stateNode;try{up(o,r)}catch(u){Oe(n,n.return,u)}}}function Em(n,o,r){r.props=Yi(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(u){Oe(n,o,u)}}function Fs(n,o){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof r=="function"?n.refCleanup=r(u):r.current=u}}catch(p){Oe(n,o,p)}}function Sn(n,o){var r=n.ref,u=n.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(p){Oe(n,o,p)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Oe(n,o,p)}else r.current=null}function Sm(n){var o=n.type,r=n.memoizedProps,u=n.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(p){Oe(n,n.return,p)}}function Sc(n,o,r){try{var u=n.stateNode;XT(u,n.type,r,o),u[wt]=o}catch(p){Oe(n,n.return,p)}}function Tm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&yi(n.type)||n.tag===4}function Tc(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Tm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&yi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Cc(n,o,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,o):(o=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.appendChild(n),r=r._reactRootContainer,r!=null||o.onclick!==null||(o.onclick=An));else if(u!==4&&(u===27&&yi(n.type)&&(r=n.stateNode,o=null),n=n.child,n!==null))for(Cc(n,o,r),n=n.sibling;n!==null;)Cc(n,o,r),n=n.sibling}function Tr(n,o,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?r.insertBefore(n,o):r.appendChild(n);else if(u!==4&&(u===27&&yi(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(Tr(n,o,r),n=n.sibling;n!==null;)Tr(n,o,r),n=n.sibling}function Cm(n){var o=n.stateNode,r=n.memoizedProps;try{for(var u=n.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);yt(o,u,r),o[ht]=n,o[wt]=r}catch(y){Oe(n,n.return,y)}}var kn=!1,st=!1,xc=!1,xm=typeof WeakSet=="function"?WeakSet:Set,ut=null;function NT(n,o){if(n=n.containerInfo,Yc=qr,n=Ph(n),yu(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var S=0,T=-1,A=-1,k=0,z=0,B=n,P=null;t:for(;;){for(var O;B!==r||p!==0&&B.nodeType!==3||(T=S+p),B!==y||u!==0&&B.nodeType!==3||(A=S+u),B.nodeType===3&&(S+=B.nodeValue.length),(O=B.firstChild)!==null;)P=B,B=O;for(;;){if(B===n)break t;if(P===r&&++k===p&&(T=S),P===y&&++z===u&&(A=S),(O=B.nextSibling)!==null)break;B=P,P=B.parentNode}B=O}r=T===-1||A===-1?null:{start:T,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(Jc={focusedElem:n,selectionRange:r},qr=!1,ut=o;ut!==null;)if(o=ut,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,ut=n;else for(;ut!==null;){switch(o=ut,y=o.alternate,n=o.flags,o.tag){case 0:if((n&4)!==0&&(n=o.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)p=n[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,r=o,p=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var ee=Yi(r.type,p);n=u.getSnapshotBeforeUpdate(ee,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(fe){Oe(r,r.return,fe)}}break;case 3:if((n&1024)!==0){if(n=o.stateNode.containerInfo,r=n.nodeType,r===9)Qc(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Qc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=o.sibling,n!==null){n.return=o.return,ut=n;break}ut=o.return}}function Am(n,o,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:On(n,r),u&4&&qs(5,r);break;case 1:if(On(n,r),u&4)if(n=r.stateNode,o===null)try{n.componentDidMount()}catch(S){Oe(r,r.return,S)}else{var p=Yi(r.type,o.memoizedProps);o=o.memoizedState;try{n.componentDidUpdate(p,o,n.__reactInternalSnapshotBeforeUpdate)}catch(S){Oe(r,r.return,S)}}u&64&&_m(r),u&512&&Fs(r,r.return);break;case 3:if(On(n,r),u&64&&(n=r.updateQueue,n!==null)){if(o=null,r.child!==null)switch(r.child.tag){case 27:case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}try{up(n,o)}catch(S){Oe(r,r.return,S)}}break;case 27:o===null&&u&4&&Cm(r);case 26:case 5:On(n,r),o===null&&u&4&&Sm(r),u&512&&Fs(r,r.return);break;case 12:On(n,r);break;case 31:On(n,r),u&4&&Rm(n,r);break;case 13:On(n,r),u&4&&wm(n,r),u&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=PT.bind(null,r),nC(n,r))));break;case 22:if(u=r.memoizedState!==null||kn,!u){o=o!==null&&o.memoizedState!==null||st,p=kn;var y=st;kn=u,(st=o)&&!y?zn(n,r,(r.subtreeFlags&8772)!==0):On(n,r),kn=p,st=y}break;case 30:break;default:On(n,r)}}function bm(n){var o=n.alternate;o!==null&&(n.alternate=null,bm(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&eu(o)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var $e=null,Mt=!1;function Pn(n,o,r){for(r=r.child;r!==null;)Nm(n,o,r),r=r.sibling}function Nm(n,o,r){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ps,r)}catch{}switch(r.tag){case 26:st||Sn(r,o),Pn(n,o,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:st||Sn(r,o);var u=$e,p=Mt;yi(r.type)&&($e=r.stateNode,Mt=!1),Pn(n,o,r),js(r.stateNode),$e=u,Mt=p;break;case 5:st||Sn(r,o);case 6:if(u=$e,p=Mt,$e=null,Pn(n,o,r),$e=u,Mt=p,$e!==null)if(Mt)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(r.stateNode)}catch(y){Oe(r,o,y)}else try{$e.removeChild(r.stateNode)}catch(y){Oe(r,o,y)}break;case 18:$e!==null&&(Mt?(n=$e,_g(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),Fo(n)):_g($e,r.stateNode));break;case 4:u=$e,p=Mt,$e=r.stateNode.containerInfo,Mt=!0,Pn(n,o,r),$e=u,Mt=p;break;case 0:case 11:case 14:case 15:ci(2,r,o),st||ci(4,r,o),Pn(n,o,r);break;case 1:st||(Sn(r,o),u=r.stateNode,typeof u.componentWillUnmount=="function"&&Em(r,o,u)),Pn(n,o,r);break;case 21:Pn(n,o,r);break;case 22:st=(u=st)||r.memoizedState!==null,Pn(n,o,r),st=u;break;default:Pn(n,o,r)}}function Rm(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Fo(n)}catch(r){Oe(o,o.return,r)}}}function wm(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Fo(n)}catch(r){Oe(o,o.return,r)}}function RT(n){switch(n.tag){case 31:case 13:case 19:var o=n.stateNode;return o===null&&(o=n.stateNode=new xm),o;case 22:return n=n.stateNode,o=n._retryCache,o===null&&(o=n._retryCache=new xm),o;default:throw Error(s(435,n.tag))}}function Cr(n,o){var r=RT(n);o.forEach(function(u){if(!r.has(u)){r.add(u);var p=OT.bind(null,n,u);u.then(p,p)}})}function Dt(n,o){var r=o.deletions;if(r!==null)for(var u=0;u<r.length;u++){var p=r[u],y=n,S=o,T=S;e:for(;T!==null;){switch(T.tag){case 27:if(yi(T.type)){$e=T.stateNode,Mt=!1;break e}break;case 5:$e=T.stateNode,Mt=!1;break e;case 3:case 4:$e=T.stateNode.containerInfo,Mt=!0;break e}T=T.return}if($e===null)throw Error(s(160));Nm(y,S,p),$e=null,Mt=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Im(o,n),o=o.sibling}var cn=null;function Im(n,o){var r=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Dt(o,n),Ut(n),u&4&&(ci(3,n,n.return),qs(3,n),ci(5,n,n.return));break;case 1:Dt(o,n),Ut(n),u&512&&(st||r===null||Sn(r,r.return)),u&64&&kn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var p=cn;if(Dt(o,n),Ut(n),u&512&&(st||r===null||Sn(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=n.memoizedState,r===null)if(u===null)if(n.stateNode===null){e:{u=n.type,r=n.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[ys]||y[ht]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),yt(y,u,r),y[ht]=n,at(y),u=y;break e;case"link":var S=Ig("link","href",p).get(u+(r.href||""));if(S){for(var T=0;T<S.length;T++)if(y=S[T],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(T,1);break t}}y=p.createElement(u),yt(y,u,r),p.head.appendChild(y);break;case"meta":if(S=Ig("meta","content",p).get(u+(r.content||""))){for(T=0;T<S.length;T++)if(y=S[T],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(T,1);break t}}y=p.createElement(u),yt(y,u,r),p.head.appendChild(y);break;default:throw Error(s(468,u))}y[ht]=n,at(y),u=y}n.stateNode=u}else Mg(p,n.type,n.stateNode);else n.stateNode=wg(p,u,n.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?Mg(p,n.type,n.stateNode):wg(p,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Sc(n,n.memoizedProps,r.memoizedProps)}break;case 27:Dt(o,n),Ut(n),u&512&&(st||r===null||Sn(r,r.return)),r!==null&&u&4&&Sc(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Dt(o,n),Ut(n),u&512&&(st||r===null||Sn(r,r.return)),n.flags&32){p=n.stateNode;try{ho(p,"")}catch(ee){Oe(n,n.return,ee)}}u&4&&n.stateNode!=null&&(p=n.memoizedProps,Sc(n,p,r!==null?r.memoizedProps:p)),u&1024&&(xc=!0);break;case 6:if(Dt(o,n),Ut(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,r=n.stateNode;try{r.nodeValue=u}catch(ee){Oe(n,n.return,ee)}}break;case 3:if(Gr=null,p=cn,cn=Or(o.containerInfo),Dt(o,n),cn=p,Ut(n),u&4&&r!==null&&r.memoizedState.isDehydrated)try{Fo(o.containerInfo)}catch(ee){Oe(n,n.return,ee)}xc&&(xc=!1,Mm(n));break;case 4:u=cn,cn=Or(n.stateNode.containerInfo),Dt(o,n),Ut(n),cn=u;break;case 12:Dt(o,n),Ut(n);break;case 31:Dt(o,n),Ut(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Cr(n,u)));break;case 13:Dt(o,n),Ut(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Ar=zt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Cr(n,u)));break;case 22:p=n.memoizedState!==null;var A=r!==null&&r.memoizedState!==null,k=kn,z=st;if(kn=k||p,st=z||A,Dt(o,n),st=z,kn=k,Ut(n),u&8192)e:for(o=n.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(r===null||A||kn||st||Ji(n)),r=null,o=n;;){if(o.tag===5||o.tag===26){if(r===null){A=r=o;try{if(y=A.stateNode,p)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{T=A.stateNode;var B=A.memoizedProps.style,P=B!=null&&B.hasOwnProperty("display")?B.display:null;T.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(ee){Oe(A,A.return,ee)}}}else if(o.tag===6){if(r===null){A=o;try{A.stateNode.nodeValue=p?"":A.memoizedProps}catch(ee){Oe(A,A.return,ee)}}}else if(o.tag===18){if(r===null){A=o;try{var O=A.stateNode;p?Eg(O,!0):Eg(A.stateNode,!1)}catch(ee){Oe(A,A.return,ee)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break e;for(;o.sibling===null;){if(o.return===null||o.return===n)break e;r===o&&(r=null),o=o.return}r===o&&(r=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=n.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,Cr(n,r))));break;case 19:Dt(o,n),Ut(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Cr(n,u)));break;case 30:break;case 21:break;default:Dt(o,n),Ut(n)}}function Ut(n){var o=n.flags;if(o&2){try{for(var r,u=n.return;u!==null;){if(Tm(u)){r=u;break}u=u.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var p=r.stateNode,y=Tc(n);Tr(n,y,p);break;case 5:var S=r.stateNode;r.flags&32&&(ho(S,""),r.flags&=-33);var T=Tc(n);Tr(n,T,S);break;case 3:case 4:var A=r.stateNode.containerInfo,k=Tc(n);Cc(n,k,A);break;default:throw Error(s(161))}}catch(z){Oe(n,n.return,z)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function Mm(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var o=n;Mm(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),n=n.sibling}}function On(n,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Am(n,o.alternate,o),o=o.sibling}function Ji(n){for(n=n.child;n!==null;){var o=n;switch(o.tag){case 0:case 11:case 14:case 15:ci(4,o,o.return),Ji(o);break;case 1:Sn(o,o.return);var r=o.stateNode;typeof r.componentWillUnmount=="function"&&Em(o,o.return,r),Ji(o);break;case 27:js(o.stateNode);case 26:case 5:Sn(o,o.return),Ji(o);break;case 22:o.memoizedState===null&&Ji(o);break;case 30:Ji(o);break;default:Ji(o)}n=n.sibling}}function zn(n,o,r){for(r=r&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,p=n,y=o,S=y.flags;switch(y.tag){case 0:case 11:case 15:zn(p,y,r),qs(4,y);break;case 1:if(zn(p,y,r),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(k){Oe(u,u.return,k)}if(u=y,p=u.updateQueue,p!==null){var T=u.stateNode;try{var A=p.shared.hiddenCallbacks;if(A!==null)for(p.shared.hiddenCallbacks=null,p=0;p<A.length;p++)ap(A[p],T)}catch(k){Oe(u,u.return,k)}}r&&S&64&&_m(y),Fs(y,y.return);break;case 27:Cm(y);case 26:case 5:zn(p,y,r),r&&u===null&&S&4&&Sm(y),Fs(y,y.return);break;case 12:zn(p,y,r);break;case 31:zn(p,y,r),r&&S&4&&Rm(p,y);break;case 13:zn(p,y,r),r&&S&4&&wm(p,y);break;case 22:y.memoizedState===null&&zn(p,y,r),Fs(y,y.return);break;case 30:break;default:zn(p,y,r)}o=o.sibling}}function Ac(n,o){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(n=o.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&Is(r))}function bc(n,o){n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&Is(n))}function fn(n,o,r,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Dm(n,o,r,u),o=o.sibling}function Dm(n,o,r,u){var p=o.flags;switch(o.tag){case 0:case 11:case 15:fn(n,o,r,u),p&2048&&qs(9,o);break;case 1:fn(n,o,r,u);break;case 3:fn(n,o,r,u),p&2048&&(n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&Is(n)));break;case 12:if(p&2048){fn(n,o,r,u),n=o.stateNode;try{var y=o.memoizedProps,S=y.id,T=y.onPostCommit;typeof T=="function"&&T(S,o.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(A){Oe(o,o.return,A)}}else fn(n,o,r,u);break;case 31:fn(n,o,r,u);break;case 13:fn(n,o,r,u);break;case 23:break;case 22:y=o.stateNode,S=o.alternate,o.memoizedState!==null?y._visibility&2?fn(n,o,r,u):Ys(n,o):y._visibility&2?fn(n,o,r,u):(y._visibility|=2,Uo(n,o,r,u,(o.subtreeFlags&10256)!==0||!1)),p&2048&&Ac(S,o);break;case 24:fn(n,o,r,u),p&2048&&bc(o.alternate,o);break;default:fn(n,o,r,u)}}function Uo(n,o,r,u,p){for(p=p&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=n,S=o,T=r,A=u,k=S.flags;switch(S.tag){case 0:case 11:case 15:Uo(y,S,T,A,p),qs(8,S);break;case 23:break;case 22:var z=S.stateNode;S.memoizedState!==null?z._visibility&2?Uo(y,S,T,A,p):Ys(y,S):(z._visibility|=2,Uo(y,S,T,A,p)),p&&k&2048&&Ac(S.alternate,S);break;case 24:Uo(y,S,T,A,p),p&&k&2048&&bc(S.alternate,S);break;default:Uo(y,S,T,A,p)}o=o.sibling}}function Ys(n,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var r=n,u=o,p=u.flags;switch(u.tag){case 22:Ys(r,u),p&2048&&Ac(u.alternate,u);break;case 24:Ys(r,u),p&2048&&bc(u.alternate,u);break;default:Ys(r,u)}o=o.sibling}}var Js=8192;function Lo(n,o,r){if(n.subtreeFlags&Js)for(n=n.child;n!==null;)Um(n,o,r),n=n.sibling}function Um(n,o,r){switch(n.tag){case 26:Lo(n,o,r),n.flags&Js&&n.memoizedState!==null&&pC(r,cn,n.memoizedState,n.memoizedProps);break;case 5:Lo(n,o,r);break;case 3:case 4:var u=cn;cn=Or(n.stateNode.containerInfo),Lo(n,o,r),cn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Js,Js=16777216,Lo(n,o,r),Js=u):Lo(n,o,r));break;default:Lo(n,o,r)}}function Lm(n){var o=n.alternate;if(o!==null&&(n=o.child,n!==null)){o.child=null;do o=n.sibling,n.sibling=null,n=o;while(n!==null)}}function Ks(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];ut=u,Pm(u,n)}Lm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)km(n),n=n.sibling}function km(n){switch(n.tag){case 0:case 11:case 15:Ks(n),n.flags&2048&&ci(9,n,n.return);break;case 3:Ks(n);break;case 12:Ks(n);break;case 22:var o=n.stateNode;n.memoizedState!==null&&o._visibility&2&&(n.return===null||n.return.tag!==13)?(o._visibility&=-3,xr(n)):Ks(n);break;default:Ks(n)}}function xr(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];ut=u,Pm(u,n)}Lm(n)}for(n=n.child;n!==null;){switch(o=n,o.tag){case 0:case 11:case 15:ci(8,o,o.return),xr(o);break;case 22:r=o.stateNode,r._visibility&2&&(r._visibility&=-3,xr(o));break;default:xr(o)}n=n.sibling}}function Pm(n,o){for(;ut!==null;){var r=ut;switch(r.tag){case 0:case 11:case 15:ci(8,r,o);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Is(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,ut=u;else e:for(r=n;ut!==null;){u=ut;var p=u.sibling,y=u.return;if(bm(u),u===r){ut=null;break e}if(p!==null){p.return=y,ut=p;break e}ut=y}}}var wT={getCacheForType:function(n){var o=mt(nt),r=o.data.get(n);return r===void 0&&(r=n(),o.data.set(n,r)),r},cacheSignal:function(){return mt(nt).controller.signal}},IT=typeof WeakMap=="function"?WeakMap:Map,De=0,Ve=null,Se=null,Ce=0,Pe=0,Yt=null,fi=!1,ko=!1,Nc=!1,Gn=0,Ze=0,di=0,Ki=0,Rc=0,Jt=0,Po=0,Xs=null,Lt=null,wc=!1,Ar=0,Om=0,br=1/0,Nr=null,hi=null,lt=0,pi=null,Oo=null,Hn=0,Ic=0,Mc=null,zm=null,Qs=0,Dc=null;function Kt(){return(De&2)!==0&&Ce!==0?Ce&-Ce:w.T!==null?zc():eh()}function Gm(){if(Jt===0)if((Ce&536870912)===0||be){var n=kl;kl<<=1,(kl&3932160)===0&&(kl=262144),Jt=n}else Jt=536870912;return n=qt.current,n!==null&&(n.flags|=32),Jt}function kt(n,o,r){(n===Ve&&(Pe===2||Pe===9)||n.cancelPendingCommit!==null)&&(zo(n,0),mi(n,Ce,Jt,!1)),gs(n,r),((De&2)===0||n!==Ve)&&(n===Ve&&((De&2)===0&&(Ki|=r),Ze===4&&mi(n,Ce,Jt,!1)),Tn(n))}function Hm(n,o,r){if((De&6)!==0)throw Error(s(327));var u=!r&&(o&127)===0&&(o&n.expiredLanes)===0||ms(n,o),p=u?UT(n,o):Lc(n,o,!0),y=u;do{if(p===0){ko&&!u&&mi(n,o,0,!1);break}else{if(r=n.current.alternate,y&&!MT(r)){p=Lc(n,o,!1),y=!1;continue}if(p===2){if(y=o,n.errorRecoveryDisabledLanes&y)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var T=n;p=Xs;var A=T.current.memoizedState.isDehydrated;if(A&&(zo(T,S).flags|=256),S=Lc(T,S,!1),S!==2){if(Nc&&!A){T.errorRecoveryDisabledLanes|=y,Ki|=y,p=4;break e}y=Lt,Lt=p,y!==null&&(Lt===null?Lt=y:Lt.push.apply(Lt,y))}p=S}if(y=!1,p!==2)continue}}if(p===1){zo(n,0),mi(n,o,0,!0);break}e:{switch(u=n,y=p,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:mi(u,o,Jt,!fi);break e;case 2:Lt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(p=Ar+300-zt(),10<p)){if(mi(u,o,Jt,!fi),Ol(u,0,!0)!==0)break e;Hn=o,u.timeoutHandle=yg(Bm.bind(null,u,r,Lt,Nr,wc,o,Jt,Ki,Po,fi,y,"Throttled",-0,0),p);break e}Bm(u,r,Lt,Nr,wc,o,Jt,Ki,Po,fi,y,null,-0,0)}}break}while(!0);Tn(n)}function Bm(n,o,r,u,p,y,S,T,A,k,z,B,P,O){if(n.timeoutHandle=-1,B=o.subtreeFlags,B&8192||(B&16785408)===16785408){B={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:An},Um(o,y,B);var ee=(y&62914560)===y?Ar-zt():(y&4194048)===y?Om-zt():0;if(ee=mC(B,ee),ee!==null){Hn=y,n.cancelPendingCommit=ee(Qm.bind(null,n,o,y,r,u,p,S,T,A,z,B,null,P,O)),mi(n,y,S,!k);return}}Qm(n,o,y,r,u,p,S,T,A)}function MT(n){for(var o=n;;){var r=o.tag;if((r===0||r===11||r===15)&&o.flags&16384&&(r=o.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var p=r[u],y=p.getSnapshot;p=p.value;try{if(!Bt(y(),p))return!1}catch{return!1}}if(r=o.child,o.subtreeFlags&16384&&r!==null)r.return=o,o=r;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function mi(n,o,r,u){o&=~Rc,o&=~Ki,n.suspendedLanes|=o,n.pingedLanes&=~o,u&&(n.warmLanes|=o),u=n.expirationTimes;for(var p=o;0<p;){var y=31-Ht(p),S=1<<y;u[y]=-1,p&=~S}r!==0&&Wd(n,r,o)}function Rr(){return(De&6)===0?($s(0),!1):!0}function Uc(){if(Se!==null){if(Pe===0)var n=Se.return;else n=Se,wn=zi=null,Qu(n),Ro=null,Ds=0,n=Se;for(;n!==null;)vm(n.alternate,n),n=n.return;Se=null}}function zo(n,o){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,WT(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),Hn=0,Uc(),Ve=n,Se=r=Nn(n.current,null),Ce=o,Pe=0,Yt=null,fi=!1,ko=ms(n,o),Nc=!1,Po=Jt=Rc=Ki=di=Ze=0,Lt=Xs=null,wc=!1,(o&8)!==0&&(o|=o&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=o;0<u;){var p=31-Ht(u),y=1<<p;o|=n[p],u&=~y}return Gn=o,Ql(),r}function Vm(n,o){ge=null,w.H=Hs,o===No||o===ir?(o=op(),Pe=3):o===Ou?(o=op(),Pe=4):Pe=o===fc?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Yt=o,Se===null&&(Ze=1,yr(n,Wt(o,n.current)))}function qm(){var n=qt.current;return n===null?!0:(Ce&4194048)===Ce?tn===null:(Ce&62914560)===Ce||(Ce&536870912)!==0?n===tn:!1}function Fm(){var n=w.H;return w.H=Hs,n===null?Hs:n}function Ym(){var n=w.A;return w.A=wT,n}function wr(){Ze=4,fi||(Ce&4194048)!==Ce&&qt.current!==null||(ko=!0),(di&134217727)===0&&(Ki&134217727)===0||Ve===null||mi(Ve,Ce,Jt,!1)}function Lc(n,o,r){var u=De;De|=2;var p=Fm(),y=Ym();(Ve!==n||Ce!==o)&&(Nr=null,zo(n,o)),o=!1;var S=Ze;e:do try{if(Pe!==0&&Se!==null){var T=Se,A=Yt;switch(Pe){case 8:Uc(),S=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(o=!0);var k=Pe;if(Pe=0,Yt=null,Go(n,T,A,k),r&&ko){S=0;break e}break;default:k=Pe,Pe=0,Yt=null,Go(n,T,A,k)}}DT(),S=Ze;break}catch(z){Vm(n,z)}while(!0);return o&&n.shellSuspendCounter++,wn=zi=null,De=u,w.H=p,w.A=y,Se===null&&(Ve=null,Ce=0,Ql()),S}function DT(){for(;Se!==null;)Jm(Se)}function UT(n,o){var r=De;De|=2;var u=Fm(),p=Ym();Ve!==n||Ce!==o?(Nr=null,br=zt()+500,zo(n,o)):ko=ms(n,o);e:do try{if(Pe!==0&&Se!==null){o=Se;var y=Yt;t:switch(Pe){case 1:Pe=0,Yt=null,Go(n,o,y,1);break;case 2:case 9:if(np(y)){Pe=0,Yt=null,Km(o);break}o=function(){Pe!==2&&Pe!==9||Ve!==n||(Pe=7),Tn(n)},y.then(o,o);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:np(y)?(Pe=0,Yt=null,Km(o)):(Pe=0,Yt=null,Go(n,o,y,7));break;case 5:var S=null;switch(Se.tag){case 26:S=Se.memoizedState;case 5:case 27:var T=Se;if(S?Dg(S):T.stateNode.complete){Pe=0,Yt=null;var A=T.sibling;if(A!==null)Se=A;else{var k=T.return;k!==null?(Se=k,Ir(k)):Se=null}break t}}Pe=0,Yt=null,Go(n,o,y,5);break;case 6:Pe=0,Yt=null,Go(n,o,y,6);break;case 8:Uc(),Ze=6;break e;default:throw Error(s(462))}}LT();break}catch(z){Vm(n,z)}while(!0);return wn=zi=null,w.H=u,w.A=p,De=r,Se!==null?0:(Ve=null,Ce=0,Ql(),Ze)}function LT(){for(;Se!==null&&!iS();)Jm(Se)}function Jm(n){var o=gm(n.alternate,n,Gn);n.memoizedProps=n.pendingProps,o===null?Ir(n):Se=o}function Km(n){var o=n,r=o.alternate;switch(o.tag){case 15:case 0:o=cm(r,o,o.pendingProps,o.type,void 0,Ce);break;case 11:o=cm(r,o,o.pendingProps,o.type.render,o.ref,Ce);break;case 5:Qu(o);default:vm(r,o),o=Se=Yh(o,Gn),o=gm(r,o,Gn)}n.memoizedProps=n.pendingProps,o===null?Ir(n):Se=o}function Go(n,o,r,u){wn=zi=null,Qu(o),Ro=null,Ds=0;var p=o.return;try{if(TT(n,p,o,r,Ce)){Ze=1,yr(n,Wt(r,n.current)),Se=null;return}}catch(y){if(p!==null)throw Se=p,y;Ze=1,yr(n,Wt(r,n.current)),Se=null;return}o.flags&32768?(be||u===1?n=!0:ko||(Ce&536870912)!==0?n=!1:(fi=n=!0,(u===2||u===9||u===3||u===6)&&(u=qt.current,u!==null&&u.tag===13&&(u.flags|=16384))),Xm(o,n)):Ir(o)}function Ir(n){var o=n;do{if((o.flags&32768)!==0){Xm(o,fi);return}n=o.return;var r=AT(o.alternate,o,Gn);if(r!==null){Se=r;return}if(o=o.sibling,o!==null){Se=o;return}Se=o=n}while(o!==null);Ze===0&&(Ze=5)}function Xm(n,o){do{var r=bT(n.alternate,n);if(r!==null){r.flags&=32767,Se=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!o&&(n=n.sibling,n!==null)){Se=n;return}Se=n=r}while(n!==null);Ze=6,Se=null}function Qm(n,o,r,u,p,y,S,T,A){n.cancelPendingCommit=null;do Mr();while(lt!==0);if((De&6)!==0)throw Error(s(327));if(o!==null){if(o===n.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=Tu,hS(n,r,y,S,T,A),n===Ve&&(Se=Ve=null,Ce=0),Oo=o,pi=n,Hn=r,Ic=y,Mc=p,zm=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,zT(Ul,function(){return eg(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=w.T,w.T=null,p=q.p,q.p=2,S=De,De|=4;try{NT(n,o,r)}finally{De=S,q.p=p,w.T=u}}lt=1,$m(),Wm(),Zm()}}function $m(){if(lt===1){lt=0;var n=pi,o=Oo,r=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||r){r=w.T,w.T=null;var u=q.p;q.p=2;var p=De;De|=4;try{Im(o,n);var y=Jc,S=Ph(n.containerInfo),T=y.focusedElem,A=y.selectionRange;if(S!==T&&T&&T.ownerDocument&&kh(T.ownerDocument.documentElement,T)){if(A!==null&&yu(T)){var k=A.start,z=A.end;if(z===void 0&&(z=k),"selectionStart"in T)T.selectionStart=k,T.selectionEnd=Math.min(z,T.value.length);else{var B=T.ownerDocument||document,P=B&&B.defaultView||window;if(P.getSelection){var O=P.getSelection(),ee=T.textContent.length,fe=Math.min(A.start,ee),He=A.end===void 0?fe:Math.min(A.end,ee);!O.extend&&fe>He&&(S=He,He=fe,fe=S);var I=Lh(T,fe),b=Lh(T,He);if(I&&b&&(O.rangeCount!==1||O.anchorNode!==I.node||O.anchorOffset!==I.offset||O.focusNode!==b.node||O.focusOffset!==b.offset)){var L=B.createRange();L.setStart(I.node,I.offset),O.removeAllRanges(),fe>He?(O.addRange(L),O.extend(b.node,b.offset)):(L.setEnd(b.node,b.offset),O.addRange(L))}}}}for(B=[],O=T;O=O.parentNode;)O.nodeType===1&&B.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<B.length;T++){var H=B[T];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}qr=!!Yc,Jc=Yc=null}finally{De=p,q.p=u,w.T=r}}n.current=o,lt=2}}function Wm(){if(lt===2){lt=0;var n=pi,o=Oo,r=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||r){r=w.T,w.T=null;var u=q.p;q.p=2;var p=De;De|=4;try{Am(n,o.alternate,o)}finally{De=p,q.p=u,w.T=r}}lt=3}}function Zm(){if(lt===4||lt===3){lt=0,oS();var n=pi,o=Oo,r=Hn,u=zm;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?lt=5:(lt=0,Oo=pi=null,jm(n,n.pendingLanes));var p=n.pendingLanes;if(p===0&&(hi=null),Za(r),o=o.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ps,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=w.T,p=q.p,q.p=2,w.T=null;try{for(var y=n.onRecoverableError,S=0;S<u.length;S++){var T=u[S];y(T.value,{componentStack:T.stack})}}finally{w.T=o,q.p=p}}(Hn&3)!==0&&Mr(),Tn(n),p=n.pendingLanes,(r&261930)!==0&&(p&42)!==0?n===Dc?Qs++:(Qs=0,Dc=n):Qs=0,$s(0)}}function jm(n,o){(n.pooledCacheLanes&=o)===0&&(o=n.pooledCache,o!=null&&(n.pooledCache=null,Is(o)))}function Mr(){return $m(),Wm(),Zm(),eg()}function eg(){if(lt!==5)return!1;var n=pi,o=Ic;Ic=0;var r=Za(Hn),u=w.T,p=q.p;try{q.p=32>r?32:r,w.T=null,r=Mc,Mc=null;var y=pi,S=Hn;if(lt=0,Oo=pi=null,Hn=0,(De&6)!==0)throw Error(s(331));var T=De;if(De|=4,km(y.current),Dm(y,y.current,S,r),De=T,$s(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ps,y)}catch{}return!0}finally{q.p=p,w.T=u,jm(n,o)}}function tg(n,o,r){o=Wt(r,o),o=cc(n.stateNode,o,2),n=ri(n,o,2),n!==null&&(gs(n,2),Tn(n))}function Oe(n,o,r){if(n.tag===3)tg(n,n,r);else for(;o!==null;){if(o.tag===3){tg(o,n,r);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(hi===null||!hi.has(u))){n=Wt(r,n),r=nm(2),u=ri(o,r,2),u!==null&&(im(r,u,o,n),gs(u,2),Tn(u));break}}o=o.return}}function kc(n,o,r){var u=n.pingCache;if(u===null){u=n.pingCache=new IT;var p=new Set;u.set(o,p)}else p=u.get(o),p===void 0&&(p=new Set,u.set(o,p));p.has(r)||(Nc=!0,p.add(r),n=kT.bind(null,n,o,r),o.then(n,n))}function kT(n,o,r){var u=n.pingCache;u!==null&&u.delete(o),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Ve===n&&(Ce&r)===r&&(Ze===4||Ze===3&&(Ce&62914560)===Ce&&300>zt()-Ar?(De&2)===0&&zo(n,0):Rc|=r,Po===Ce&&(Po=0)),Tn(n)}function ng(n,o){o===0&&(o=$d()),n=ki(n,o),n!==null&&(gs(n,o),Tn(n))}function PT(n){var o=n.memoizedState,r=0;o!==null&&(r=o.retryLane),ng(n,r)}function OT(n,o){var r=0;switch(n.tag){case 31:case 13:var u=n.stateNode,p=n.memoizedState;p!==null&&(r=p.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),ng(n,r)}function zT(n,o){return Xa(n,o)}var Dr=null,Ho=null,Pc=!1,Ur=!1,Oc=!1,gi=0;function Tn(n){n!==Ho&&n.next===null&&(Ho===null?Dr=Ho=n:Ho=Ho.next=n),Ur=!0,Pc||(Pc=!0,HT())}function $s(n,o){if(!Oc&&Ur){Oc=!0;do for(var r=!1,u=Dr;u!==null;){if(n!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var S=u.suspendedLanes,T=u.pingedLanes;y=(1<<31-Ht(42|n)+1)-1,y&=p&~(S&~T),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,lg(u,y))}else y=Ce,y=Ol(u,u===Ve?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||ms(u,y)||(r=!0,lg(u,y));u=u.next}while(r);Oc=!1}}function GT(){ig()}function ig(){Ur=Pc=!1;var n=0;gi!==0&&$T()&&(n=gi);for(var o=zt(),r=null,u=Dr;u!==null;){var p=u.next,y=og(u,o);y===0?(u.next=null,r===null?Dr=p:r.next=p,p===null&&(Ho=r)):(r=u,(n!==0||(y&3)!==0)&&(Ur=!0)),u=p}lt!==0&&lt!==5||$s(n),gi!==0&&(gi=0)}function og(n,o){for(var r=n.suspendedLanes,u=n.pingedLanes,p=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var S=31-Ht(y),T=1<<S,A=p[S];A===-1?((T&r)===0||(T&u)!==0)&&(p[S]=dS(T,o)):A<=o&&(n.expiredLanes|=T),y&=~T}if(o=Ve,r=Ce,r=Ol(n,n===o?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,r===0||n===o&&(Pe===2||Pe===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Qa(u),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||ms(n,r)){if(o=r&-r,o===n.callbackPriority)return o;switch(u!==null&&Qa(u),Za(r)){case 2:case 8:r=Xd;break;case 32:r=Ul;break;case 268435456:r=Qd;break;default:r=Ul}return u=sg.bind(null,n),r=Xa(r,u),n.callbackPriority=o,n.callbackNode=r,o}return u!==null&&u!==null&&Qa(u),n.callbackPriority=2,n.callbackNode=null,2}function sg(n,o){if(lt!==0&&lt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Mr()&&n.callbackNode!==r)return null;var u=Ce;return u=Ol(n,n===Ve?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Hm(n,u,o),og(n,zt()),n.callbackNode!=null&&n.callbackNode===r?sg.bind(null,n):null)}function lg(n,o){if(Mr())return null;Hm(n,o,!0)}function HT(){ZT(function(){(De&6)!==0?Xa(Kd,GT):ig()})}function zc(){if(gi===0){var n=Ao;n===0&&(n=Ll,Ll<<=1,(Ll&261888)===0&&(Ll=256)),gi=n}return gi}function rg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Bl(""+n)}function ag(n,o){var r=o.ownerDocument.createElement("input");return r.name=o.name,r.value=o.value,n.id&&r.setAttribute("form",n.id),o.parentNode.insertBefore(r,o),n=new FormData(n),r.parentNode.removeChild(r),n}function BT(n,o,r,u,p){if(o==="submit"&&r&&r.stateNode===p){var y=rg((p[wt]||null).action),S=u.submitter;S&&(o=(o=S[wt]||null)?rg(o.formAction):S.getAttribute("formAction"),o!==null&&(y=o,S=null));var T=new Yl("action","action",null,u,p);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(gi!==0){var A=S?ag(p,S):new FormData(p);oc(r,{pending:!0,data:A,method:p.method,action:y},null,A)}}else typeof y=="function"&&(T.preventDefault(),A=S?ag(p,S):new FormData(p),oc(r,{pending:!0,data:A,method:p.method,action:y},y,A))},currentTarget:p}]})}}for(var Gc=0;Gc<Su.length;Gc++){var Hc=Su[Gc],VT=Hc.toLowerCase(),qT=Hc[0].toUpperCase()+Hc.slice(1);un(VT,"on"+qT)}un(Gh,"onAnimationEnd"),un(Hh,"onAnimationIteration"),un(Bh,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(sT,"onTransitionRun"),un(lT,"onTransitionStart"),un(rT,"onTransitionCancel"),un(Vh,"onTransitionEnd"),co("onMouseEnter",["mouseout","mouseover"]),co("onMouseLeave",["mouseout","mouseover"]),co("onPointerEnter",["pointerout","pointerover"]),co("onPointerLeave",["pointerout","pointerover"]),Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ws));function ug(n,o){o=(o&4)!==0;for(var r=0;r<n.length;r++){var u=n[r],p=u.event;u=u.listeners;e:{var y=void 0;if(o)for(var S=u.length-1;0<=S;S--){var T=u[S],A=T.instance,k=T.currentTarget;if(T=T.listener,A!==y&&p.isPropagationStopped())break e;y=T,p.currentTarget=k;try{y(p)}catch(z){Xl(z)}p.currentTarget=null,y=A}else for(S=0;S<u.length;S++){if(T=u[S],A=T.instance,k=T.currentTarget,T=T.listener,A!==y&&p.isPropagationStopped())break e;y=T,p.currentTarget=k;try{y(p)}catch(z){Xl(z)}p.currentTarget=null,y=A}}}}function Te(n,o){var r=o[ja];r===void 0&&(r=o[ja]=new Set);var u=n+"__bubble";r.has(u)||(cg(o,n,2,!1),r.add(u))}function Bc(n,o,r){var u=0;o&&(u|=4),cg(r,n,u,o)}var Lr="_reactListening"+Math.random().toString(36).slice(2);function Vc(n){if(!n[Lr]){n[Lr]=!0,ih.forEach(function(r){r!=="selectionchange"&&(FT.has(r)||Bc(r,!1,n),Bc(r,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[Lr]||(o[Lr]=!0,Bc("selectionchange",!1,o))}}function cg(n,o,r,u){switch(Gg(o)){case 2:var p=vC;break;case 8:p=_C;break;default:p=of}r=p.bind(null,o,r,n),p=void 0,!au||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),u?p!==void 0?n.addEventListener(o,r,{capture:!0,passive:p}):n.addEventListener(o,r,!0):p!==void 0?n.addEventListener(o,r,{passive:p}):n.addEventListener(o,r,!1)}function qc(n,o,r,u,p){var y=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var T=u.stateNode.containerInfo;if(T===p)break;if(S===4)for(S=u.return;S!==null;){var A=S.tag;if((A===3||A===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;T!==null;){if(S=ro(T),S===null)return;if(A=S.tag,A===5||A===6||A===26||A===27){u=y=S;continue e}T=T.parentNode}}u=u.return}mh(function(){var k=y,z=lu(r),B=[];e:{var P=qh.get(n);if(P!==void 0){var O=Yl,ee=n;switch(n){case"keypress":if(ql(r)===0)break e;case"keydown":case"keyup":O=OS;break;case"focusin":ee="focus",O=du;break;case"focusout":ee="blur",O=du;break;case"beforeblur":case"afterblur":O=du;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=vh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=AS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=HS;break;case Gh:case Hh:case Bh:O=RS;break;case Vh:O=VS;break;case"scroll":case"scrollend":O=CS;break;case"wheel":O=FS;break;case"copy":case"cut":case"paste":O=IS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Eh;break;case"toggle":case"beforetoggle":O=JS}var fe=(o&4)!==0,He=!fe&&(n==="scroll"||n==="scrollend"),I=fe?P!==null?P+"Capture":null:P;fe=[];for(var b=k,L;b!==null;){var H=b;if(L=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||L===null||I===null||(H=_s(b,I),H!=null&&fe.push(Zs(b,H,L))),He)break;b=b.return}0<fe.length&&(P=new O(P,ee,null,r,z),B.push({event:P,listeners:fe}))}}if((o&7)===0){e:{if(P=n==="mouseover"||n==="pointerover",O=n==="mouseout"||n==="pointerout",P&&r!==su&&(ee=r.relatedTarget||r.fromElement)&&(ro(ee)||ee[lo]))break e;if((O||P)&&(P=z.window===z?z:(P=z.ownerDocument)?P.defaultView||P.parentWindow:window,O?(ee=r.relatedTarget||r.toElement,O=k,ee=ee?ro(ee):null,ee!==null&&(He=a(ee),fe=ee.tag,ee!==He||fe!==5&&fe!==27&&fe!==6)&&(ee=null)):(O=null,ee=k),O!==ee)){if(fe=vh,H="onMouseLeave",I="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(fe=Eh,H="onPointerLeave",I="onPointerEnter",b="pointer"),He=O==null?P:vs(O),L=ee==null?P:vs(ee),P=new fe(H,b+"leave",O,r,z),P.target=He,P.relatedTarget=L,H=null,ro(z)===k&&(fe=new fe(I,b+"enter",ee,r,z),fe.target=L,fe.relatedTarget=He,H=fe),He=H,O&&ee)t:{for(fe=YT,I=O,b=ee,L=0,H=I;H;H=fe(H))L++;H=0;for(var ce=b;ce;ce=fe(ce))H++;for(;0<L-H;)I=fe(I),L--;for(;0<H-L;)b=fe(b),H--;for(;L--;){if(I===b||b!==null&&I===b.alternate){fe=I;break t}I=fe(I),b=fe(b)}fe=null}else fe=null;O!==null&&fg(B,P,O,fe,!1),ee!==null&&He!==null&&fg(B,He,ee,fe,!0)}}e:{if(P=k?vs(k):window,O=P.nodeName&&P.nodeName.toLowerCase(),O==="select"||O==="input"&&P.type==="file")var we=Rh;else if(bh(P))if(wh)we=nT;else{we=eT;var le=jS}else O=P.nodeName,!O||O.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?k&&ou(k.elementType)&&(we=Rh):we=tT;if(we&&(we=we(n,k))){Nh(B,we,r,z);break e}le&&le(n,P,k),n==="focusout"&&k&&P.type==="number"&&k.memoizedProps.value!=null&&iu(P,"number",P.value)}switch(le=k?vs(k):window,n){case"focusin":(bh(le)||le.contentEditable==="true")&&(yo=le,vu=k,Ns=null);break;case"focusout":Ns=vu=yo=null;break;case"mousedown":_u=!0;break;case"contextmenu":case"mouseup":case"dragend":_u=!1,Oh(B,r,z);break;case"selectionchange":if(oT)break;case"keydown":case"keyup":Oh(B,r,z)}var ve;if(pu)e:{switch(n){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else go?xh(n,r)&&(xe="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(xe="onCompositionStart");xe&&(Sh&&r.locale!=="ko"&&(go||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&go&&(ve=gh()):(ei=z,uu="value"in ei?ei.value:ei.textContent,go=!0)),le=kr(k,xe),0<le.length&&(xe=new _h(xe,n,null,r,z),B.push({event:xe,listeners:le}),ve?xe.data=ve:(ve=Ah(r),ve!==null&&(xe.data=ve)))),(ve=XS?QS(n,r):$S(n,r))&&(xe=kr(k,"onBeforeInput"),0<xe.length&&(le=new _h("onBeforeInput","beforeinput",null,r,z),B.push({event:le,listeners:xe}),le.data=ve)),BT(B,n,k,r,z)}ug(B,o)})}function Zs(n,o,r){return{instance:n,listener:o,currentTarget:r}}function kr(n,o){for(var r=o+"Capture",u=[];n!==null;){var p=n,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=_s(n,r),p!=null&&u.unshift(Zs(n,p,y)),p=_s(n,o),p!=null&&u.push(Zs(n,p,y))),n.tag===3)return u;n=n.return}return[]}function YT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function fg(n,o,r,u,p){for(var y=o._reactName,S=[];r!==null&&r!==u;){var T=r,A=T.alternate,k=T.stateNode;if(T=T.tag,A!==null&&A===u)break;T!==5&&T!==26&&T!==27||k===null||(A=k,p?(k=_s(r,y),k!=null&&S.unshift(Zs(r,k,A))):p||(k=_s(r,y),k!=null&&S.push(Zs(r,k,A)))),r=r.return}S.length!==0&&n.push({event:o,listeners:S})}var JT=/\r\n?/g,KT=/\u0000|\uFFFD/g;function dg(n){return(typeof n=="string"?n:""+n).replace(JT,`
`).replace(KT,"")}function hg(n,o){return o=dg(o),dg(n)===o}function Ge(n,o,r,u,p,y){switch(r){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||ho(n,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&ho(n,""+u);break;case"className":Gl(n,"class",u);break;case"tabIndex":Gl(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Gl(n,r,u);break;case"style":hh(n,u,y);break;case"data":if(o!=="object"){Gl(n,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||r!=="href")){n.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=Bl(""+u),n.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(o!=="input"&&Ge(n,o,"name",p.name,p,null),Ge(n,o,"formEncType",p.formEncType,p,null),Ge(n,o,"formMethod",p.formMethod,p,null),Ge(n,o,"formTarget",p.formTarget,p,null)):(Ge(n,o,"encType",p.encType,p,null),Ge(n,o,"method",p.method,p,null),Ge(n,o,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=Bl(""+u),n.setAttribute(r,u);break;case"onClick":u!=null&&(n.onclick=An);break;case"onScroll":u!=null&&Te("scroll",n);break;case"onScrollEnd":u!=null&&Te("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}r=Bl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""+u):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":u===!0?n.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,u):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(r,u):n.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(r):n.setAttribute(r,u);break;case"popover":Te("beforetoggle",n),Te("toggle",n),zl(n,"popover",u);break;case"xlinkActuate":xn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":zl(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=SS.get(r)||r,zl(n,r,u))}}function Fc(n,o,r,u,p,y){switch(r){case"style":hh(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"children":typeof u=="string"?ho(n,u):(typeof u=="number"||typeof u=="bigint")&&ho(n,""+u);break;case"onScroll":u!=null&&Te("scroll",n);break;case"onScrollEnd":u!=null&&Te("scrollend",n);break;case"onClick":u!=null&&(n.onclick=An);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oh.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),o=r.slice(2,p?r.length-7:void 0),y=n[wt]||null,y=y!=null?y[r]:null,typeof y=="function"&&n.removeEventListener(o,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(o,u,p);break e}r in n?n[r]=u:u===!0?n.setAttribute(r,""):zl(n,r,u)}}}function yt(n,o,r){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",n),Te("load",n);var u=!1,p=!1,y;for(y in r)if(r.hasOwnProperty(y)){var S=r[y];if(S!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Ge(n,o,y,S,r,null)}}p&&Ge(n,o,"srcSet",r.srcSet,r,null),u&&Ge(n,o,"src",r.src,r,null);return;case"input":Te("invalid",n);var T=y=S=p=null,A=null,k=null;for(u in r)if(r.hasOwnProperty(u)){var z=r[u];if(z!=null)switch(u){case"name":p=z;break;case"type":S=z;break;case"checked":A=z;break;case"defaultChecked":k=z;break;case"value":y=z;break;case"defaultValue":T=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,o));break;default:Ge(n,o,u,z,r,null)}}uh(n,y,T,A,k,S,p,!1);return;case"select":Te("invalid",n),u=S=y=null;for(p in r)if(r.hasOwnProperty(p)&&(T=r[p],T!=null))switch(p){case"value":y=T;break;case"defaultValue":S=T;break;case"multiple":u=T;default:Ge(n,o,p,T,r,null)}o=y,r=S,n.multiple=!!u,o!=null?fo(n,!!u,o,!1):r!=null&&fo(n,!!u,r,!0);return;case"textarea":Te("invalid",n),y=p=u=null;for(S in r)if(r.hasOwnProperty(S)&&(T=r[S],T!=null))switch(S){case"value":u=T;break;case"defaultValue":p=T;break;case"children":y=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Ge(n,o,S,T,r,null)}fh(n,u,p,y);return;case"option":for(A in r)if(r.hasOwnProperty(A)&&(u=r[A],u!=null))switch(A){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ge(n,o,A,u,r,null)}return;case"dialog":Te("beforetoggle",n),Te("toggle",n),Te("cancel",n),Te("close",n);break;case"iframe":case"object":Te("load",n);break;case"video":case"audio":for(u=0;u<Ws.length;u++)Te(Ws[u],n);break;case"image":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"embed":case"source":case"link":Te("error",n),Te("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in r)if(r.hasOwnProperty(k)&&(u=r[k],u!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Ge(n,o,k,u,r,null)}return;default:if(ou(o)){for(z in r)r.hasOwnProperty(z)&&(u=r[z],u!==void 0&&Fc(n,o,z,u,r,void 0));return}}for(T in r)r.hasOwnProperty(T)&&(u=r[T],u!=null&&Ge(n,o,T,u,r,null))}function XT(n,o,r,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,S=null,T=null,A=null,k=null,z=null;for(O in r){var B=r[O];if(r.hasOwnProperty(O)&&B!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":A=B;default:u.hasOwnProperty(O)||Ge(n,o,O,null,u,B)}}for(var P in u){var O=u[P];if(B=r[P],u.hasOwnProperty(P)&&(O!=null||B!=null))switch(P){case"type":y=O;break;case"name":p=O;break;case"checked":k=O;break;case"defaultChecked":z=O;break;case"value":S=O;break;case"defaultValue":T=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(137,o));break;default:O!==B&&Ge(n,o,P,O,u,B)}}nu(n,S,T,A,k,z,y,p);return;case"select":O=S=T=P=null;for(y in r)if(A=r[y],r.hasOwnProperty(y)&&A!=null)switch(y){case"value":break;case"multiple":O=A;default:u.hasOwnProperty(y)||Ge(n,o,y,null,u,A)}for(p in u)if(y=u[p],A=r[p],u.hasOwnProperty(p)&&(y!=null||A!=null))switch(p){case"value":P=y;break;case"defaultValue":T=y;break;case"multiple":S=y;default:y!==A&&Ge(n,o,p,y,u,A)}o=T,r=S,u=O,P!=null?fo(n,!!r,P,!1):!!u!=!!r&&(o!=null?fo(n,!!r,o,!0):fo(n,!!r,r?[]:"",!1));return;case"textarea":O=P=null;for(T in r)if(p=r[T],r.hasOwnProperty(T)&&p!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ge(n,o,T,null,u,p)}for(S in u)if(p=u[S],y=r[S],u.hasOwnProperty(S)&&(p!=null||y!=null))switch(S){case"value":P=p;break;case"defaultValue":O=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==y&&Ge(n,o,S,p,u,y)}ch(n,P,O);return;case"option":for(var ee in r)if(P=r[ee],r.hasOwnProperty(ee)&&P!=null&&!u.hasOwnProperty(ee))switch(ee){case"selected":n.selected=!1;break;default:Ge(n,o,ee,null,u,P)}for(A in u)if(P=u[A],O=r[A],u.hasOwnProperty(A)&&P!==O&&(P!=null||O!=null))switch(A){case"selected":n.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:Ge(n,o,A,P,u,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in r)P=r[fe],r.hasOwnProperty(fe)&&P!=null&&!u.hasOwnProperty(fe)&&Ge(n,o,fe,null,u,P);for(k in u)if(P=u[k],O=r[k],u.hasOwnProperty(k)&&P!==O&&(P!=null||O!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(137,o));break;default:Ge(n,o,k,P,u,O)}return;default:if(ou(o)){for(var He in r)P=r[He],r.hasOwnProperty(He)&&P!==void 0&&!u.hasOwnProperty(He)&&Fc(n,o,He,void 0,u,P);for(z in u)P=u[z],O=r[z],!u.hasOwnProperty(z)||P===O||P===void 0&&O===void 0||Fc(n,o,z,P,u,O);return}}for(var I in r)P=r[I],r.hasOwnProperty(I)&&P!=null&&!u.hasOwnProperty(I)&&Ge(n,o,I,null,u,P);for(B in u)P=u[B],O=r[B],!u.hasOwnProperty(B)||P===O||P==null&&O==null||Ge(n,o,B,P,u,O)}function pg(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function QT(){if(typeof performance.getEntriesByType=="function"){for(var n=0,o=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var p=r[u],y=p.transferSize,S=p.initiatorType,T=p.duration;if(y&&T&&pg(S)){for(S=0,T=p.responseEnd,u+=1;u<r.length;u++){var A=r[u],k=A.startTime;if(k>T)break;var z=A.transferSize,B=A.initiatorType;z&&pg(B)&&(A=A.responseEnd,S+=z*(A<T?1:(T-k)/(A-k)))}if(--u,o+=8*(y+S)/(p.duration/1e3),n++,10<n)break}}if(0<n)return o/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Yc=null,Jc=null;function Pr(n){return n.nodeType===9?n:n.ownerDocument}function mg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gg(n,o){if(n===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&o==="foreignObject"?0:n}function Kc(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Xc=null;function $T(){var n=window.event;return n&&n.type==="popstate"?n===Xc?!1:(Xc=n,!0):(Xc=null,!1)}var yg=typeof setTimeout=="function"?setTimeout:void 0,WT=typeof clearTimeout=="function"?clearTimeout:void 0,vg=typeof Promise=="function"?Promise:void 0,ZT=typeof queueMicrotask=="function"?queueMicrotask:typeof vg<"u"?function(n){return vg.resolve(null).then(n).catch(jT)}:yg;function jT(n){setTimeout(function(){throw n})}function yi(n){return n==="head"}function _g(n,o){var r=o,u=0;do{var p=r.nextSibling;if(n.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(u===0){n.removeChild(p),Fo(o);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")js(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,js(r);for(var y=r.firstChild;y;){var S=y.nextSibling,T=y.nodeName;y[ys]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=S}}else r==="body"&&js(n.ownerDocument.body);r=p}while(r);Fo(o)}function Eg(n,o){var r=n;n=0;do{var u=r.nextSibling;if(r.nodeType===1?o?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(o?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=u}while(r)}function Qc(n){var o=n.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var r=o;switch(o=o.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Qc(r),eu(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function eC(n,o,r,u){for(;n.nodeType===1;){var p=r;if(n.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[ys])switch(o){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==p.rel||n.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||n.getAttribute("title")!==(p.title==null?null:p.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(p.src==null?null:p.src)||n.getAttribute("type")!==(p.type==null?null:p.type)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(o==="input"&&n.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=nn(n.nextSibling),n===null)break}return null}function tC(n,o,r){if(o==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=nn(n.nextSibling),n===null))return null;return n}function Sg(n,o){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=nn(n.nextSibling),n===null))return null;return n}function $c(n){return n.data==="$?"||n.data==="$~"}function Wc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function nC(n,o){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=o;else if(n.data!=="$?"||r.readyState!=="loading")o();else{var u=function(){o(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function nn(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return n}var Zc=null;function Tg(n){n=n.nextSibling;for(var o=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(o===0)return nn(n.nextSibling);o--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||o++}n=n.nextSibling}return null}function Cg(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(o===0)return n;o--}else r!=="/$"&&r!=="/&"||o++}n=n.previousSibling}return null}function xg(n,o,r){switch(o=Pr(r),n){case"html":if(n=o.documentElement,!n)throw Error(s(452));return n;case"head":if(n=o.head,!n)throw Error(s(453));return n;case"body":if(n=o.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function js(n){for(var o=n.attributes;o.length;)n.removeAttributeNode(o[0]);eu(n)}var on=new Map,Ag=new Set;function Or(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Bn=q.d;q.d={f:iC,r:oC,D:sC,C:lC,L:rC,m:aC,X:cC,S:uC,M:fC};function iC(){var n=Bn.f(),o=Rr();return n||o}function oC(n){var o=ao(n);o!==null&&o.tag===5&&o.type==="form"?Vp(o):Bn.r(n)}var Bo=typeof document>"u"?null:document;function bg(n,o,r){var u=Bo;if(u&&typeof o=="string"&&o){var p=Qt(o);p='link[rel="'+n+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),Ag.has(p)||(Ag.add(p),n={rel:n,crossOrigin:r,href:o},u.querySelector(p)===null&&(o=u.createElement("link"),yt(o,"link",n),at(o),u.head.appendChild(o)))}}function sC(n){Bn.D(n),bg("dns-prefetch",n,null)}function lC(n,o){Bn.C(n,o),bg("preconnect",n,o)}function rC(n,o,r){Bn.L(n,o,r);var u=Bo;if(u&&n&&o){var p='link[rel="preload"][as="'+Qt(o)+'"]';o==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+Qt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+Qt(r.imageSizes)+'"]')):p+='[href="'+Qt(n)+'"]';var y=p;switch(o){case"style":y=Vo(n);break;case"script":y=qo(n)}on.has(y)||(n=_({rel:"preload",href:o==="image"&&r&&r.imageSrcSet?void 0:n,as:o},r),on.set(y,n),u.querySelector(p)!==null||o==="style"&&u.querySelector(el(y))||o==="script"&&u.querySelector(tl(y))||(o=u.createElement("link"),yt(o,"link",n),at(o),u.head.appendChild(o)))}}function aC(n,o){Bn.m(n,o);var r=Bo;if(r&&n){var u=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+Qt(u)+'"][href="'+Qt(n)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=qo(n)}if(!on.has(y)&&(n=_({rel:"modulepreload",href:n},o),on.set(y,n),r.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(tl(y)))return}u=r.createElement("link"),yt(u,"link",n),at(u),r.head.appendChild(u)}}}function uC(n,o,r){Bn.S(n,o,r);var u=Bo;if(u&&n){var p=uo(u).hoistableStyles,y=Vo(n);o=o||"default";var S=p.get(y);if(!S){var T={loading:0,preload:null};if(S=u.querySelector(el(y)))T.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":o},r),(r=on.get(y))&&jc(n,r);var A=S=u.createElement("link");at(A),yt(A,"link",n),A._p=new Promise(function(k,z){A.onload=k,A.onerror=z}),A.addEventListener("load",function(){T.loading|=1}),A.addEventListener("error",function(){T.loading|=2}),T.loading|=4,zr(S,o,u)}S={type:"stylesheet",instance:S,count:1,state:T},p.set(y,S)}}}function cC(n,o){Bn.X(n,o);var r=Bo;if(r&&n){var u=uo(r).hoistableScripts,p=qo(n),y=u.get(p);y||(y=r.querySelector(tl(p)),y||(n=_({src:n,async:!0},o),(o=on.get(p))&&ef(n,o),y=r.createElement("script"),at(y),yt(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function fC(n,o){Bn.M(n,o);var r=Bo;if(r&&n){var u=uo(r).hoistableScripts,p=qo(n),y=u.get(p);y||(y=r.querySelector(tl(p)),y||(n=_({src:n,async:!0,type:"module"},o),(o=on.get(p))&&ef(n,o),y=r.createElement("script"),at(y),yt(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function Ng(n,o,r,u){var p=(p=Ee.current)?Or(p):null;if(!p)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(o=Vo(r.href),r=uo(p).hoistableStyles,u=r.get(o),u||(u={type:"style",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=Vo(r.href);var y=uo(p).hoistableStyles,S=y.get(n);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,S),(y=p.querySelector(el(n)))&&!y._p&&(S.instance=y,S.state.loading=5),on.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},on.set(n,r),y||dC(p,n,r,S.state))),o&&u===null)throw Error(s(528,""));return S}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=r.async,r=r.src,typeof r=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=qo(r),r=uo(p).hoistableScripts,u=r.get(o),u||(u={type:"script",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Vo(n){return'href="'+Qt(n)+'"'}function el(n){return'link[rel="stylesheet"]['+n+"]"}function Rg(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function dC(n,o,r,u){n.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=n.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),yt(o,"link",r),at(o),n.head.appendChild(o))}function qo(n){return'[src="'+Qt(n)+'"]'}function tl(n){return"script[async]"+n}function wg(n,o,r){if(o.count++,o.instance===null)switch(o.type){case"style":var u=n.querySelector('style[data-href~="'+Qt(r.href)+'"]');if(u)return o.instance=u,at(u),u;var p=_({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),at(u),yt(u,"style",p),zr(u,r.precedence,n),o.instance=u;case"stylesheet":p=Vo(r.href);var y=n.querySelector(el(p));if(y)return o.state.loading|=4,o.instance=y,at(y),y;u=Rg(r),(p=on.get(p))&&jc(u,p),y=(n.ownerDocument||n).createElement("link"),at(y);var S=y;return S._p=new Promise(function(T,A){S.onload=T,S.onerror=A}),yt(y,"link",u),o.state.loading|=4,zr(y,r.precedence,n),o.instance=y;case"script":return y=qo(r.src),(p=n.querySelector(tl(y)))?(o.instance=p,at(p),p):(u=r,(p=on.get(y))&&(u=_({},r),ef(u,p)),n=n.ownerDocument||n,p=n.createElement("script"),at(p),yt(p,"link",u),n.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,zr(u,r.precedence,n));return o.instance}function zr(n,o,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,S=0;S<u.length;S++){var T=u[S];if(T.dataset.precedence===o)y=T;else if(y!==p)break}y?y.parentNode.insertBefore(n,y.nextSibling):(o=r.nodeType===9?r.head:r,o.insertBefore(n,o.firstChild))}function jc(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.title==null&&(n.title=o.title)}function ef(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.integrity==null&&(n.integrity=o.integrity)}var Gr=null;function Ig(n,o,r){if(Gr===null){var u=new Map,p=Gr=new Map;p.set(r,u)}else p=Gr,u=p.get(r),u||(u=new Map,p.set(r,u));if(u.has(n))return u;for(u.set(n,null),r=r.getElementsByTagName(n),p=0;p<r.length;p++){var y=r[p];if(!(y[ys]||y[ht]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(o)||"";S=n+S;var T=u.get(S);T?T.push(y):u.set(S,[y])}}return u}function Mg(n,o,r){n=n.ownerDocument||n,n.head.insertBefore(r,o==="title"?n.querySelector("head > title"):null)}function hC(n,o,r){if(r===1||o.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return n=o.disabled,typeof o.precedence=="string"&&n==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Dg(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function pC(n,o,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=Vo(u.href),y=o.querySelector(el(p));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(n.count++,n=Hr.bind(n),o.then(n,n)),r.state.loading|=4,r.instance=y,at(y);return}y=o.ownerDocument||o,u=Rg(u),(p=on.get(p))&&jc(u,p),y=y.createElement("link"),at(y);var S=y;S._p=new Promise(function(T,A){S.onload=T,S.onerror=A}),yt(y,"link",u),r.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,o),(o=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=Hr.bind(n),o.addEventListener("load",r),o.addEventListener("error",r))}}var tf=0;function mC(n,o){return n.stylesheets&&n.count===0&&Vr(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var u=setTimeout(function(){if(n.stylesheets&&Vr(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+o);0<n.imgBytes&&tf===0&&(tf=62500*QT());var p=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Vr(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>tf?50:800)+o);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Hr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vr(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Br=null;function Vr(n,o){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Br=new Map,o.forEach(gC,n),Br=null,Hr.call(n))}function gC(n,o){if(!(o.state.loading&4)){var r=Br.get(n);if(r)var u=r.get(null);else{r=new Map,Br.set(n,r);for(var p=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var S=p[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),u=S)}u&&r.set(null,u)}p=o.instance,S=p.getAttribute("data-precedence"),y=r.get(S)||u,y===u&&r.set(null,p),r.set(S,p),this.count++,u=Hr.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(p,n.firstChild)),o.state.loading|=4}}var nl={$$typeof:F,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function yC(n,o,r,u,p,y,S,T,A){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$a(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$a(0),this.hiddenUpdates=$a(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Ug(n,o,r,u,p,y,S,T,A,k,z,B){return n=new yC(n,o,r,S,A,k,z,B,T),o=1,y===!0&&(o|=24),y=Vt(3,null,null,o),n.current=y,y.stateNode=n,o=Lu(),o.refCount++,n.pooledCache=o,o.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:o},zu(y),n}function Lg(n){return n?(n=Eo,n):Eo}function kg(n,o,r,u,p,y){p=Lg(p),u.context===null?u.context=p:u.pendingContext=p,u=li(o),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=ri(n,u,o),r!==null&&(kt(r,n,o),Ls(r,n,o))}function Pg(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<o?r:o}}function nf(n,o){Pg(n,o),(n=n.alternate)&&Pg(n,o)}function Og(n){if(n.tag===13||n.tag===31){var o=ki(n,67108864);o!==null&&kt(o,n,67108864),nf(n,67108864)}}function zg(n){if(n.tag===13||n.tag===31){var o=Kt();o=Wa(o);var r=ki(n,o);r!==null&&kt(r,n,o),nf(n,o)}}var qr=!0;function vC(n,o,r,u){var p=w.T;w.T=null;var y=q.p;try{q.p=2,of(n,o,r,u)}finally{q.p=y,w.T=p}}function _C(n,o,r,u){var p=w.T;w.T=null;var y=q.p;try{q.p=8,of(n,o,r,u)}finally{q.p=y,w.T=p}}function of(n,o,r,u){if(qr){var p=sf(u);if(p===null)qc(n,o,u,Fr,r),Hg(n,u);else if(SC(p,n,o,r,u))u.stopPropagation();else if(Hg(n,u),o&4&&-1<EC.indexOf(n)){for(;p!==null;){var y=ao(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=Ii(y.pendingLanes);if(S!==0){var T=y;for(T.pendingLanes|=2,T.entangledLanes|=2;S;){var A=1<<31-Ht(S);T.entanglements[1]|=A,S&=~A}Tn(y),(De&6)===0&&(br=zt()+500,$s(0))}}break;case 31:case 13:T=ki(y,2),T!==null&&kt(T,y,2),Rr(),nf(y,2)}if(y=sf(u),y===null&&qc(n,o,u,Fr,r),y===p)break;p=y}p!==null&&u.stopPropagation()}else qc(n,o,u,null,r)}}function sf(n){return n=lu(n),lf(n)}var Fr=null;function lf(n){if(Fr=null,n=ro(n),n!==null){var o=a(n);if(o===null)n=null;else{var r=o.tag;if(r===13){if(n=c(o),n!==null)return n;n=null}else if(r===31){if(n=h(o),n!==null)return n;n=null}else if(r===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return Fr=n,null}function Gg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sS()){case Kd:return 2;case Xd:return 8;case Ul:case lS:return 32;case Qd:return 268435456;default:return 32}default:return 32}}var rf=!1,vi=null,_i=null,Ei=null,il=new Map,ol=new Map,Si=[],EC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hg(n,o){switch(n){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":il.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(o.pointerId)}}function sl(n,o,r,u,p,y){return n===null||n.nativeEvent!==y?(n={blockedOn:o,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},o!==null&&(o=ao(o),o!==null&&Og(o)),n):(n.eventSystemFlags|=u,o=n.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),n)}function SC(n,o,r,u,p){switch(o){case"focusin":return vi=sl(vi,n,o,r,u,p),!0;case"dragenter":return _i=sl(_i,n,o,r,u,p),!0;case"mouseover":return Ei=sl(Ei,n,o,r,u,p),!0;case"pointerover":var y=p.pointerId;return il.set(y,sl(il.get(y)||null,n,o,r,u,p)),!0;case"gotpointercapture":return y=p.pointerId,ol.set(y,sl(ol.get(y)||null,n,o,r,u,p)),!0}return!1}function Bg(n){var o=ro(n.target);if(o!==null){var r=a(o);if(r!==null){if(o=r.tag,o===13){if(o=c(r),o!==null){n.blockedOn=o,th(n.priority,function(){zg(r)});return}}else if(o===31){if(o=h(r),o!==null){n.blockedOn=o,th(n.priority,function(){zg(r)});return}}else if(o===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Yr(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var r=sf(n.nativeEvent);if(r===null){r=n.nativeEvent;var u=new r.constructor(r.type,r);su=u,r.target.dispatchEvent(u),su=null}else return o=ao(r),o!==null&&Og(o),n.blockedOn=r,!1;o.shift()}return!0}function Vg(n,o,r){Yr(n)&&r.delete(o)}function TC(){rf=!1,vi!==null&&Yr(vi)&&(vi=null),_i!==null&&Yr(_i)&&(_i=null),Ei!==null&&Yr(Ei)&&(Ei=null),il.forEach(Vg),ol.forEach(Vg)}function Jr(n,o){n.blockedOn===o&&(n.blockedOn=null,rf||(rf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,TC)))}var Kr=null;function qg(n){Kr!==n&&(Kr=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Kr===n&&(Kr=null);for(var o=0;o<n.length;o+=3){var r=n[o],u=n[o+1],p=n[o+2];if(typeof u!="function"){if(lf(u||r)===null)continue;break}var y=ao(r);y!==null&&(n.splice(o,3),o-=3,oc(y,{pending:!0,data:p,method:r.method,action:u},u,p))}}))}function Fo(n){function o(A){return Jr(A,n)}vi!==null&&Jr(vi,n),_i!==null&&Jr(_i,n),Ei!==null&&Jr(Ei,n),il.forEach(o),ol.forEach(o);for(var r=0;r<Si.length;r++){var u=Si[r];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Si.length&&(r=Si[0],r.blockedOn===null);)Bg(r),r.blockedOn===null&&Si.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var p=r[u],y=r[u+1],S=p[wt]||null;if(typeof y=="function")S||qg(r);else if(S){var T=null;if(y&&y.hasAttribute("formAction")){if(p=y,S=y[wt]||null)T=S.formAction;else if(lf(p)!==null)continue}else T=S.action;typeof T=="function"?r[u+1]=T:(r.splice(u,3),u-=3),qg(r)}}}function Fg(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return p=S})},focusReset:"manual",scroll:"manual"})}function o(){p!==null&&(p(),p=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),p!==null&&(p(),p=null)}}}function af(n){this._internalRoot=n}Xr.prototype.render=af.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(s(409));var r=o.current,u=Kt();kg(r,u,n,o,null,null)},Xr.prototype.unmount=af.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;kg(n.current,2,null,n,null,null),Rr(),o[lo]=null}};function Xr(n){this._internalRoot=n}Xr.prototype.unstable_scheduleHydration=function(n){if(n){var o=eh();n={blockedOn:null,target:n,priority:o};for(var r=0;r<Si.length&&o!==0&&o<Si[r].priority;r++);Si.splice(r,0,n),r===0&&Bg(n)}};var Yg=e.version;if(Yg!=="19.2.3")throw Error(s(527,Yg,"19.2.3"));q.findDOMNode=function(n){var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=m(o),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var CC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:w,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qr.isDisabled&&Qr.supportsFiber)try{ps=Qr.inject(CC),Gt=Qr}catch{}}return rl.createRoot=function(n,o){if(!l(n))throw Error(s(299));var r=!1,u="",p=Zp,y=jp,S=em;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=Ug(n,1,!1,null,null,r,u,null,p,y,S,Fg),n[lo]=o.current,Vc(n),new af(o)},rl.hydrateRoot=function(n,o,r){if(!l(n))throw Error(s(299));var u=!1,p="",y=Zp,S=jp,T=em,A=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.formState!==void 0&&(A=r.formState)),o=Ug(n,1,!0,o,r??null,u,p,A,y,S,T,Fg),o.context=Lg(null),r=o.current,u=Kt(),u=Wa(u),p=li(u),p.callback=null,ri(r,p,u),r=u,o.current.lanes=r,gs(o,r),Tn(o),n[lo]=o.current,Vc(n),new Xr(o)},rl.version="19.2.3",rl}var ty;function LC(){if(ty)return ff.exports;ty=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ff.exports=UC(),ff.exports}var kC=LC();const PC=Mv(kC),ny=2.4,iy=7.5,Xi=40,Yo=20;var qe=(t=>(t[t.EMPTY=0]="EMPTY",t[t.BRICK=1]="BRICK",t[t.STEEL=2]="STEEL",t[t.WATER=3]="WATER",t[t.BUSH=4]="BUSH",t[t.BASE=5]="BASE",t))(qe||{});const Vn={PLAYER:"#FFD700",ENEMY:"#E2E2E2",BASE:"#FF3131",BRICK:"#B22222",STEEL:"#4A4E69",WATER:"#0077B6",BG:"#0D1117"},Jo=13*Xi;class OC{constructor(){this.ctx=null}init(){this.ctx||(this.ctx=new(window.AudioContext||window.webkitAudioContext)({sampleRate:44100})),this.ctx.state==="suspended"&&this.ctx.resume()}playShot(){if(!this.ctx)return;const e=this.ctx.createOscillator(),i=this.ctx.createGain();e.type="square",e.frequency.setValueAtTime(150,this.ctx.currentTime),e.frequency.exponentialRampToValueAtTime(40,this.ctx.currentTime+.1),i.gain.setValueAtTime(.1,this.ctx.currentTime),i.gain.exponentialRampToValueAtTime(.01,this.ctx.currentTime+.1),e.connect(i),i.connect(this.ctx.destination),e.start(),e.stop(this.ctx.currentTime+.1)}playExplosion(){if(!this.ctx)return;const e=this.ctx.sampleRate*.2,i=this.ctx.createBuffer(1,e,this.ctx.sampleRate),s=i.getChannelData(0);for(let h=0;h<e;h++)s[h]=Math.random()*2-1;const l=this.ctx.createBufferSource();l.buffer=i;const a=this.ctx.createBiquadFilter();a.type="lowpass",a.frequency.setValueAtTime(400,this.ctx.currentTime),a.frequency.exponentialRampToValueAtTime(10,this.ctx.currentTime+.2);const c=this.ctx.createGain();c.gain.setValueAtTime(.3,this.ctx.currentTime),c.gain.exponentialRampToValueAtTime(.01,this.ctx.currentTime+.2),l.connect(a),a.connect(c),c.connect(this.ctx.destination),l.start()}playHit(){if(!this.ctx)return;const e=this.ctx.createOscillator(),i=this.ctx.createGain();e.type="sine",e.frequency.setValueAtTime(100,this.ctx.currentTime),i.gain.setValueAtTime(.2,this.ctx.currentTime),i.gain.linearRampToValueAtTime(0,this.ctx.currentTime+.05),e.connect(i),i.connect(this.ctx.destination),e.start(),e.stop(this.ctx.currentTime+.05)}}const dn=new OC,zC=({onGameOver:t,userName:e,mode:i})=>{const s=de.useRef(null),[l,a]=de.useState({level:1,lives:5,score:0}),[c,h]=de.useState(!1),g=de.useRef([]),m=de.useRef([]),v=de.useRef([]),_=de.useRef([]),E=de.useRef({pos:{x:4*Xi+20,y:12*Xi+20},size:28,color:Vn.PLAYER,rotation:-Math.PI/2,health:1,maxHealth:1,speed:ny,lastShot:0}),x=de.useRef({}),N=de.useRef(!1),D=de.useRef(!0),U=de.useRef(0);de.useEffect(()=>{const M=()=>{const ie=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),re="ontouchstart"in window||navigator.maxTouchPoints>0;h(ie||re)};M(),window.addEventListener("resize",M);const J=ie=>{dn.init(),x.current[ie.code]=!0},ae=ie=>{x.current[ie.code]=!1};return window.addEventListener("keydown",J),window.addEventListener("keyup",ae),()=>{window.removeEventListener("resize",M),window.removeEventListener("keydown",J),window.removeEventListener("keyup",ae)}},[]);const G=(M,J,ae,ie=5,re=1)=>{for(let _e=0;_e<ie;_e++)_.current.push({x:M,y:J,vx:(Math.random()-.5)*6,vy:(Math.random()-.5)*6,life:1,color:ae,size:(Math.random()*3+2)*re})},K=M=>{const ie=Array(26).fill(0).map(()=>Array(26).fill(0)),re=12,_e=24;ie[_e][re]=qe.BASE,ie[_e][re+1]=qe.BASE,ie[_e+1][re]=qe.BASE,ie[_e+1][re+1]=qe.BASE,[[23,11],[23,12],[23,13],[23,14],[24,11],[24,14],[25,11],[25,14]].forEach(([w,q])=>ie[w][q]=qe.BRICK);for(let w=2;w<22;w++)for(let q=0;q<26;q++){if(ie[w][q]!==0)continue;const j=Math.random();j<.22?ie[w][q]=qe.BRICK:j<.06?ie[w][q]=qe.STEEL:j<.04?ie[w][q]=qe.WATER:j<.04&&(ie[w][q]=qe.BUSH)}g.current=ie},F=M=>{const J=[20,260,500];v.current=Array.from({length:Math.min(3+M,8)},(ae,ie)=>({pos:{x:J[ie%3],y:20},size:28,color:Vn.ENEMY,rotation:Math.PI/2,health:1,speed:ny*(.55+M*.05),lastShot:0}))},X=(M,J)=>{if(M<0||M>=26||J<0||J>=26)return!0;const ae=g.current[J][M];return ae!==qe.EMPTY&&ae!==qe.BUSH},se=(M,J)=>[{x:M-8.5,y:J-8.5},{x:M+8.5,y:J-8.5},{x:M-8.5,y:J+8.5},{x:M+8.5,y:J+8.5}].some(re=>X(Math.floor(re.x/Yo),Math.floor(re.y/Yo))),te=(M,J)=>{const ae=Date.now();if(ae-M.lastShot<450)return;const ie=M.pos.x+Math.cos(M.rotation)*18,re=M.pos.y+Math.sin(M.rotation)*18,_e=Math.floor(ie/Yo),$=Math.floor(re/Yo);if(_e>=0&&_e<26&&$>=0&&$<26){const w=g.current[$][_e];if(w===qe.BRICK||w===qe.STEEL||w===qe.BASE){w===qe.BRICK?(g.current[$][_e]=qe.EMPTY,G(ie,re,Vn.BRICK,10),dn.playHit()):w===qe.BASE&&(D.current=!1,N.current=!0,dn.playExplosion(),t(!1,l.score,l.level-1)),M.lastShot=ae;return}}m.current.push({pos:{x:ie,y:re},velocity:{x:Math.cos(M.rotation)*iy,y:Math.sin(M.rotation)*iy},owner:J,size:5,damage:1,life:100,rotation:M.rotation,color:"#FFF"}),J==="PLAYER"&&dn.playShot(),M.lastShot=ae};de.useEffect(()=>{var ae;K(l.level),F(l.level);const M=(ae=s.current)==null?void 0:ae.getContext("2d");if(!M)return;const J=()=>{if(N.current)return;let ie=0,re=0;if(x.current.ArrowUp||x.current.KeyW?re=-1:x.current.ArrowDown||x.current.KeyS?re=1:x.current.ArrowLeft||x.current.KeyA?ie=-1:(x.current.ArrowRight||x.current.KeyD)&&(ie=1),ie!==0||re!==0){const $=E.current.speed;ie>0?E.current.rotation=0:ie<0?E.current.rotation=Math.PI:re>0?E.current.rotation=Math.PI/2:re<0&&(E.current.rotation=-Math.PI/2);let w=E.current.pos.x+ie*$,q=E.current.pos.y+re*$;se(w,q)||(E.current.pos.x=w,E.current.pos.y=q)}x.current.Space&&(dn.init(),te(E.current,"PLAYER")),v.current.forEach($=>{Math.random()>.982&&($.rotation=[0,Math.PI/2,Math.PI,-Math.PI/2][Math.floor(Math.random()*4)]);const w=$.pos.x+Math.cos($.rotation)*$.speed,q=$.pos.y+Math.sin($.rotation)*$.speed;se(w,q)?$.rotation+=Math.PI/2:($.pos.x=w,$.pos.y=q),Math.random()>.982&&te($,"ENEMY")});for(let $=m.current.length-1;$>=0;$--){const w=m.current[$];w.pos.x+=w.velocity.x,w.pos.y+=w.velocity.y;const q=Math.floor(w.pos.x/Yo),j=Math.floor(w.pos.y/Yo);if(q>=0&&q<26&&j>=0&&j<26){const ue=g.current[j][q];if(ue===qe.BRICK){g.current[j][q]=qe.EMPTY,G(w.pos.x,w.pos.y,Vn.BRICK,8),dn.playHit(),m.current.splice($,1);continue}else if(ue===qe.STEEL){G(w.pos.x,w.pos.y,"#AAA",4),dn.playHit(),m.current.splice($,1);continue}else if(ue===qe.BASE){G(w.pos.x,w.pos.y,"#F00",40,2.5),dn.playExplosion(),D.current=!1,N.current=!0,t(!1,l.score,l.level-1);return}}w.owner==="PLAYER"?v.current.forEach((ue,ke)=>{Math.sqrt((w.pos.x-ue.pos.x)**2+(w.pos.y-ue.pos.y)**2)<18&&(G(ue.pos.x,ue.pos.y,"#FF0",15,1.5),dn.playExplosion(),v.current.splice(ke,1),m.current.splice($,1),a(R=>({...R,score:R.score+100})),v.current.length===0&&(a(R=>({...R,level:R.level+1})),E.current.pos={x:4*Xi+20,y:12*Xi+20}))}):Math.sqrt((w.pos.x-E.current.pos.x)**2+(w.pos.y-E.current.pos.y)**2)<18&&(m.current.splice($,1),G(E.current.pos.x,E.current.pos.y,"#F00",25,1.8),dn.playExplosion(),a(ue=>ue.lives<=1?(N.current=!0,t(!1,ue.score,ue.level-1),ue):(E.current.pos={x:4*Xi+20,y:12*Xi+20},{...ue,lives:ue.lives-1}))),(w.pos.x<0||w.pos.x>Jo||w.pos.y<0||w.pos.y>Jo)&&m.current.splice($,1)}for(let $=_.current.length-1;$>=0;$--){const w=_.current[$];w.x+=w.vx,w.y+=w.vy,w.life-=.045,w.life<=0&&_.current.splice($,1)}M.fillStyle=Vn.BG,M.fillRect(0,0,Jo,Jo);for(let $=0;$<26;$++)for(let w=0;w<26;w++){const q=g.current[$][w],j=w*20,ue=$*20;q===qe.BRICK?(M.fillStyle=Vn.BRICK,M.fillRect(j+1,ue+1,18,18)):q===qe.STEEL?(M.fillStyle=Vn.STEEL,M.fillRect(j,ue,20,20)):q===qe.WATER?(M.fillStyle=Vn.WATER,M.fillRect(j,ue,20,20)):q===qe.BASE&&(M.fillStyle=D.current?Vn.BASE:"#333",M.beginPath(),M.moveTo(j,ue+20),M.lineTo(j+10,ue),M.lineTo(j+20,ue+20),M.fill())}const _e=$=>{M.save(),M.translate($.pos.x,$.pos.y),M.rotate($.rotation),M.fillStyle=$.color,M.fillRect(-12,-10,24,20),M.beginPath(),M.arc(0,0,9,0,Math.PI*2),M.fill(),M.fillRect(0,-4,22,8),M.restore()};_e(E.current),v.current.forEach(_e),_.current.forEach($=>{M.globalAlpha=$.life,M.fillStyle=$.color,M.fillRect($.x,$.y,$.size,$.size)}),M.globalAlpha=1,m.current.forEach($=>{M.fillStyle="#FFF",M.beginPath(),M.arc($.pos.x,$.pos.y,4,0,Math.PI*2),M.fill()}),U.current=requestAnimationFrame(J)};return U.current=requestAnimationFrame(J),()=>cancelAnimationFrame(U.current)},[l.level]);const Y=(M,J)=>{x.current[M]=J},ne=M=>{dn.init(),x.current[M]=!0};return C.jsxs("div",{className:"fixed inset-0 flex flex-col bg-[#050505] text-white touch-none overflow-hidden select-none h-[100dvh]",children:[C.jsxs("header",{className:"flex justify-between items-center px-4 sm:px-12 bg-zinc-900 border-b-2 border-zinc-800 shrink-0 h-[8dvh] sm:h-[10dvh] shadow-2xl relative z-20",children:[C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-[7px] sm:text-[10px] text-emerald-500/50 font-black uppercase tracking-widest leading-none mb-1",children:"Setor"}),C.jsxs("span",{className:"text-white font-orbitron font-black text-lg sm:text-2xl leading-none",children:["ALPHA-0",l.level]})]}),C.jsx("div",{className:"flex gap-2 sm:gap-4 bg-black/40 px-3 py-1.5 sm:px-6 sm:py-3 rounded-xl border border-zinc-800",children:[...Array(5)].map((M,J)=>C.jsx("i",{className:`fas fa-shield-alt text-sm sm:text-2xl transition-all ${J<l.lives?"text-emerald-500":"text-zinc-800 opacity-20"}`},J))}),C.jsxs("div",{className:"flex flex-col text-right",children:[C.jsx("span",{className:"text-[7px] sm:text-[10px] text-amber-500/50 font-black uppercase tracking-widest leading-none mb-1",children:"Score"}),C.jsx("span",{className:"text-white font-orbitron font-black text-lg sm:text-2xl leading-none",children:l.score.toLocaleString()})]})]}),C.jsx("main",{className:"flex-1 flex items-center justify-center p-2 sm:p-4 overflow-hidden bg-black/50 relative",children:C.jsxs("div",{className:"relative border-2 sm:border-[8px] border-zinc-800 shadow-2xl rounded-xl sm:rounded-3xl aspect-square h-full max-h-full max-w-full overflow-hidden bg-zinc-950 mx-auto group",children:[C.jsx("canvas",{ref:s,width:Jo,height:Jo,className:"w-full h-full block object-contain"}),C.jsx("div",{className:"scanline"})]})}),C.jsx("footer",{className:"h-[30dvh] bg-zinc-950 flex justify-around items-center px-4 sm:px-12 shrink-0 border-t-2 border-zinc-900 shadow-2xl z-20",children:c?C.jsxs("div",{className:"w-full max-w-5xl flex items-center justify-between px-2 sm:px-10 gap-4 h-full",children:[C.jsxs("div",{className:"relative w-44 h-44 sm:w-64 sm:h-64 flex items-center justify-center scale-90 sm:scale-110 shrink-0",children:[C.jsx("div",{className:"absolute inset-0 bg-zinc-900/50 rounded-full border-[4px] border-zinc-800"}),C.jsx("button",{onPointerDown:()=>ne("ArrowUp"),onPointerUp:()=>Y("ArrowUp",!1),onPointerLeave:()=>Y("ArrowUp",!1),className:"absolute top-0 w-14 h-18 sm:w-20 sm:h-24 bg-zinc-800 rounded-xl flex items-center justify-center border-b-[4px] border-black active:translate-y-1 active:bg-emerald-600",children:C.jsx("i",{className:"fas fa-caret-up text-3xl sm:text-5xl text-zinc-500"})}),C.jsx("button",{onPointerDown:()=>ne("ArrowDown"),onPointerUp:()=>Y("ArrowDown",!1),onPointerLeave:()=>Y("ArrowDown",!1),className:"absolute bottom-0 w-14 h-18 sm:w-20 sm:h-24 bg-zinc-800 rounded-xl flex items-center justify-center border-t-[4px] border-black active:-translate-y-1 active:bg-emerald-600",children:C.jsx("i",{className:"fas fa-caret-down text-3xl sm:text-5xl text-zinc-500"})}),C.jsx("button",{onPointerDown:()=>ne("ArrowLeft"),onPointerUp:()=>Y("ArrowLeft",!1),onPointerLeave:()=>Y("ArrowLeft",!1),className:"absolute left-0 h-14 w-18 sm:h-20 sm:w-24 bg-zinc-800 rounded-xl flex items-center justify-center border-r-[4px] border-black active:translate-x-1 active:bg-emerald-600",children:C.jsx("i",{className:"fas fa-caret-left text-3xl sm:text-5xl text-zinc-500"})}),C.jsx("button",{onPointerDown:()=>ne("ArrowRight"),onPointerUp:()=>Y("ArrowRight",!1),onPointerLeave:()=>Y("ArrowRight",!1),className:"absolute right-0 h-14 w-18 sm:h-20 sm:w-24 bg-zinc-800 rounded-xl flex items-center justify-center border-l-[4px] border-black active:-translate-x-1 active:bg-emerald-600",children:C.jsx("i",{className:"fas fa-caret-right text-3xl sm:text-5xl text-zinc-500"})})]}),C.jsxs("button",{onPointerDown:()=>ne("Space"),onPointerUp:()=>Y("Space",!1),onPointerLeave:()=>Y("Space",!1),className:"w-24 h-24 sm:w-48 sm:h-48 bg-gradient-to-b from-red-600 to-red-800 rounded-full border-b-[8px] sm:border-b-[12px] border-red-950 active:border-b-0 active:translate-y-2 transition-all shadow-2xl flex flex-col items-center justify-center group active:scale-90",children:[C.jsx("i",{className:"fas fa-crosshairs text-4xl sm:text-7xl text-white"}),C.jsx("span",{className:"text-white font-black font-orbitron text-[8px] sm:text-sm italic uppercase tracking-widest mt-1",children:"FOGO"})]})]}):C.jsxs("div",{className:"w-full h-full flex items-center justify-center gap-20 lg:gap-40",children:[C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsx("span",{className:"text-[10px] text-zinc-600 font-black uppercase tracking-[0.4em] mb-4",children:"Trao Blindada"}),C.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[C.jsx("div",{className:"col-start-2 w-14 h-14 bg-zinc-900 border-2 border-zinc-800 rounded-xl flex items-center justify-center",children:C.jsx("span",{className:"text-emerald-500 font-orbitron font-black text-xl",children:"W"})}),C.jsx("div",{className:"col-start-1 row-start-2 w-14 h-14 bg-zinc-900 border-2 border-zinc-800 rounded-xl flex items-center justify-center",children:C.jsx("span",{className:"text-emerald-500 font-orbitron font-black text-xl",children:"A"})}),C.jsx("div",{className:"col-start-2 row-start-2 w-14 h-14 bg-zinc-900 border-2 border-zinc-800 rounded-xl flex items-center justify-center",children:C.jsx("span",{className:"text-emerald-500 font-orbitron font-black text-xl",children:"S"})}),C.jsx("div",{className:"col-start-3 row-start-2 w-14 h-14 bg-zinc-900 border-2 border-zinc-800 rounded-xl flex items-center justify-center",children:C.jsx("span",{className:"text-emerald-500 font-orbitron font-black text-xl",children:"D"})})]})]}),C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsx("span",{className:"text-[10px] text-zinc-600 font-black uppercase tracking-[0.4em] mb-4",children:"Artilharia"}),C.jsx("div",{className:"w-64 h-20 bg-zinc-900 border-2 border-red-900/40 rounded-3xl flex items-center justify-center shadow-xl",children:C.jsx("span",{className:"text-white font-orbitron font-black text-sm tracking-widest italic uppercase",children:"Espao [FOGO_CANHO]"})})]})]})})]})},GC=({onPlay:t,onShowRanking:e,onShowCredits:i,onShowProfile:s,onShowFeedback:l,highScore:a,top3:c,user:h,onLogout:g})=>{const m=(h==null?void 0:h.level)||1,v=qa(m),_=(h==null?void 0:h.xp)||0,E=Al(m),x=_/E*100;return C.jsxs("div",{className:"z-20 w-full h-[100dvh] p-4 sm:p-6 bg-zinc-950/95 backdrop-blur-3xl flex flex-col items-center animate-in fade-in zoom-in duration-700 relative overflow-hidden",children:[C.jsx("div",{className:"absolute -top-20 -right-20 w-[400px] h-[400px] bg-emerald-500/10 rounded-full blur-[120px] pointer-events-none"}),C.jsx("div",{className:"absolute -bottom-20 -left-20 w-[400px] h-[400px] bg-emerald-500/5 rounded-full blur-[120px] pointer-events-none"}),C.jsxs("div",{className:"w-full max-w-5xl shrink-0 mb-4 flex justify-between items-center bg-zinc-900/50 p-3 sm:p-4 rounded-2xl border border-zinc-900 shadow-inner group",children:[C.jsxs("div",{className:"flex items-center gap-3 sm:gap-5 cursor-pointer",onClick:s,children:[C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:`absolute -inset-1 bg-gradient-to-br ${v.badgeBg} opacity-20 rounded-xl blur-sm`}),C.jsx("img",{src:(h==null?void 0:h.avatar)||`https://api.dicebear.com/7.x/bottts/svg?seed=${h==null?void 0:h.username}`,className:`w-10 h-10 sm:w-14 sm:h-14 rounded-xl bg-zinc-900 border-2 ${v.borderColor.replace("border-","border-opacity-30 border-")} group-hover:border-opacity-100 transition-all shadow-2xl relative z-10`}),C.jsx("div",{className:`absolute -bottom-1 -right-1 w-5 h-5 sm:w-6 sm:h-6 bg-gradient-to-br ${v.badgeBg} text-white rounded-lg flex items-center justify-center text-[8px] sm:text-[10px] shadow-lg z-20 border border-white/20`,children:C.jsx("i",{className:`fas ${v.icon}`})})]}),C.jsxs("div",{className:"flex flex-col",children:[C.jsx("div",{className:`text-[6px] sm:text-[8px] font-black uppercase tracking-[0.3em] ${v.color} leading-none mb-1`,children:v.title}),C.jsx("div",{className:"text-sm sm:text-lg font-orbitron font-black text-white leading-none tracking-tight group-hover:text-emerald-400 transition-colors uppercase italic",children:h==null?void 0:h.username})]})]}),C.jsx("button",{onClick:g,className:"w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center rounded-xl bg-zinc-900 hover:bg-red-950/20 hover:text-red-500 text-zinc-700 transition-all border border-zinc-800 active:scale-90",children:C.jsx("i",{className:"fas fa-power-off text-sm sm:text-base"})})]}),C.jsxs("div",{className:"text-center mb-4 flex-1 shrink min-h-0 flex flex-col justify-center overflow-hidden",children:[C.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-zinc-900/80 border border-zinc-800 rounded-full mb-2 sm:mb-4 self-center scale-90 sm:scale-100",children:[C.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),C.jsx("span",{className:"text-emerald-500 text-[8px] sm:text-[10px] font-black tracking-[0.4em] uppercase",children:"SISTEMA_ATIVO"})]}),C.jsxs("h1",{className:"text-4xl sm:text-7xl lg:text-9xl font-orbitron font-black text-white tracking-tighter italic leading-none uppercase shrink",children:["TANK",C.jsx("span",{className:"text-emerald-500",children:"STRIKE"})]}),C.jsx("p",{className:"text-zinc-600 text-[8px] sm:text-[12px] font-mono tracking-[0.6em] uppercase mt-2 font-bold opacity-60",children:"Operao Nmesis Blindada"})]}),C.jsxs("div",{className:"w-full max-w-2xl flex flex-col gap-3 sm:gap-4 mb-6 shrink-0",children:[C.jsxs("button",{onClick:()=>t("OFFLINE"),className:"group relative w-full h-16 sm:h-24 bg-emerald-600 hover:bg-emerald-500 rounded-2xl transition-all shadow-[0_10px_30px_rgba(16,185,129,0.2)] border-b-[6px] border-emerald-800 active:border-b-0 active:translate-y-1 flex items-center justify-center overflow-hidden",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent opacity-60"}),C.jsx("div",{className:"flex flex-col items-center z-10",children:C.jsx("span",{className:"text-white font-orbitron font-black text-xl sm:text-3xl tracking-[0.2em] italic uppercase group-hover:scale-105 transition-transform",children:"Engajar Batalha"})})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4 w-full",children:[C.jsxs("button",{onClick:e,className:"flex items-center justify-center gap-3 py-4 sm:py-5 bg-zinc-900/40 border border-zinc-900 rounded-2xl hover:bg-zinc-900 transition-all group active:scale-95 shadow-xl",children:[C.jsx("i",{className:"fas fa-trophy text-amber-500 text-base sm:text-xl"}),C.jsx("span",{className:"text-[10px] sm:text-xs font-orbitron font-black text-zinc-500 uppercase tracking-widest group-hover:text-white",children:"Elite"})]}),C.jsxs("button",{onClick:s,className:"flex items-center justify-center gap-3 py-4 sm:py-5 bg-zinc-900/40 border border-zinc-900 rounded-2xl hover:bg-zinc-900 transition-all group active:scale-95 shadow-xl",children:[C.jsx("i",{className:"fas fa-id-badge text-emerald-400 text-base sm:text-xl"}),C.jsx("span",{className:"text-[10px] sm:text-xs font-orbitron font-black text-zinc-500 uppercase tracking-widest group-hover:text-white",children:"Dossi"})]})]})]}),C.jsxs("div",{className:"w-full max-w-2xl pt-4 border-t border-zinc-900 mt-auto shrink-0 pb-2 sm:pb-4",children:[C.jsxs("div",{className:"flex justify-between items-end mb-2",children:[C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-[7px] sm:text-[9px] text-zinc-600 font-black uppercase tracking-widest leading-none mb-1",children:"Status de Carreira"}),C.jsxs("span",{className:"text-[10px] sm:text-lg text-white font-orbitron font-bold leading-none uppercase tracking-tighter",children:["Nvel ",m,"  ",v.title]})]}),C.jsxs("span",{className:"text-[10px] sm:text-lg text-emerald-500 font-black font-mono leading-none",children:[Math.floor(x),"%"]})]}),C.jsx("div",{className:"w-full h-1.5 sm:h-2 bg-black rounded-full overflow-hidden border border-zinc-900 p-[1px]",children:C.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-1000 rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]",style:{width:`${x}%`}})}),C.jsxs("div",{className:"mt-4 flex justify-between opacity-30 gap-2",children:[C.jsx("button",{onClick:l,className:"text-[8px] sm:text-[10px] font-black text-zinc-600 hover:text-amber-500 uppercase tracking-[0.2em]",children:"Protocolo_Erro"}),C.jsx("button",{onClick:i,className:"text-[8px] sm:text-[10px] font-black text-zinc-600 hover:text-blue-500 uppercase tracking-[0.2em]",children:"Crditos_Dev"}),C.jsx("button",{onClick:g,className:"text-[8px] sm:text-[10px] font-black text-zinc-600 hover:text-red-500 uppercase tracking-[0.2em]",children:"Sair_Sesso"})]})]})]})},HC=({score:t,report:e,isLoadingReport:i,onSave:s,onRestart:l,defaultName:a,xpGained:c,vpGained:h,currentLevel:g,currentXp:m,levelsCleared:v})=>{const _=Al(g),E=m/_*100,x=qa(g);return C.jsxs("div",{className:"z-20 w-[94%] max-w-md max-h-[92dvh] p-6 sm:p-10 rounded-[2rem] sm:rounded-[2.5rem] bg-zinc-900 border border-red-500/20 shadow-[0_0_100px_rgba(239,68,68,0.1)] flex flex-col items-center animate-in fade-in zoom-in duration-500 overflow-hidden",children:[C.jsxs("div",{className:"flex flex-col items-center shrink-0 mb-4 sm:mb-6",children:[C.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-red-500/10 rounded-full flex items-center justify-center border-2 border-red-500/20 mb-4 shadow-xl",children:C.jsx("i",{className:"fas fa-radiation text-3xl sm:text-4xl text-red-500 animate-pulse"})}),C.jsx("h2",{className:"text-2xl sm:text-4xl font-orbitron font-black text-red-500 mb-1 tracking-tighter uppercase italic text-center",children:"MISSO FALHOU"}),C.jsx("p",{className:"text-zinc-500 font-black uppercase text-[8px] sm:text-[10px] tracking-[0.4em] opacity-60",children:"Status: Blindagem Comprometida"})]}),C.jsxs("div",{className:"w-full flex-1 overflow-y-auto pr-1 custom-scrollbar space-y-4 sm:space-y-6 mb-6",children:[C.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[C.jsxs("div",{className:"bg-black/40 p-4 sm:p-5 rounded-2xl sm:rounded-3xl border border-zinc-800 text-center shadow-inner",children:[C.jsx("span",{className:"text-[7px] sm:text-[9px] text-zinc-600 font-black uppercase tracking-widest block mb-1 leading-none",children:"Setores"}),C.jsx("span",{className:"text-xl sm:text-3xl font-orbitron font-black text-white",children:v})]}),C.jsxs("div",{className:"bg-black/40 p-4 sm:p-5 rounded-2xl sm:rounded-3xl border border-zinc-800 text-center shadow-inner",children:[C.jsx("span",{className:"text-[7px] sm:text-[9px] text-zinc-600 font-black uppercase tracking-widest block mb-1 leading-none",children:"XP Coletado"}),C.jsxs("span",{className:"text-xl sm:text-3xl font-orbitron font-black text-emerald-500",children:["+",c]})]})]}),C.jsxs("div",{className:"bg-zinc-800/40 p-5 sm:p-6 rounded-2xl sm:rounded-3xl border border-zinc-800 shadow-lg",children:[C.jsxs("div",{className:"flex justify-between items-end mb-3",children:[C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:`text-[8px] sm:text-[10px] font-black uppercase ${x.color} mb-1 leading-none`,children:x.title}),C.jsxs("span",{className:"text-emerald-500 text-[10px] sm:text-xs font-black font-orbitron leading-none uppercase",children:["NVEL ",g]})]}),C.jsxs("span",{className:"text-zinc-500 text-[8px] sm:text-[10px] font-mono font-bold leading-none",children:[Math.floor(E),"%"]})]}),C.jsx("div",{className:"w-full h-1.5 sm:h-2 bg-black rounded-full overflow-hidden border border-zinc-800",children:C.jsx("div",{className:"h-full bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.6)] transition-all duration-1000",style:{width:`${E}%`}})})]}),C.jsxs("div",{className:"bg-emerald-500/5 p-4 sm:p-5 rounded-2xl sm:rounded-3xl border border-emerald-500/10 relative overflow-hidden shadow-inner",children:[C.jsxs("p",{className:"text-emerald-500 text-[8px] sm:text-[10px] font-black uppercase mb-2 tracking-widest flex items-center gap-2",children:[C.jsx("i",{className:"fas fa-satellite animate-pulse"})," Relatrio de Campo"]}),C.jsx("div",{className:"text-zinc-300 text-xs sm:text-sm leading-relaxed font-mono italic opacity-90",children:i?"Interceptando transmisses inimigas...":`"${e}"`})]})]}),C.jsxs("div",{className:"w-full flex flex-col gap-3 shrink-0",children:[C.jsx("button",{onClick:l,className:"group relative w-full py-4 sm:py-5 bg-emerald-600 hover:bg-emerald-500 text-white font-orbitron font-black rounded-xl sm:rounded-2xl shadow-[0_15px_30px_rgba(16,185,129,0.2)] transition-all active:scale-95 border-b-[4px] sm:border-b-[6px] border-emerald-800 active:border-b-0 uppercase text-xs sm:text-sm tracking-[0.2em]",children:"TENTAR NOVAMENTE"}),C.jsx("button",{onClick:()=>s(a),className:"w-full py-3 sm:py-4 bg-zinc-800/50 hover:bg-zinc-800 text-zinc-500 hover:text-white font-black rounded-xl sm:rounded-2xl border border-zinc-800 transition-all uppercase text-[9px] sm:text-[11px] tracking-[0.3em] active:scale-95",children:"DESISTIR E SAIR"})]})]})},BC=({leaderboard:t,onBack:e,onViewProfile:i})=>{const[s,l]=de.useState("LEVEL"),a=[...t].sort((c,h)=>s==="LEVEL"&&(h.level||0)-(c.level||0)||h.score-c.score);return C.jsxs("div",{className:"z-20 w-[94%] max-w-xl h-[90dvh] flex flex-col p-4 sm:p-8 rounded-3xl bg-zinc-950 border border-amber-500/10 shadow-[0_0_100px_rgba(0,0,0,1)] animate-in fade-in slide-in-from-bottom-4 duration-500 relative overflow-hidden",children:[C.jsxs("div",{className:"flex justify-between items-start mb-6 shrink-0 relative z-10",children:[C.jsxs("div",{children:[C.jsxs("h2",{className:"text-xl sm:text-2xl font-orbitron font-black text-amber-500 flex items-center gap-3 italic",children:[C.jsx("i",{className:"fas fa-trophy text-amber-500 drop-shadow-[0_0_10px_rgba(245,158,11,0.5)]"})," ELITE COMMAND"]}),C.jsx("p",{className:"text-[8px] sm:text-[9px] text-zinc-500 uppercase font-black tracking-[0.3em] mt-1",children:"Quadro de Honra Global"})]}),C.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center bg-zinc-900 rounded-xl text-zinc-500 hover:text-white border border-zinc-800 transition-all",children:C.jsx("i",{className:"fas fa-times"})})]}),C.jsxs("div",{className:"flex bg-black/40 p-1 rounded-2xl mb-6 shrink-0 border border-zinc-800/50 relative z-10",children:[C.jsx("button",{onClick:()=>l("LEVEL"),className:`flex-1 py-3 rounded-xl text-[9px] sm:text-[10px] font-black uppercase tracking-widest transition-all ${s==="LEVEL"?"bg-amber-600 text-white shadow-lg":"text-zinc-600 hover:text-zinc-400"}`,children:"Ranking Nvel"}),C.jsx("button",{onClick:()=>l("SCORE"),className:`flex-1 py-3 rounded-xl text-[9px] sm:text-[10px] font-black uppercase tracking-widest transition-all ${s==="SCORE"?"bg-amber-600 text-white shadow-lg":"text-zinc-600 hover:text-zinc-400"}`,children:"Ranking Score"})]}),C.jsx("div",{className:"flex-1 overflow-y-auto pr-1 custom-scrollbar space-y-3 mb-6 relative z-10",children:a.length===0?C.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-800 font-black uppercase text-[10px] opacity-20",children:[C.jsx("i",{className:"fas fa-database text-4xl mb-4"})," Sem registros oficiais"]}):a.map((c,h)=>{const g=h<3,m=qa(c.level||1),v=["text-amber-400","text-zinc-300","text-amber-700"];return C.jsxs("div",{onClick:()=>i(c.name),className:`flex items-center justify-between p-3 sm:p-5 rounded-[1.5rem] border cursor-pointer active:scale-[0.98] transition-all hover:bg-zinc-900/50 ${g?"bg-amber-500/5 border-amber-500/20":"bg-zinc-900/20 border-zinc-800/40"}`,children:[C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("div",{className:"w-8 flex justify-center",children:g?C.jsx("i",{className:`fas fa-crown text-xl ${v[h]}`}):C.jsxs("span",{className:"font-black font-orbitron text-zinc-700 text-sm",children:["#",h+1]})}),C.jsxs("div",{className:"relative shrink-0",children:[C.jsx("div",{className:`absolute -inset-1 bg-gradient-to-br ${m.badgeBg} opacity-20 rounded-xl blur-sm`}),C.jsx("img",{src:c.avatar||`https://api.dicebear.com/7.x/bottts/svg?seed=${c.name}`,className:"w-10 h-10 sm:w-14 sm:h-14 rounded-xl sm:rounded-2xl bg-zinc-900 border border-zinc-800 relative z-10"}),C.jsxs("div",{className:"absolute -bottom-1 -right-1 bg-zinc-900 text-white text-[8px] px-2 py-0.5 border border-zinc-700 rounded-full font-black z-20",children:["LV.",c.level||1]})]}),C.jsxs("div",{className:"flex flex-col min-w-0",children:[C.jsx("span",{className:"text-white font-black text-xs sm:text-sm uppercase truncate max-w-[100px] sm:max-w-[180px]",children:c.name}),C.jsxs("span",{className:`text-[8px] sm:text-[10px] font-mono font-bold uppercase truncate flex items-center gap-2 ${m.color}`,children:[C.jsx("i",{className:`fas ${m.icon} text-[10px]`})," ",m.title]})]})]}),C.jsxs("div",{className:"flex flex-col items-end",children:[C.jsx("span",{className:"text-amber-500 font-orbitron font-black text-xs sm:text-sm leading-none",children:s==="LEVEL"?`SETOR ${c.maxLevelReached||0}`:c.score.toLocaleString()}),C.jsx("span",{className:"text-[7px] text-zinc-700 font-black uppercase tracking-tighter mt-1",children:s==="LEVEL"?"CONQUISTAS":"PONTUAO"})]})]},c.id)})}),C.jsx("button",{onClick:e,className:"w-full py-5 bg-zinc-900 hover:bg-zinc-800 text-white font-orbitron font-black rounded-3xl transition-all uppercase text-[11px] tracking-[0.4em] border border-zinc-800 shrink-0 shadow-2xl active:scale-95 z-10",children:"Retornar ao QG"})]})},VC=({onBack:t})=>C.jsxs("div",{className:"z-20 w-[92%] max-w-md p-8 rounded-[2.5rem] bg-zinc-900/95 backdrop-blur-3xl border border-blue-500/30 shadow-[0_0_80px_rgba(59,130,246,0.15)] flex flex-col items-center animate-in fade-in zoom-in duration-500 text-center",children:[C.jsxs("div",{className:"w-24 h-24 rounded-3xl bg-black border-2 border-blue-500/30 flex items-center justify-center mb-6 shadow-2xl relative overflow-hidden group",children:[C.jsx("div",{className:"absolute inset-0 bg-blue-500/5 group-hover:bg-blue-500/10 transition-all"}),C.jsx("i",{className:"fas fa-code text-4xl text-blue-500 group-hover:scale-110 transition-transform"})]}),C.jsxs("h2",{className:"text-2xl font-orbitron font-black text-white mb-1 uppercase tracking-tighter",children:["ARQUITETO DO ",C.jsx("span",{className:"text-blue-500",children:"SISTEMA"})]}),C.jsx("p",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-[0.4em] mb-8 opacity-60",children:"Dossi de Desenvolvimento"}),C.jsxs("div",{className:"w-full space-y-6 text-zinc-400 font-mono text-xs mb-10",children:[C.jsxs("div",{className:"bg-black/40 p-5 rounded-2xl border border-zinc-800 text-left relative overflow-hidden",children:[C.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-blue-500/5 rounded-full -mr-8 -mt-8"}),C.jsx("p",{className:"text-blue-500 text-[9px] uppercase font-black mb-2 tracking-widest",children:"Dev Responsvel"}),C.jsx("p",{className:"text-white font-bold text-base mb-1",children:"TankStrike Developer"}),C.jsx("p",{className:"text-zinc-500 text-[11px]",children:"Especialista em Game Design & UI/UX"})]}),C.jsxs("div",{className:"bg-black/40 p-5 rounded-2xl border border-zinc-800 flex items-center justify-between group cursor-pointer hover:border-pink-500/40 transition-all hover:bg-pink-500/5 shadow-xl",onClick:()=>window.open("https://instagram.com/seu_perfil","_blank"),children:[C.jsxs("div",{className:"flex items-center gap-4 text-left",children:[C.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-tr from-[#f9ce34] via-[#ee2a7b] to-[#6228d7] flex items-center justify-center text-white text-2xl shadow-[0_5px_15px_rgba(238,42,123,0.3)]",children:C.jsx("i",{className:"fab fa-instagram"})}),C.jsxs("div",{children:[C.jsx("p",{className:"text-white font-bold text-sm leading-none mb-1 group-hover:text-pink-400 transition-colors",children:"Siga no Instagram"}),C.jsx("p",{className:"text-zinc-600 text-[10px]",children:"Updates e novas operaes"})]})]}),C.jsx("i",{className:"fas fa-external-link-alt text-zinc-700 text-xs group-hover:text-white group-hover:translate-x-1 transition-all"})]}),C.jsx("div",{className:"bg-black/20 p-4 rounded-xl border border-zinc-800/50 text-left italic",children:C.jsx("p",{className:"text-zinc-600 text-[9px] leading-relaxed",children:'"Construdo com tecnologia de ponta para oferecer a melhor experincia de combate blindado em dispositivos mveis."'})})]}),C.jsxs("button",{onClick:t,className:"group w-full py-5 bg-zinc-800 hover:bg-zinc-700 text-white font-orbitron font-black rounded-2xl transition-all uppercase text-[10px] tracking-[0.3em] border border-zinc-700 shadow-xl active:scale-95",children:[C.jsx("i",{className:"fas fa-chevron-left mr-2 group-hover:-translate-x-1 transition-transform"})," Retornar ao QG"]})]}),qC=({onComplete:t,isOnline:e})=>{const[i,s]=de.useState(0),[l,a]=de.useState("PREPARANDO..."),c=["CALIBRANDO","MAPA OK","FOGO!"];return de.useEffect(()=>{let h=0;const g=setInterval(()=>{s(m=>{const v=m+1.5,_=100/c.length;return v>=(h+1)*_&&(h=Math.min(h+1,c.length-1),a(c[h])),v>=100?(clearInterval(g),setTimeout(t,300),100):v})},20);return()=>clearInterval(g)},[t]),C.jsxs("div",{className:"z-50 fixed inset-0 bg-black flex flex-col items-center justify-center p-8 overflow-hidden",children:[C.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[350px] h-[350px] bg-emerald-500/5 rounded-full blur-[100px] animate-pulse"}),C.jsxs("div",{className:"w-full max-w-[240px] flex flex-col items-center",children:[C.jsxs("div",{className:"mb-10 text-center",children:[C.jsx("h2",{className:"text-white/90 font-orbitron font-black text-xl tracking-[0.4em] italic mb-1",children:"LOADING"}),C.jsx("div",{className:"flex justify-center gap-1.5 opacity-50",children:[...Array(3)].map((h,g)=>C.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500 animate-bounce",style:{animationDelay:`${g*.15}s`}},g))})]}),C.jsx("div",{className:"w-full h-[1px] bg-zinc-900 relative mb-4",children:C.jsx("div",{className:"h-full absolute left-0 top-0 bg-emerald-500 shadow-[0_0_12px_rgba(16,185,129,0.9)] transition-all duration-100 ease-out",style:{width:`${i}%`}})}),C.jsxs("div",{className:"w-full flex justify-between items-center opacity-40",children:[C.jsx("span",{className:"text-[7px] font-mono text-zinc-400 uppercase tracking-[0.6em]",children:l}),C.jsxs("span",{className:"text-[9px] font-orbitron font-bold text-white",children:[Math.floor(i),"%"]})]})]}),C.jsx("div",{className:"fixed bottom-12 opacity-10",children:C.jsx("span",{className:"text-[6px] text-white font-black tracking-[1.5em] uppercase",children:"Setor de Combate Alpha-01"})})]})},FC=()=>{};var oy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q=function(t,e){if(!t)throw ls(e)},ls=function(t){return new Error("Firebase Database ("+Dv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=function(t){const e=[];let i=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):(l&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(t.charCodeAt(++s)&1023),e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},YC=function(t){const e=[];let i=0,s=0;for(;i<t.length;){const l=t[i++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const a=t[i++];e[s++]=String.fromCharCode((l&31)<<6|a&63)}else if(l>239&&l<365){const a=t[i++],c=t[i++],h=t[i++],g=((l&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const a=t[i++],c=t[i++];e[s++]=String.fromCharCode((l&15)<<12|(a&63)<<6|c&63)}}return e.join("")},rd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<t.length;l+=3){const a=t[l],c=l+1<t.length,h=c?t[l+1]:0,g=l+2<t.length,m=g?t[l+2]:0,v=a>>2,_=(a&3)<<4|h>>4;let E=(h&15)<<2|m>>6,x=m&63;g||(x=64,c||(E=64)),s.push(i[v],i[_],i[E],i[x])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Uv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<t.length;){const a=i[t.charAt(l++)],h=l<t.length?i[t.charAt(l)]:0;++l;const m=l<t.length?i[t.charAt(l)]:64;++l;const _=l<t.length?i[t.charAt(l)]:64;if(++l,a==null||h==null||m==null||_==null)throw new JC;const E=a<<2|h>>4;if(s.push(E),m!==64){const x=h<<4&240|m>>2;if(s.push(x),_!==64){const N=m<<6&192|_;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lv=function(t){const e=Uv(t);return rd.encodeByteArray(e,!0)},ua=function(t){return Lv(t).replace(/\./g,"")},Rf=function(t){try{return rd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t){return kv(void 0,t)}function kv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const i=e;return new Date(i.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const i in e)!e.hasOwnProperty(i)||!XC(i)||(t[i]=kv(t[i],e[i]));return t}function XC(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=()=>QC().__FIREBASE_DEFAULTS__,WC=()=>{if(typeof process>"u"||typeof oy>"u")return;const t=oy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Rf(t[1]);return e&&JSON.parse(e)},Pv=()=>{try{return FC()||$C()||WC()||ZC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jC=t=>{var e,i;return(i=(e=Pv())==null?void 0:e.emulatorHosts)==null?void 0:i[t]},ex=t=>{const e=jC(t);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),s]:[e.substring(0,i),s]},Ov=()=>{var t;return(t=Pv())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=e||"demo-project",l=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ua(JSON.stringify(i)),ua(JSON.stringify(c)),""].join(".")}const ml={};function ix(){const t={prod:[],emulator:[]};for(const e of Object.keys(ml))ml[e]?t.emulator.push(e):t.prod.push(e);return t}function ox(t){let e=document.getElementById(t),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),i=!0),{created:i,element:e}}let sy=!1;function sx(t,e){if(typeof window>"u"||typeof document>"u"||!ad(window.location.host)||ml[t]===e||ml[t]||sy)return;ml[t]=e;function i(E){return`__firebase__banner__${E}`}const s="__firebase__banner",a=ix().prod.length>0;function c(){const E=document.getElementById(s);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,x){E.setAttribute("width","24"),E.setAttribute("id",x),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{sy=!0,c()},E}function v(E,x){E.setAttribute("id",x),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function _(){const E=ox(s),x=i("text"),N=document.getElementById(x)||document.createElement("span"),D=i("learnmore"),U=document.getElementById(D)||document.createElement("a"),G=i("preprendIcon"),K=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const F=E.element;h(F),v(U,D);const X=m();g(K,G),F.append(K,N,U,X),document.body.appendChild(F)}a?(N.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lx())}function rx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ax(){return Dv.NODE_ADMIN===!0}function ux(){try{return typeof indexedDB=="object"}catch{return!1}}function cx(){return new Promise((t,e)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(s),t(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{var a;e(((a=l.error)==null?void 0:a.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="FirebaseError";class bl extends Error{constructor(e,i,s){super(i),this.code=e,this.customData=s,this.name=fx,Object.setPrototypeOf(this,bl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gv.prototype.create)}}class Gv{constructor(e,i,s){this.service=e,this.serviceName=i,this.errors=s}create(e,...i){const s=i[0]||{},l=`${this.service}/${e}`,a=this.errors[e],c=a?dx(a,s):"Error",h=`${this.serviceName}: ${c} (${l}).`;return new bl(l,h,s)}}function dx(t,e){return t.replace(hx,(i,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const hx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){return JSON.parse(t)}function _t(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=function(t){let e={},i={},s={},l="";try{const a=t.split(".");e=El(Rf(a[0])||""),i=El(Rf(a[1])||""),l=a[2],s=i.d||{},delete i.d}catch{}return{header:e,claims:i,data:s,signature:l}},px=function(t){const e=Hv(t),i=e.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},mx=function(t){const e=Hv(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function is(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ly(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ca(t,e,i){const s={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(s[l]=e.call(i,t[l],l,t));return s}function fa(t,e){if(t===e)return!0;const i=Object.keys(t),s=Object.keys(e);for(const l of i){if(!s.includes(l))return!1;const a=t[l],c=e[l];if(ry(a)&&ry(c)){if(!fa(a,c))return!1}else if(a!==c)return!1}for(const l of s)if(!i.includes(l))return!1;return!0}function ry(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(t){const e=[];for(const[i,s]of Object.entries(t))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,i){i||(i=0);const s=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)s[_]=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),i+=4;else for(let _=0;_<16;_++)s[_]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i+=4;for(let _=16;_<80;_++){const E=s[_-3]^s[_-8]^s[_-14]^s[_-16];s[_]=(E<<1|E>>>31)&4294967295}let l=this.chain_[0],a=this.chain_[1],c=this.chain_[2],h=this.chain_[3],g=this.chain_[4],m,v;for(let _=0;_<80;_++){_<40?_<20?(m=h^a&(c^h),v=1518500249):(m=a^c^h,v=1859775393):_<60?(m=a&c|h&(a|c),v=2400959708):(m=a^c^h,v=3395469782);const E=(l<<5|l>>>27)+m+g+v+s[_]&4294967295;g=h,h=c,c=(a<<30|a>>>2)&4294967295,a=l,l=E}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(e,i){if(e==null)return;i===void 0&&(i=e.length);const s=i-this.blockSize;let l=0;const a=this.buf_;let c=this.inbuf_;for(;l<i;){if(c===0)for(;l<=s;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<i;)if(a[c]=e.charCodeAt(l),++c,++l,c===this.blockSize){this.compress_(a),c=0;break}}else for(;l<i;)if(a[c]=e[l],++c,++l,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=i}digest(){const e=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=i&255,i/=256;this.compress_(this.buf_);let s=0;for(let l=0;l<5;l++)for(let a=24;a>=0;a-=8)e[s]=this.chain_[l]>>a&255,++s;return e}}function ud(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=function(t){const e=[];let i=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);if(l>=55296&&l<=56319){const a=l-55296;s++,Q(s<t.length,"Surrogate pair missing trail surrogate.");const c=t.charCodeAt(s)-56320;l=65536+(a<<10)+c}l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):l<65536?(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},wa=function(t){let e=0;for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,i++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){return t&&t._delegate?t._delegate:t}class Sl{constructor(e,i,s){this.name=e,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const s=new Ra;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sx(e))try{this.getOrInitializeService({instanceIdentifier:Qi})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const a=this.getOrInitializeService({instanceIdentifier:l});s.resolve(a)}catch{}}}}clearInstance(e=Qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qi){return this.instances.has(e)}getOptions(e=Qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);s===h&&c.resolve(l)}return l}onInit(e,i){const s=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const a=this.instances.get(s);return a&&e(a,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,i){const s=this.onInitCallbacks.get(i);if(s)for(const l of s)try{l(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Ex(e),options:i}),this.instances.set(e,s),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qi){return this.component?this.component.multipleInstances?e:Qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ex(t){return t===Qi?void 0:t}function Sx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new _x(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Fe||(Fe={}));const Cx={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},xx=Fe.INFO,Ax={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},bx=(t,e,...i)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),l=Ax[e];if(l)console[l](`[${s}]  ${t.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bv{constructor(e){this.name=e,this._logLevel=xx,this._logHandler=bx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const Nx=(t,e)=>e.some(i=>t instanceof i);let ay,uy;function Rx(){return ay||(ay=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wx(){return uy||(uy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vv=new WeakMap,wf=new WeakMap,qv=new WeakMap,mf=new WeakMap,cd=new WeakMap;function Ix(t){const e=new Promise((i,s)=>{const l=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{i(xi(t.result)),l()},c=()=>{s(t.error),l()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(i=>{i instanceof IDBCursor&&Vv.set(i,t)}).catch(()=>{}),cd.set(e,t),e}function Mx(t){if(wf.has(t))return;const e=new Promise((i,s)=>{const l=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{i(),l()},c=()=>{s(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});wf.set(t,e)}let If={get(t,e,i){if(t instanceof IDBTransaction){if(e==="done")return wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qv.get(t);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return xi(t[e])},set(t,e,i){return t[e]=i,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Dx(t){If=t(If)}function Ux(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const s=t.call(gf(this),e,...i);return qv.set(s,e.sort?e.sort():[e]),xi(s)}:wx().includes(t)?function(...e){return t.apply(gf(this),e),xi(Vv.get(this))}:function(...e){return xi(t.apply(gf(this),e))}}function Lx(t){return typeof t=="function"?Ux(t):(t instanceof IDBTransaction&&Mx(t),Nx(t,Rx())?new Proxy(t,If):t)}function xi(t){if(t instanceof IDBRequest)return Ix(t);if(mf.has(t))return mf.get(t);const e=Lx(t);return e!==t&&(mf.set(t,e),cd.set(e,t)),e}const gf=t=>cd.get(t);function kx(t,e,{blocked:i,upgrade:s,blocking:l,terminated:a}={}){const c=indexedDB.open(t,e),h=xi(c);return s&&c.addEventListener("upgradeneeded",g=>{s(xi(c.result),g.oldVersion,g.newVersion,xi(c.transaction),g)}),i&&c.addEventListener("blocked",g=>i(g.oldVersion,g.newVersion,g)),h.then(g=>{a&&g.addEventListener("close",()=>a()),l&&g.addEventListener("versionchange",m=>l(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const Px=["get","getKey","getAll","getAllKeys","count"],Ox=["put","add","delete","clear"],yf=new Map;function cy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yf.get(e))return yf.get(e);const i=e.replace(/FromIndex$/,""),s=e!==i,l=Ox.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(l||Px.includes(i)))return;const a=async function(c,...h){const g=this.transaction(c,l?"readwrite":"readonly");let m=g.store;return s&&(m=m.index(h.shift())),(await Promise.all([m[i](...h),l&&g.done]))[0]};return yf.set(e,a),a}Dx(t=>({...t,get:(e,i,s)=>cy(e,i)||t.get(e,i,s),has:(e,i)=>!!cy(e,i)||t.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(Gx(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function Gx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mf="@firebase/app",fy="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new Bv("@firebase/app"),Hx="@firebase/app-compat",Bx="@firebase/analytics-compat",Vx="@firebase/analytics",qx="@firebase/app-check-compat",Fx="@firebase/app-check",Yx="@firebase/auth",Jx="@firebase/auth-compat",Kx="@firebase/database",Xx="@firebase/data-connect",Qx="@firebase/database-compat",$x="@firebase/functions",Wx="@firebase/functions-compat",Zx="@firebase/installations",jx="@firebase/installations-compat",eA="@firebase/messaging",tA="@firebase/messaging-compat",nA="@firebase/performance",iA="@firebase/performance-compat",oA="@firebase/remote-config",sA="@firebase/remote-config-compat",lA="@firebase/storage",rA="@firebase/storage-compat",aA="@firebase/firestore",uA="@firebase/ai",cA="@firebase/firestore-compat",fA="firebase",dA="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="[DEFAULT]",hA={[Mf]:"fire-core",[Hx]:"fire-core-compat",[Vx]:"fire-analytics",[Bx]:"fire-analytics-compat",[Fx]:"fire-app-check",[qx]:"fire-app-check-compat",[Yx]:"fire-auth",[Jx]:"fire-auth-compat",[Kx]:"fire-rtdb",[Xx]:"fire-data-connect",[Qx]:"fire-rtdb-compat",[$x]:"fire-fn",[Wx]:"fire-fn-compat",[Zx]:"fire-iid",[jx]:"fire-iid-compat",[eA]:"fire-fcm",[tA]:"fire-fcm-compat",[nA]:"fire-perf",[iA]:"fire-perf-compat",[oA]:"fire-rc",[sA]:"fire-rc-compat",[lA]:"fire-gcs",[rA]:"fire-gcs-compat",[aA]:"fire-fst",[cA]:"fire-fst-compat",[uA]:"fire-vertex","fire-js":"fire-js",[fA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new Map,pA=new Map,Uf=new Map;function dy(t,e){try{t.container.addComponent(e)}catch(i){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,i)}}function ha(t){const e=t.name;if(Uf.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;Uf.set(e,t);for(const i of da.values())dy(i,t);for(const i of pA.values())dy(i,t);return!0}function mA(t,e){const i=t.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),t.container.getProvider(e)}function gA(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new Gv("app","Firebase",yA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,i,s){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Sl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=dA;function Fv(t,e={}){let i=t;typeof e!="object"&&(e={name:e});const s={name:Df,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw Ai.create("bad-app-name",{appName:String(l)});if(i||(i=Ov()),!i)throw Ai.create("no-options");const a=da.get(l);if(a){if(fa(i,a.options)&&fa(s,a.config))return a;throw Ai.create("duplicate-app",{appName:l})}const c=new Tx(l);for(const g of Uf.values())c.addComponent(g);const h=new vA(i,s,c);return da.set(l,h),h}function EA(t=Df){const e=da.get(t);if(!e&&t===Df&&Ov())return Fv();if(!e)throw Ai.create("no-app",{appName:t});return e}function Zo(t,e,i){let s=hA[t]??t;i&&(s+=`-${i}`);const l=s.match(/\s|\//),a=e.match(/\s|\//);if(l||a){const c=[`Unable to register library "${s}" with version "${e}":`];l&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(c.join(" "));return}ha(new Sl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="firebase-heartbeat-database",TA=1,Tl="firebase-heartbeat-store";let vf=null;function Yv(){return vf||(vf=kx(SA,TA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Tl)}catch(i){console.warn(i)}}}}).catch(t=>{throw Ai.create("idb-open",{originalErrorMessage:t.message})})),vf}async function CA(t){try{const i=(await Yv()).transaction(Tl),s=await i.objectStore(Tl).get(Jv(t));return await i.done,s}catch(e){if(e instanceof bl)Yn.warn(e.message);else{const i=Ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yn.warn(i.message)}}}async function hy(t,e){try{const s=(await Yv()).transaction(Tl,"readwrite");await s.objectStore(Tl).put(e,Jv(t)),await s.done}catch(i){if(i instanceof bl)Yn.warn(i.message);else{const s=Ai.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});Yn.warn(s.message)}}}function Jv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=1024,AA=30;class bA{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new RA(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,i;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=py();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)==null?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:l}),this._heartbeatsCache.heartbeats.length>AA){const c=wA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Yn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=py(),{heartbeatsToSend:s,unsentEntries:l}=NA(this._heartbeatsCache.heartbeats),a=ua(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=i,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(i){return Yn.warn(i),""}}}function py(){return new Date().toISOString().substring(0,10)}function NA(t,e=xA){const i=[];let s=t.slice();for(const l of t){const a=i.find(c=>c.agent===l.agent);if(a){if(a.dates.push(l.date),my(i)>e){a.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),my(i)>e){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class RA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ux()?cx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await CA(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return hy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return hy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function my(t){return ua(JSON.stringify({version:2,heartbeats:t})).length}function wA(t){if(t.length===0)return-1;let e=0,i=t[0].date;for(let s=1;s<t.length;s++)t[s].date<i&&(i=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t){ha(new Sl("platform-logger",e=>new zx(e),"PRIVATE")),ha(new Sl("heartbeat",e=>new bA(e),"PRIVATE")),Zo(Mf,fy,t),Zo(Mf,fy,"esm2020"),Zo("fire-js","")}IA("");var MA="firebase",DA="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zo(MA,DA,"app");var gy={};const yy="@firebase/database",vy="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kv="";function UA(t){Kv=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,i){i==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),_t(i))}get(e){const i=this.domStorage_.getItem(this.prefixedName_(e));return i==null?null:El(i)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,i){i==null?delete this.cache_[e]:this.cache_[e]=i}get(e){return Qn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new LA(e)}}catch{}return new kA},Zi=Xv("localStorage"),PA=Xv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=new Bv("@firebase/database"),OA=(function(){let t=1;return function(){return t++}})(),Qv=function(t){const e=vx(t),i=new yx;i.update(e);const s=i.digest();return rd.encodeByteArray(s)},Rl=function(...t){let e="";for(let i=0;i<t.length;i++){const s=t[i];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Rl.apply(null,s):typeof s=="object"?e+=_t(s):e+=s,e+=" "}return e};let gl=null,_y=!0;const zA=function(t,e){Q(!0,"Can't turn on custom loggers persistently."),jo.logLevel=Fe.VERBOSE,gl=jo.log.bind(jo)},St=function(...t){if(_y===!0&&(_y=!1,gl===null&&PA.get("logging_enabled")===!0&&zA()),gl){const e=Rl.apply(null,t);gl(e)}},wl=function(t){return function(...e){St(t,...e)}},Lf=function(...t){const e="FIREBASE INTERNAL ERROR: "+Rl(...t);jo.error(e)},Jn=function(...t){const e=`FIREBASE FATAL ERROR: ${Rl(...t)}`;throw jo.error(e),new Error(e)},Ot=function(...t){const e="FIREBASE WARNING: "+Rl(...t);jo.warn(e)},GA=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ot("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},$v=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},HA=function(t){if(document.readyState==="complete")t();else{let e=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},os="[MIN_NAME]",eo="[MAX_NAME]",rs=function(t,e){if(t===e)return 0;if(t===os||e===eo)return-1;if(e===os||t===eo)return 1;{const i=Ey(t),s=Ey(e);return i!==null?s!==null?i-s===0?t.length-e.length:i-s:-1:s!==null?1:t<e?-1:1}},BA=function(t,e){return t===e?0:t<e?-1:1},al=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+_t(e))},fd=function(t){if(typeof t!="object"||t===null)return _t(t);const e=[];for(const s in t)e.push(s);e.sort();let i="{";for(let s=0;s<e.length;s++)s!==0&&(i+=","),i+=_t(e[s]),i+=":",i+=fd(t[e[s]]);return i+="}",i},Wv=function(t,e){const i=t.length;if(i<=e)return[t];const s=[];for(let l=0;l<i;l+=e)l+e>i?s.push(t.substring(l,i)):s.push(t.substring(l,l+e));return s};function rn(t,e){for(const i in t)t.hasOwnProperty(i)&&e(i,t[i])}const Zv=function(t){Q(!$v(t),"Invalid JSON number");const e=11,i=52,s=(1<<e-1)-1;let l,a,c,h,g;t===0?(a=0,c=0,l=1/t===-1/0?1:0):(l=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(h=Math.min(Math.floor(Math.log(t)/Math.LN2),s),a=h+s,c=Math.round(t*Math.pow(2,i-h)-Math.pow(2,i))):(a=0,c=Math.round(t/Math.pow(2,1-s-i))));const m=[];for(g=i;g;g-=1)m.push(c%2?1:0),c=Math.floor(c/2);for(g=e;g;g-=1)m.push(a%2?1:0),a=Math.floor(a/2);m.push(l?1:0),m.reverse();const v=m.join("");let _="";for(g=0;g<64;g+=8){let E=parseInt(v.substr(g,8),2).toString(16);E.length===1&&(E="0"+E),_=_+E}return _.toLowerCase()},VA=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},qA=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},FA=new RegExp("^-?(0*)\\d{1,10}$"),YA=-2147483648,JA=2147483647,Ey=function(t){if(FA.test(t)){const e=Number(t);if(e>=YA&&e<=JA)return e}return null},as=function(t){try{t()}catch(e){setTimeout(()=>{const i=e.stack||"";throw Ot("Exception was thrown by user callback.",i),e},Math.floor(0))}},KA=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},yl=function(t,e){const i=setTimeout(t,e);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,i){this.appCheckProvider=i,this.appName=e.name,gA(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((i,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(i,s):i(null)},0)})}addTokenChangeListener(e){var i;(i=this.appCheckProvider)==null||i.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){Ot(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,i,s){this.appName_=e,this.firebaseOptions_=i,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(i=>i&&i.code==="auth/token-not-initialized"?(St("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(i,s):i(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(i=>i.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(i=>i.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ot(e)}}class sa{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}sa.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="5",jv="v",e_="s",t_="r",n_="f",i_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,o_="ls",s_="p",kf="ac",l_="websocket",r_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,i,s,l,a=!1,c="",h=!1,g=!1,m=null){this.secure=i,this.namespace=s,this.webSocketOnly=l,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this.emulatorOptions=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${i}`}}function $A(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function u_(t,e,i){Q(typeof e=="string","typeof type must == string"),Q(typeof i=="object","typeof params must == object");let s;if(e===l_)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===r_)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);$A(t)&&(i.ns=t.namespace);const l=[];return rn(i,(a,c)=>{l.push(a+"="+c)}),s+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.counters_={}}incrementCounter(e,i=1){Qn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=i}get(){return KC(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f={},Ef={};function hd(t){const e=t.toString();return _f[e]||(_f[e]=new WA),_f[e]}function ZA(t,e){const i=t.toString();return Ef[i]||(Ef[i]=e()),Ef[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,i){this.closeAfterResponse=e,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,i){for(this.pendingResponses[e]=i;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<s.length;++l)s[l]&&as(()=>{this.onMessage_(s[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="start",eb="close",tb="pLPCommand",nb="pRTLPCB",c_="id",f_="pw",d_="ser",ib="cb",ob="seg",sb="ts",lb="d",rb="dframe",h_=1870,p_=30,ab=h_-p_,ub=25e3,cb=3e4;class Qo{constructor(e,i,s,l,a,c,h){this.connId=e,this.repoInfo=i,this.applicationId=s,this.appCheckToken=l,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wl(e),this.stats_=hd(i),this.urlFn=g=>(this.appCheckToken&&(g[kf]=this.appCheckToken),u_(i,r_,g))}open(e,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new jA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(cb)),HA(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pd((...a)=>{const[c,h,g,m,v]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===Sy)this.id=h,this.password=g;else if(c===eb)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const s={};s[Sy]="t",s[d_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[ib]=this.scriptTagHolder.uniqueCallbackIdentifier),s[jv]=dd,this.transportSessionId&&(s[e_]=this.transportSessionId),this.lastSessionId&&(s[o_]=this.lastSessionId),this.applicationId&&(s[s_]=this.applicationId),this.appCheckToken&&(s[kf]=this.appCheckToken),typeof location<"u"&&location.hostname&&i_.test(location.hostname)&&(s[t_]=n_);const l=this.urlFn(s);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qo.forceAllow_=!0}static forceDisallow(){Qo.forceDisallow_=!0}static isAvailable(){return Qo.forceAllow_?!0:!Qo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!VA()&&!qA()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const i=_t(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=Lv(i),l=Wv(s,ab);for(let a=0;a<l.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[a]),this.curSegmentNum++}addDisconnectPingFrame(e,i){this.myDisconnFrame=document.createElement("iframe");const s={};s[rb]="t",s[c_]=e,s[f_]=i,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const i=_t(e).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class pd{constructor(e,i,s,l){this.onDisconnect=s,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=OA(),window[tb+this.uniqueCallbackIdentifier]=e,window[nb+this.uniqueCallbackIdentifier]=i,this.myIFrame=pd.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){St("frame writing exception"),h.stack&&St(h.stack),St(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||St("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,i){for(this.myID=e,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[c_]=this.myID,e[f_]=this.myPW,e[d_]=this.currentSerial;let i=this.urlFn(e),s="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+p_+s.length<=h_;){const c=this.pendingSegs.shift();s=s+"&"+ob+l+"="+c.seg+"&"+sb+l+"="+c.ts+"&"+lb+l+"="+c.d,l++}return i=i+s,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(e,i,s){this.pendingSegs.push({seg:e,ts:i,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,i){this.outstandingRequests.add(i);const s=()=>{this.outstandingRequests.delete(i),this.newRequest_()},l=setTimeout(s,Math.floor(ub)),a=()=>{clearTimeout(l),s()};this.addTag(e,a)}addTag(e,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const l=s.readyState;(!l||l==="loaded"||l==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),i())},s.onerror=()=>{St("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=16384,db=45e3;let pa=null;typeof MozWebSocket<"u"?pa=MozWebSocket:typeof WebSocket<"u"&&(pa=WebSocket);class hn{constructor(e,i,s,l,a,c,h){this.connId=e,this.applicationId=s,this.appCheckToken=l,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wl(this.connId),this.stats_=hd(i),this.connURL=hn.connectionURL_(i,c,h,l,s),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,s,l,a){const c={};return c[jv]=dd,typeof location<"u"&&location.hostname&&i_.test(location.hostname)&&(c[t_]=n_),i&&(c[e_]=i),s&&(c[o_]=s),l&&(c[kf]=l),a&&(c[s_]=a),u_(e,l_,c)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zi.set("previous_websocket_failure",!0);try{let s;ax(),this.mySock=new pa(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){hn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(i);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&pa!==null&&!hn.forceDisallow_}static previouslyFailed(){return Zi.isInMemoryStorage||Zi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Zi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const s=El(i);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Q(this.frames===null,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const s=this.extractFrameCount_(i);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const i=_t(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=Wv(i,fb);s.length>1&&this.sendString_(String(s.length));for(let l=0;l<s.length;l++)this.sendString_(s[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(db))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}hn.responsesRequiredToBeHealthy=2;hn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{static get ALL_TRANSPORTS(){return[Qo,hn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const i=hn&&hn.isAvailable();let s=i&&!hn.previouslyFailed();if(e.webSocketOnly&&(i||Ot("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[hn];else{const l=this.transports_=[];for(const a of Cl.ALL_TRANSPORTS)a&&a.isAvailable()&&l.push(a);Cl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Cl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=6e4,pb=5e3,mb=10*1024,gb=100*1024,Sf="t",Ty="d",yb="s",Cy="r",vb="e",xy="o",Ay="a",by="n",Ny="p",_b="h";class Eb{constructor(e,i,s,l,a,c,h,g,m,v){this.id=e,this.repoInfo_=i,this.applicationId_=s,this.appCheckToken_=l,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=m,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wl("c:"+this.id+":"),this.transportManager_=new Cl(i),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,s)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=yl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>gb?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>mb?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return i=>{e===this.conn_?this.onConnectionLost_(i):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return i=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(i):e===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(e){const i={t:"d",d:e};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Sf in e){const i=e[Sf];i===Ay?this.upgradeIfSecondaryHealthy_():i===Cy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===xy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const i=al("t",e),s=al("d",e);if(i==="c")this.onSecondaryControl_(s);else if(i==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ny,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ay,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:by,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const i=al("t",e),s=al("d",e);i==="c"?this.onControl_(s):i==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const i=al(Sf,e);if(Ty in e){const s=e[Ty];if(i===_b){const l={...s};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(i===by){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===yb?this.onConnectionShutdown_(s):i===Cy?this.onReset_(s):i===vb?Lf("Server Error: "+s):i===xy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Lf("Unknown control packet command: "+i)}}onHandshake_(e){const i=e.ts,s=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),dd!==s&&Ot("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,s),yl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(hb))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,i){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(pb))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ny,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{put(e,i,s,l){}merge(e,i,s,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,i,s){}onDisconnectMerge(e,i,s){}onDisconnectCancel(e,i){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this.allowedEvents_=e,this.listeners_={},Q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...i){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let l=0;l<s.length;l++)s[l].callback.apply(s[l].context,i)}}on(e,i,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:i,context:s});const l=this.getInitialEvent(e);l&&i.apply(s,l)}off(e,i,s){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let a=0;a<l.length;a++)if(l[a].callback===i&&(!s||s===l[a].context)){l.splice(a,1);return}}validateEventType_(e){Q(this.allowedEvents_.find(i=>i===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends g_{static getInstance(){return new ma}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!zv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=32,wy=768;class Qe{constructor(e,i){if(i===void 0){this.pieces_=e.split("/");let s=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[s]=this.pieces_[l],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=i}toString(){let e="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(e+="/"+this.pieces_[i]);return e||"/"}}function Be(){return new Qe("")}function Ae(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ni(t){return t.pieces_.length-t.pieceNum_}function Xe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Qe(t.pieces_,e)}function y_(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Sb(t){let e="";for(let i=t.pieceNum_;i<t.pieces_.length;i++)t.pieces_[i]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[i])));return e||"/"}function v_(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function __(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let i=t.pieceNum_;i<t.pieces_.length-1;i++)e.push(t.pieces_[i]);return new Qe(e,0)}function rt(t,e){const i=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)i.push(t.pieces_[s]);if(e instanceof Qe)for(let s=e.pieceNum_;s<e.pieces_.length;s++)i.push(e.pieces_[s]);else{const s=e.split("/");for(let l=0;l<s.length;l++)s[l].length>0&&i.push(s[l])}return new Qe(i,0)}function Ne(t){return t.pieceNum_>=t.pieces_.length}function sn(t,e){const i=Ae(t),s=Ae(e);if(i===null)return e;if(i===s)return sn(Xe(t),Xe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function E_(t,e){if(Ni(t)!==Ni(e))return!1;for(let i=t.pieceNum_,s=e.pieceNum_;i<=t.pieces_.length;i++,s++)if(t.pieces_[i]!==e.pieces_[s])return!1;return!0}function pn(t,e){let i=t.pieceNum_,s=e.pieceNum_;if(Ni(t)>Ni(e))return!1;for(;i<t.pieces_.length;){if(t.pieces_[i]!==e.pieces_[s])return!1;++i,++s}return!0}class Tb{constructor(e,i){this.errorPrefix_=i,this.parts_=v_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=wa(this.parts_[s]);S_(this)}}function Cb(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=wa(e),S_(t)}function xb(t){const e=t.parts_.pop();t.byteLength_-=wa(e),t.parts_.length>0&&(t.byteLength_-=1)}function S_(t){if(t.byteLength_>wy)throw new Error(t.errorPrefix_+"has a key path longer than "+wy+" bytes ("+t.byteLength_+").");if(t.parts_.length>Ry)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ry+") or object contains a cycle "+$i(t))}function $i(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends g_{static getInstance(){return new md}constructor(){super(["visible"]);let e,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return Q(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=1e3,Ab=300*1e3,Iy=30*1e3,bb=1.3,Nb=3e4,Rb="server_kill",My=3;class Fn extends m_{constructor(e,i,s,l,a,c,h,g){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=l,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=h,this.authOverride_=g,this.id=Fn.nextPersistentConnectionId_++,this.log_=wl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ul,this.maxReconnectDelay_=Ab,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");md.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ma.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,s){const l=++this.requestNumber_,a={r:l,a:e,b:i};this.log_(_t(a)),Q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[l]=s)}get(e){this.initConnection_();const i=new Ra,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const h=c.d;c.s==="ok"?i.resolve(h):i.reject(h)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),i.promise}listen(e,i,s,l){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),Q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Q(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const h={onComplete:l,hashFn:i,query:e,tag:s};this.listens.get(c).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(e){const i=e.query,s=i._path.toString(),l=i._queryIdentifier;this.log_("Listen on "+s+" for "+l);const a={p:s},c="q";e.tag&&(a.q=i._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,h=>{const g=h.d,m=h.s;Fn.warnOnListenWarnings_(g,i),(this.listens.get(s)&&this.listens.get(s).get(l))===e&&(this.log_("listen response",h),m!=="ok"&&this.removeListen_(s,l),e.onComplete&&e.onComplete(m,g))})}static warnOnListenWarnings_(e,i){if(e&&typeof e=="object"&&Qn(e,"w")){const s=is(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const l='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();Ot(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||mx(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Iy)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=px(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,l=>{const a=l.s,c=l.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,s=e.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(e,i){const s=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+l),Q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,l)&&this.connected_&&this.sendUnlisten_(s,l,e._queryObject,i)}sendUnlisten_(e,i,s,l){this.log_("Unlisten on "+e+" for "+i);const a={p:e},c="n";l&&(a.q=s,a.t=l),this.sendRequest(c,a)}onDisconnectPut(e,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:s})}onDisconnectMerge(e,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:s})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,s,l){const a={p:i,d:s};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{l&&setTimeout(()=>{l(c.s,c.d)},Math.floor(0))})}put(e,i,s,l){this.putInternal("p",e,i,s,l)}merge(e,i,s,l){this.putInternal("m",e,i,s,l)}putInternal(e,i,s,l,a){this.initConnection_();const c={p:i,d:s};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:l}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,s,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(a.s,a.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+_t(e));const i=e.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),e==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):e==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):e==="c"?this.onListenRevoked_(i.p,i.q):e==="ac"?this.onAuthRevoked_(i.s,i.d):e==="apc"?this.onAppCheckRevoked_(i.s,i.d):e==="sd"?this.onSecurityDebugPacket_(i):Lf("Unrecognized action received from server: "+_t(e)+`
Are you using the latest client?`)}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ul,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ul,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Nb&&(this.reconnectDelay_=ul),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*bb)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+Fn.nextConnectionId_++,a=this.lastSessionId;let c=!1,h=null;const g=function(){h?h.close():(c=!0,s())},m=function(_){Q(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(_)};this.realtime_={close:g,sendRequest:m};const v=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,E]=await Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)]);c?St("getToken() completed but was canceled"):(St("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=E&&E.token,h=new Eb(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,i,s,x=>{Ot(x+" ("+this.repoInfo_.toString()+")"),this.interrupt(Rb)},a))}catch(_){this.log_("Failed to get token: "+_),c||(this.repoInfo_.nodeAdmin&&Ot(_),g())}}}interrupt(e){St("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){St("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ly(this.interruptReasons_)&&(this.reconnectDelay_=ul,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let s;i?s=i.map(a=>fd(a)).join("$"):s="default";const l=this.removeListen_(e,s);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,i){const s=new Qe(e).toString();let l;if(this.listens.has(s)){const a=this.listens.get(s);l=a.get(i),a.delete(i),a.size===0&&this.listens.delete(s)}else l=void 0;return l}onAuthRevoked_(e,i){St("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=My&&(this.reconnectDelay_=Iy,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){St("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=My&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";e["sdk."+i+"."+Kv.replace(/\./g,"-")]=1,zv()?e["framework.cordova"]=1:rx()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ma.getInstance().currentlyOnline();return ly(this.interruptReasons_)&&e}}Fn.nextPersistentConnectionId_=0;Fn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,i){this.name=e,this.node=i}static Wrap(e,i){return new Re(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,i){const s=new Re(os,e),l=new Re(os,i);return this.compare(s,l)!==0}minPost(){return Re.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $r;class T_ extends Ia{static get __EMPTY_NODE(){return $r}static set __EMPTY_NODE(e){$r=e}compare(e,i){return rs(e.name,i.name)}isDefinedOn(e){throw ls("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,i){return!1}minPost(){return Re.MIN}maxPost(){return new Re(eo,$r)}makePost(e,i){return Q(typeof e=="string","KeyIndex indexValue must always be a string."),new Re(e,$r)}toString(){return".key"}}const es=new T_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,i,s,l,a=null){this.isReverse_=l,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=i?s(e.key,i):1,l&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(e.key,e.value):i={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ft{constructor(e,i,s,l,a){this.key=e,this.value=i,this.color=s??ft.RED,this.left=l??Pt.EMPTY_NODE,this.right=a??Pt.EMPTY_NODE}copy(e,i,s,l,a){return new ft(e??this.key,i??this.value,s??this.color,l??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,s){let l=this;const a=s(e,l.key);return a<0?l=l.copy(null,null,null,l.left.insert(e,i,s),null):a===0?l=l.copy(null,i,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,i,s)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let s,l;if(s=this,i(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),i(e,s.key)===0){if(s.right.isEmpty())return Pt.EMPTY_NODE;l=s.right.min_(),s=s.copy(l.key,l.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ft.RED=!0;ft.BLACK=!1;class wb{copy(e,i,s,l,a){return this}insert(e,i,s){return new ft(e,i,null)}remove(e,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Pt{constructor(e,i=Pt.EMPTY_NODE){this.comparator_=e,this.root_=i}insert(e,i){return new Pt(this.comparator_,this.root_.insert(e,i,this.comparator_).copy(null,null,ft.BLACK,null,null))}remove(e){return new Pt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ft.BLACK,null,null))}get(e){let i,s=this.root_;for(;!s.isEmpty();){if(i=this.comparator_(e,s.key),i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}getPredecessorKey(e){let i,s=this.root_,l=null;for(;!s.isEmpty();)if(i=this.comparator_(e,s.key),i===0){if(s.left.isEmpty())return l?l.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else i<0?s=s.left:i>0&&(l=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Wr(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,i){return new Wr(this.root_,e,this.comparator_,!1,i)}getReverseIteratorFrom(e,i){return new Wr(this.root_,e,this.comparator_,!0,i)}getReverseIterator(e){return new Wr(this.root_,null,this.comparator_,!0,e)}}Pt.EMPTY_NODE=new wb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t,e){return rs(t.name,e.name)}function gd(t,e){return rs(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pf;function Mb(t){Pf=t}const C_=function(t){return typeof t=="number"?"number:"+Zv(t):"string:"+t},x_=function(t){if(t.isLeafNode()){const e=t.val();Q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Qn(e,".sv"),"Priority must be a string or number.")}else Q(t===Pf||t.isEmpty(),"priority of unexpected type.");Q(t===Pf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dy;class ct{static set __childrenNodeConstructor(e){Dy=e}static get __childrenNodeConstructor(){return Dy}constructor(e,i=ct.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,Q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),x_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ct(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ct.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ne(e)?this:Ae(e)===".priority"?this.priorityNode_:ct.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return e===".priority"?this.updatePriority(i):i.isEmpty()&&e!==".priority"?this:ct.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const s=Ae(e);return s===null?i:i.isEmpty()&&s!==".priority"?this:(Q(s!==".priority"||Ni(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,ct.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xe(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+C_(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",i==="number"?e+=Zv(this.value_):e+=this.value_,this.lazyHash_=Qv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ct.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ct.__childrenNodeConstructor?-1:(Q(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,s=typeof this.value_,l=ct.VALUE_TYPE_ORDER.indexOf(i),a=ct.VALUE_TYPE_ORDER.indexOf(s);return Q(l>=0,"Unknown leaf type: "+i),Q(a>=0,"Unknown leaf type: "+s),l===a?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}ct.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A_,b_;function Db(t){A_=t}function Ub(t){b_=t}class Lb extends Ia{compare(e,i){const s=e.node.getPriority(),l=i.node.getPriority(),a=s.compareTo(l);return a===0?rs(e.name,i.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,i){return!e.getPriority().equals(i.getPriority())}minPost(){return Re.MIN}maxPost(){return new Re(eo,new ct("[PRIORITY-POST]",b_))}makePost(e,i){const s=A_(e);return new Re(i,new ct("[PRIORITY-POST]",s))}toString(){return".priority"}}const Tt=new Lb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=Math.log(2);class Pb{constructor(e){const i=a=>parseInt(Math.log(a)/kb,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=i(e+1),this.current_=this.count-1;const l=s(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ga=function(t,e,i,s){t.sort(e);const l=function(g,m){const v=m-g;let _,E;if(v===0)return null;if(v===1)return _=t[g],E=i?i(_):_,new ft(E,_.node,ft.BLACK,null,null);{const x=parseInt(v/2,10)+g,N=l(g,x),D=l(x+1,m);return _=t[x],E=i?i(_):_,new ft(E,_.node,ft.BLACK,N,D)}},a=function(g){let m=null,v=null,_=t.length;const E=function(N,D){const U=_-N,G=_;_-=N;const K=l(U+1,G),F=t[U],X=i?i(F):F;x(new ft(X,F.node,D,null,K))},x=function(N){m?(m.left=N,m=N):(v=N,m=N)};for(let N=0;N<g.count;++N){const D=g.nextBitIsOne(),U=Math.pow(2,g.count-(N+1));D?E(U,ft.BLACK):(E(U,ft.BLACK),E(U,ft.RED))}return v},c=new Pb(t.length),h=a(c);return new Pt(s||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf;const Ko={};class qn{static get Default(){return Q(Ko&&Tt,"ChildrenNode.ts has not been loaded"),Tf=Tf||new qn({".priority":Ko},{".priority":Tt}),Tf}constructor(e,i){this.indexes_=e,this.indexSet_=i}get(e){const i=is(this.indexes_,e);if(!i)throw new Error("No index defined for "+e);return i instanceof Pt?i:null}hasIndex(e){return Qn(this.indexSet_,e.toString())}addIndex(e,i){Q(e!==es,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let l=!1;const a=i.getIterator(Re.Wrap);let c=a.getNext();for(;c;)l=l||e.isDefinedOn(c.node),s.push(c),c=a.getNext();let h;l?h=ga(s,e.getCompare()):h=Ko;const g=e.toString(),m={...this.indexSet_};m[g]=e;const v={...this.indexes_};return v[g]=h,new qn(v,m)}addToIndexes(e,i){const s=ca(this.indexes_,(l,a)=>{const c=is(this.indexSet_,a);if(Q(c,"Missing index implementation for "+a),l===Ko)if(c.isDefinedOn(e.node)){const h=[],g=i.getIterator(Re.Wrap);let m=g.getNext();for(;m;)m.name!==e.name&&h.push(m),m=g.getNext();return h.push(e),ga(h,c.getCompare())}else return Ko;else{const h=i.get(e.name);let g=l;return h&&(g=g.remove(new Re(e.name,h))),g.insert(e,e.node)}});return new qn(s,this.indexSet_)}removeFromIndexes(e,i){const s=ca(this.indexes_,l=>{if(l===Ko)return l;{const a=i.get(e.name);return a?l.remove(new Re(e.name,a)):l}});return new qn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl;class Le{static get EMPTY_NODE(){return cl||(cl=new Le(new Pt(gd),null,qn.Default))}constructor(e,i,s){this.children_=e,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&x_(this.priorityNode_),this.children_.isEmpty()&&Q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||cl}updatePriority(e){return this.children_.isEmpty()?this:new Le(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const i=this.children_.get(e);return i===null?cl:i}}getChild(e){const i=Ae(e);return i===null?this:this.getImmediateChild(i).getChild(Xe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,i){if(Q(i,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(i);{const s=new Re(e,i);let l,a;i.isEmpty()?(l=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(s,this.children_)):(l=this.children_.insert(e,i),a=this.indexMap_.addToIndexes(s,this.children_));const c=l.isEmpty()?cl:this.priorityNode_;return new Le(l,c,a)}}updateChild(e,i){const s=Ae(e);if(s===null)return i;{Q(Ae(e)!==".priority"||Ni(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(s).updateChild(Xe(e),i);return this.updateImmediateChild(s,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let s=0,l=0,a=!0;if(this.forEachChild(Tt,(c,h)=>{i[c]=h.val(e),s++,a&&Le.INTEGER_REGEXP_.test(c)?l=Math.max(l,Number(c)):a=!1}),!e&&a&&l<2*s){const c=[];for(const h in i)c[h]=i[h];return c}else return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+C_(this.getPriority().val())+":"),this.forEachChild(Tt,(i,s)=>{const l=s.hash();l!==""&&(e+=":"+i+":"+l)}),this.lazyHash_=e===""?"":Qv(e)}return this.lazyHash_}getPredecessorChildName(e,i,s){const l=this.resolveIndex_(s);if(l){const a=l.getPredecessorKey(new Re(e,i));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const s=i.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new Re(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const s=i.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new Re(i,this.children_.get(i)):null}forEachChild(e,i){const s=this.resolveIndex_(e);return s?s.inorderTraversal(l=>i(l.name,l.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,Re.Wrap);let a=l.peek();for(;a!=null&&i.compare(a,e)<0;)l.getNext(),a=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,Re.Wrap);let a=l.peek();for(;a!=null&&i.compare(a,e)>0;)l.getNext(),a=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Il?-1:0}withIndex(e){if(e===es||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new Le(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===es||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const s=this.getIterator(Tt),l=i.getIterator(Tt);let a=s.getNext(),c=l.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=s.getNext(),c=l.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===es?null:this.indexMap_.get(e.toString())}}Le.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Ob extends Le{constructor(){super(new Pt(gd),Le.EMPTY_NODE,qn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Le.EMPTY_NODE}isEmpty(){return!1}}const Il=new Ob;Object.defineProperties(Re,{MIN:{value:new Re(os,Le.EMPTY_NODE)},MAX:{value:new Re(eo,Il)}});T_.__EMPTY_NODE=Le.EMPTY_NODE;ct.__childrenNodeConstructor=Le;Mb(Il);Ub(Il);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=!0;function vt(t,e=null){if(t===null)return Le.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const i=t;return new ct(i,vt(e))}if(!(t instanceof Array)&&zb){const i=[];let s=!1;if(rn(t,(c,h)=>{if(c.substring(0,1)!=="."){const g=vt(h);g.isEmpty()||(s=s||!g.getPriority().isEmpty(),i.push(new Re(c,g)))}}),i.length===0)return Le.EMPTY_NODE;const a=ga(i,Ib,c=>c.name,gd);if(s){const c=ga(i,Tt.getCompare());return new Le(a,vt(e),new qn({".priority":c},{".priority":Tt}))}else return new Le(a,vt(e),qn.Default)}else{let i=Le.EMPTY_NODE;return rn(t,(s,l)=>{if(Qn(t,s)&&s.substring(0,1)!=="."){const a=vt(l);(a.isLeafNode()||!a.isEmpty())&&(i=i.updateImmediateChild(s,a))}}),i.updatePriority(vt(e))}}Db(vt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb extends Ia{constructor(e){super(),this.indexPath_=e,Q(!Ne(e)&&Ae(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,i){const s=this.extractChild(e.node),l=this.extractChild(i.node),a=s.compareTo(l);return a===0?rs(e.name,i.name):a}makePost(e,i){const s=vt(e),l=Le.EMPTY_NODE.updateChild(this.indexPath_,s);return new Re(i,l)}maxPost(){const e=Le.EMPTY_NODE.updateChild(this.indexPath_,Il);return new Re(eo,e)}toString(){return v_(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb extends Ia{compare(e,i){const s=e.node.compareTo(i.node);return s===0?rs(e.name,i.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,i){return!e.equals(i)}minPost(){return Re.MIN}maxPost(){return Re.MAX}makePost(e,i){const s=vt(e);return new Re(i,s)}toString(){return".value"}}const Bb=new Hb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t){return{type:"value",snapshotNode:t}}function qb(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Fb(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Uy(t,e,i){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:i}}function Yb(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:os}hasEnd(){return this.endSet_}getIndexEndValue(){return Q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:eo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Tt}copy(){const e=new yd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ly(t){const e={};if(t.isDefault())return e;let i;if(t.index_===Tt?i="$priority":t.index_===Bb?i="$value":t.index_===es?i="$key":(Q(t.index_ instanceof Gb,"Unrecognized index type!"),i=t.index_.toString()),e.orderBy=_t(i),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=_t(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+_t(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=_t(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+_t(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function ky(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let i=t.viewFrom_;i===""&&(t.isViewFromLeft()?i="l":i="r"),e.vf=i}return t.index_!==Tt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends m_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,i){return i!==void 0?"tag$"+i:(Q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,i,s,l){super(),this.repoInfo_=e,this.onDataUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.log_=wl("p:rest:"),this.listens_={}}listen(e,i,s,l){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=ya.getListenId_(e,s),h={};this.listens_[c]=h;const g=Ly(e._queryParams);this.restRequest_(a+".json",g,(m,v)=>{let _=v;if(m===404&&(_=null,m=null),m===null&&this.onDataUpdate_(a,_,!1,s),is(this.listens_,c)===h){let E;m?m===401?E="permission_denied":E="rest_error:"+m:E="ok",l(E,null)}})}unlisten(e,i){const s=ya.getListenId_(e,i);delete this.listens_[s]}get(e){const i=Ly(e._queryParams),s=e._path.toString(),l=new Ra;return this.restRequest_(s+".json",i,(a,c)=>{let h=c;a===404&&(h=null,a=null),a===null?(this.onDataUpdate_(s,h,!1,null),l.resolve(h)):l.reject(new Error(h))}),l.promise}refreshAuthToken(e){}restRequest_(e,i={},s){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,a])=>{l&&l.accessToken&&(i.auth=l.accessToken),a&&a.token&&(i.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+gx(i);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(s&&h.readyState===4){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=El(h.responseText)}catch{Ot("Failed to parse JSON response for "+c+": "+h.responseText)}s(null,g)}else h.status!==401&&h.status!==404&&Ot("Got unsuccessful REST response for "+c+" Status: "+h.status),s(h.status);s=null}},h.open("GET",c,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.rootNode_=Le.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,i){this.rootNode_=this.rootNode_.updateChild(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(){return{value:null,children:new Map}}function N_(t,e,i){if(Ne(e))t.value=i,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,i);else{const s=Ae(e);t.children.has(s)||t.children.set(s,va());const l=t.children.get(s);e=Xe(e),N_(l,e,i)}}function Of(t,e,i){t.value!==null?i(e,t.value):Kb(t,(s,l)=>{const a=new Qe(e.toString()+"/"+s);Of(l,a,i)})}function Kb(t,e){t.children.forEach((i,s)=>{e(s,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),i={...e};return this.last_&&rn(this.last_,(s,l)=>{i[s]=i[s]-l}),this.last_=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=10*1e3,Qb=30*1e3,$b=300*1e3;class Wb{constructor(e,i){this.server_=i,this.statsToReport_={},this.statsListener_=new Xb(e);const s=Py+(Qb-Py)*Math.random();yl(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),i={};let s=!1;rn(e,(l,a)=>{a>0&&Qn(this.statsToReport_,l)&&(i[l]=a,s=!0)}),s&&this.server_.reportStats(i),yl(this.reportStats_.bind(this),Math.floor(Math.random()*2*$b))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Cn||(Cn={}));function R_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function w_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function I_(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,i,s){this.path=e,this.affectedTree=i,this.revert=s,this.type=Cn.ACK_USER_WRITE,this.source=R_()}operationForChild(e){if(Ne(this.path)){if(this.affectedTree.value!=null)return Q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new Qe(e));return new _a(Be(),i,this.revert)}}else return Q(Ae(this.path)===e,"operationForChild called for unrelated child."),new _a(Xe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,i,s){this.source=e,this.path=i,this.snap=s,this.type=Cn.OVERWRITE}operationForChild(e){return Ne(this.path)?new to(this.source,Be(),this.snap.getImmediateChild(e)):new to(this.source,Xe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,i,s){this.source=e,this.path=i,this.children=s,this.type=Cn.MERGE}operationForChild(e){if(Ne(this.path)){const i=this.children.subtree(new Qe(e));return i.isEmpty()?null:i.value?new to(this.source,Be(),i.value):new xl(this.source,Be(),i)}else return Q(Ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xl(this.source,Xe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,i,s){this.node_=e,this.fullyInitialized_=i,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ne(e))return this.isFullyInitialized()&&!this.filtered_;const i=Ae(e);return this.isCompleteForChild(i)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Zb(t,e,i,s){const l=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&t.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(Yb(c.childName,c.snapshotNode))}),fl(t,l,"child_removed",e,s,i),fl(t,l,"child_added",e,s,i),fl(t,l,"child_moved",a,s,i),fl(t,l,"child_changed",e,s,i),fl(t,l,"value",e,s,i),l}function fl(t,e,i,s,l,a){const c=s.filter(h=>h.type===i);c.sort((h,g)=>eN(t,h,g)),c.forEach(h=>{const g=jb(t,h,a);l.forEach(m=>{m.respondsTo(h.type)&&e.push(m.createEvent(g,t.query_))})})}function jb(t,e,i){return e.type==="value"||e.type==="child_removed"||(e.prevName=i.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function eN(t,e,i){if(e.childName==null||i.childName==null)throw ls("Should only compare child_ events.");const s=new Re(e.childName,e.snapshotNode),l=new Re(i.childName,i.snapshotNode);return t.index_.compare(s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t,e){return{eventCache:t,serverCache:e}}function vl(t,e,i,s){return M_(new vd(e,i,s),t.serverCache)}function D_(t,e,i,s){return M_(t.eventCache,new vd(e,i,s))}function zf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function no(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf;const tN=()=>(Cf||(Cf=new Pt(BA)),Cf);class Ke{static fromObject(e){let i=new Ke(null);return rn(e,(s,l)=>{i=i.set(new Qe(s),l)}),i}constructor(e,i=tN()){this.value=e,this.children=i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,i){if(this.value!=null&&i(this.value))return{path:Be(),value:this.value};if(Ne(e))return null;{const s=Ae(e),l=this.children.get(s);if(l!==null){const a=l.findRootMostMatchingPathAndValue(Xe(e),i);return a!=null?{path:rt(new Qe(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ne(e))return this;{const i=Ae(e),s=this.children.get(i);return s!==null?s.subtree(Xe(e)):new Ke(null)}}set(e,i){if(Ne(e))return new Ke(i,this.children);{const s=Ae(e),a=(this.children.get(s)||new Ke(null)).set(Xe(e),i),c=this.children.insert(s,a);return new Ke(this.value,c)}}remove(e){if(Ne(e))return this.children.isEmpty()?new Ke(null):new Ke(null,this.children);{const i=Ae(e),s=this.children.get(i);if(s){const l=s.remove(Xe(e));let a;return l.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,l),this.value===null&&a.isEmpty()?new Ke(null):new Ke(this.value,a)}else return this}}get(e){if(Ne(e))return this.value;{const i=Ae(e),s=this.children.get(i);return s?s.get(Xe(e)):null}}setTree(e,i){if(Ne(e))return i;{const s=Ae(e),a=(this.children.get(s)||new Ke(null)).setTree(Xe(e),i);let c;return a.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,a),new Ke(this.value,c)}}fold(e){return this.fold_(Be(),e)}fold_(e,i){const s={};return this.children.inorderTraversal((l,a)=>{s[l]=a.fold_(rt(e,l),i)}),i(e,this.value,s)}findOnPath(e,i){return this.findOnPath_(e,Be(),i)}findOnPath_(e,i,s){const l=this.value?s(i,this.value):!1;if(l)return l;if(Ne(e))return null;{const a=Ae(e),c=this.children.get(a);return c?c.findOnPath_(Xe(e),rt(i,a),s):null}}foreachOnPath(e,i){return this.foreachOnPath_(e,Be(),i)}foreachOnPath_(e,i,s){if(Ne(e))return this;{this.value&&s(i,this.value);const l=Ae(e),a=this.children.get(l);return a?a.foreachOnPath_(Xe(e),rt(i,l),s):new Ke(null)}}foreach(e){this.foreach_(Be(),e)}foreach_(e,i){this.children.inorderTraversal((s,l)=>{l.foreach_(rt(e,s),i)}),this.value&&i(e,this.value)}foreachChild(e){this.children.inorderTraversal((i,s)=>{s.value&&e(i,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.writeTree_=e}static empty(){return new mn(new Ke(null))}}function _l(t,e,i){if(Ne(e))return new mn(new Ke(i));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const l=s.path;let a=s.value;const c=sn(l,e);return a=a.updateChild(c,i),new mn(t.writeTree_.set(l,a))}else{const l=new Ke(i),a=t.writeTree_.setTree(e,l);return new mn(a)}}}function Oy(t,e,i){let s=t;return rn(i,(l,a)=>{s=_l(s,rt(e,l),a)}),s}function zy(t,e){if(Ne(e))return mn.empty();{const i=t.writeTree_.setTree(e,new Ke(null));return new mn(i)}}function Gf(t,e){return io(t,e)!=null}function io(t,e){const i=t.writeTree_.findRootMostValueAndPath(e);return i!=null?t.writeTree_.get(i.path).getChild(sn(i.path,e)):null}function Gy(t){const e=[],i=t.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Tt,(s,l)=>{e.push(new Re(s,l))}):t.writeTree_.children.inorderTraversal((s,l)=>{l.value!=null&&e.push(new Re(s,l.value))}),e}function bi(t,e){if(Ne(e))return t;{const i=io(t,e);return i!=null?new mn(new Ke(i)):new mn(t.writeTree_.subtree(e))}}function Hf(t){return t.writeTree_.isEmpty()}function ss(t,e){return U_(Be(),t.writeTree_,e)}function U_(t,e,i){if(e.value!=null)return i.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((l,a)=>{l===".priority"?(Q(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):i=U_(rt(t,l),a,i)}),!i.getChild(t).isEmpty()&&s!==null&&(i=i.updateChild(rt(t,".priority"),s)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(t,e){return G_(e,t)}function nN(t,e,i,s,l){Q(s>t.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),t.allWrites.push({path:e,snap:i,writeId:s,visible:l}),l&&(t.visibleWrites=_l(t.visibleWrites,e,i)),t.lastWriteId=s}function iN(t,e){for(let i=0;i<t.allWrites.length;i++){const s=t.allWrites[i];if(s.writeId===e)return s}return null}function oN(t,e){const i=t.allWrites.findIndex(h=>h.writeId===e);Q(i>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[i];t.allWrites.splice(i,1);let l=s.visible,a=!1,c=t.allWrites.length-1;for(;l&&c>=0;){const h=t.allWrites[c];h.visible&&(c>=i&&sN(h,s.path)?l=!1:pn(s.path,h.path)&&(a=!0)),c--}if(l){if(a)return lN(t),!0;if(s.snap)t.visibleWrites=zy(t.visibleWrites,s.path);else{const h=s.children;rn(h,g=>{t.visibleWrites=zy(t.visibleWrites,rt(s.path,g))})}return!0}else return!1}function sN(t,e){if(t.snap)return pn(t.path,e);for(const i in t.children)if(t.children.hasOwnProperty(i)&&pn(rt(t.path,i),e))return!0;return!1}function lN(t){t.visibleWrites=k_(t.allWrites,rN,Be()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function rN(t){return t.visible}function k_(t,e,i){let s=mn.empty();for(let l=0;l<t.length;++l){const a=t[l];if(e(a)){const c=a.path;let h;if(a.snap)pn(i,c)?(h=sn(i,c),s=_l(s,h,a.snap)):pn(c,i)&&(h=sn(c,i),s=_l(s,Be(),a.snap.getChild(h)));else if(a.children){if(pn(i,c))h=sn(i,c),s=Oy(s,h,a.children);else if(pn(c,i))if(h=sn(c,i),Ne(h))s=Oy(s,Be(),a.children);else{const g=is(a.children,Ae(h));if(g){const m=g.getChild(Xe(h));s=_l(s,Be(),m)}}}else throw ls("WriteRecord should have .snap or .children")}}return s}function P_(t,e,i,s,l){if(!s&&!l){const a=io(t.visibleWrites,e);if(a!=null)return a;{const c=bi(t.visibleWrites,e);if(Hf(c))return i;if(i==null&&!Gf(c,Be()))return null;{const h=i||Le.EMPTY_NODE;return ss(c,h)}}}else{const a=bi(t.visibleWrites,e);if(!l&&Hf(a))return i;if(!l&&i==null&&!Gf(a,Be()))return null;{const c=function(m){return(m.visible||l)&&(!s||!~s.indexOf(m.writeId))&&(pn(m.path,e)||pn(e,m.path))},h=k_(t.allWrites,c,e),g=i||Le.EMPTY_NODE;return ss(h,g)}}}function aN(t,e,i){let s=Le.EMPTY_NODE;const l=io(t.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(Tt,(a,c)=>{s=s.updateImmediateChild(a,c)}),s;if(i){const a=bi(t.visibleWrites,e);return i.forEachChild(Tt,(c,h)=>{const g=ss(bi(a,new Qe(c)),h);s=s.updateImmediateChild(c,g)}),Gy(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const a=bi(t.visibleWrites,e);return Gy(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function uN(t,e,i,s,l){Q(s||l,"Either existingEventSnap or existingServerSnap must exist");const a=rt(e,i);if(Gf(t.visibleWrites,a))return null;{const c=bi(t.visibleWrites,a);return Hf(c)?l.getChild(i):ss(c,l.getChild(i))}}function cN(t,e,i,s){const l=rt(e,i),a=io(t.visibleWrites,l);if(a!=null)return a;if(s.isCompleteForChild(i)){const c=bi(t.visibleWrites,l);return ss(c,s.getNode().getImmediateChild(i))}else return null}function fN(t,e){return io(t.visibleWrites,e)}function dN(t,e,i,s,l,a,c){let h;const g=bi(t.visibleWrites,e),m=io(g,Be());if(m!=null)h=m;else if(i!=null)h=ss(g,i);else return[];if(h=h.withIndex(c),!h.isEmpty()&&!h.isLeafNode()){const v=[],_=c.getCompare(),E=a?h.getReverseIteratorFrom(s,c):h.getIteratorFrom(s,c);let x=E.getNext();for(;x&&v.length<l;)_(x,s)!==0&&v.push(x),x=E.getNext();return v}else return[]}function hN(){return{visibleWrites:mn.empty(),allWrites:[],lastWriteId:-1}}function Bf(t,e,i,s){return P_(t.writeTree,t.treePath,e,i,s)}function O_(t,e){return aN(t.writeTree,t.treePath,e)}function Hy(t,e,i,s){return uN(t.writeTree,t.treePath,e,i,s)}function Ea(t,e){return fN(t.writeTree,rt(t.treePath,e))}function pN(t,e,i,s,l,a){return dN(t.writeTree,t.treePath,e,i,s,l,a)}function _d(t,e,i){return cN(t.writeTree,t.treePath,e,i)}function z_(t,e){return G_(rt(t.treePath,e),t.writeTree)}function G_(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.changeMap=new Map}trackChildChange(e){const i=e.type,s=e.childName;Q(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),Q(s!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(s);if(l){const a=l.type;if(i==="child_added"&&a==="child_removed")this.changeMap.set(s,Uy(s,e.snapshotNode,l.snapshotNode));else if(i==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(i==="child_removed"&&a==="child_changed")this.changeMap.set(s,Fb(s,l.oldSnap));else if(i==="child_changed"&&a==="child_added")this.changeMap.set(s,qb(s,e.snapshotNode));else if(i==="child_changed"&&a==="child_changed")this.changeMap.set(s,Uy(s,e.snapshotNode,l.oldSnap));else throw ls("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{getCompleteChild(e){return null}getChildAfterChild(e,i,s){return null}}const H_=new gN;class Ed{constructor(e,i,s=null){this.writes_=e,this.viewCache_=i,this.optCompleteServerCache_=s}getCompleteChild(e){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(e))return i.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new vd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _d(this.writes_,e,s)}}getChildAfterChild(e,i,s){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:no(this.viewCache_),a=pN(this.writes_,l,i,1,s,e);return a.length===0?null:a[0]}}function yN(t,e){Q(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Q(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function vN(t,e,i,s,l){const a=new mN;let c,h;if(i.type===Cn.OVERWRITE){const m=i;m.source.fromUser?c=Vf(t,e,m.path,m.snap,s,l,a):(Q(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered()&&!Ne(m.path),c=Sa(t,e,m.path,m.snap,s,l,h,a))}else if(i.type===Cn.MERGE){const m=i;m.source.fromUser?c=EN(t,e,m.path,m.children,s,l,a):(Q(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered(),c=qf(t,e,m.path,m.children,s,l,h,a))}else if(i.type===Cn.ACK_USER_WRITE){const m=i;m.revert?c=CN(t,e,m.path,s,l,a):c=SN(t,e,m.path,m.affectedTree,s,l,a)}else if(i.type===Cn.LISTEN_COMPLETE)c=TN(t,e,i.path,s,a);else throw ls("Unknown operation type: "+i.type);const g=a.getChanges();return _N(e,c,g),{viewCache:c,changes:g}}function _N(t,e,i){const s=e.eventCache;if(s.isFullyInitialized()){const l=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=zf(t);(i.length>0||!t.eventCache.isFullyInitialized()||l&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&i.push(Vb(zf(e)))}}function B_(t,e,i,s,l,a){const c=e.eventCache;if(Ea(s,i)!=null)return e;{let h,g;if(Ne(i))if(Q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=no(e),v=m instanceof Le?m:Le.EMPTY_NODE,_=O_(s,v);h=t.filter.updateFullNode(e.eventCache.getNode(),_,a)}else{const m=Bf(s,no(e));h=t.filter.updateFullNode(e.eventCache.getNode(),m,a)}else{const m=Ae(i);if(m===".priority"){Q(Ni(i)===1,"Can't have a priority with additional path components");const v=c.getNode();g=e.serverCache.getNode();const _=Hy(s,i,v,g);_!=null?h=t.filter.updatePriority(v,_):h=c.getNode()}else{const v=Xe(i);let _;if(c.isCompleteForChild(m)){g=e.serverCache.getNode();const E=Hy(s,i,c.getNode(),g);E!=null?_=c.getNode().getImmediateChild(m).updateChild(v,E):_=c.getNode().getImmediateChild(m)}else _=_d(s,m,e.serverCache);_!=null?h=t.filter.updateChild(c.getNode(),m,_,v,l,a):h=c.getNode()}}return vl(e,h,c.isFullyInitialized()||Ne(i),t.filter.filtersNodes())}}function Sa(t,e,i,s,l,a,c,h){const g=e.serverCache;let m;const v=c?t.filter:t.filter.getIndexedFilter();if(Ne(i))m=v.updateFullNode(g.getNode(),s,null);else if(v.filtersNodes()&&!g.isFiltered()){const x=g.getNode().updateChild(i,s);m=v.updateFullNode(g.getNode(),x,null)}else{const x=Ae(i);if(!g.isCompleteForPath(i)&&Ni(i)>1)return e;const N=Xe(i),U=g.getNode().getImmediateChild(x).updateChild(N,s);x===".priority"?m=v.updatePriority(g.getNode(),U):m=v.updateChild(g.getNode(),x,U,N,H_,null)}const _=D_(e,m,g.isFullyInitialized()||Ne(i),v.filtersNodes()),E=new Ed(l,_,a);return B_(t,_,i,l,E,h)}function Vf(t,e,i,s,l,a,c){const h=e.eventCache;let g,m;const v=new Ed(l,e,a);if(Ne(i))m=t.filter.updateFullNode(e.eventCache.getNode(),s,c),g=vl(e,m,!0,t.filter.filtersNodes());else{const _=Ae(i);if(_===".priority")m=t.filter.updatePriority(e.eventCache.getNode(),s),g=vl(e,m,h.isFullyInitialized(),h.isFiltered());else{const E=Xe(i),x=h.getNode().getImmediateChild(_);let N;if(Ne(E))N=s;else{const D=v.getCompleteChild(_);D!=null?y_(E)===".priority"&&D.getChild(__(E)).isEmpty()?N=D:N=D.updateChild(E,s):N=Le.EMPTY_NODE}if(x.equals(N))g=e;else{const D=t.filter.updateChild(h.getNode(),_,N,E,v,c);g=vl(e,D,h.isFullyInitialized(),t.filter.filtersNodes())}}}return g}function By(t,e){return t.eventCache.isCompleteForChild(e)}function EN(t,e,i,s,l,a,c){let h=e;return s.foreach((g,m)=>{const v=rt(i,g);By(e,Ae(v))&&(h=Vf(t,h,v,m,l,a,c))}),s.foreach((g,m)=>{const v=rt(i,g);By(e,Ae(v))||(h=Vf(t,h,v,m,l,a,c))}),h}function Vy(t,e,i){return i.foreach((s,l)=>{e=e.updateChild(s,l)}),e}function qf(t,e,i,s,l,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let g=e,m;Ne(i)?m=s:m=new Ke(null).setTree(i,s);const v=e.serverCache.getNode();return m.children.inorderTraversal((_,E)=>{if(v.hasChild(_)){const x=e.serverCache.getNode().getImmediateChild(_),N=Vy(t,x,E);g=Sa(t,g,new Qe(_),N,l,a,c,h)}}),m.children.inorderTraversal((_,E)=>{const x=!e.serverCache.isCompleteForChild(_)&&E.value===null;if(!v.hasChild(_)&&!x){const N=e.serverCache.getNode().getImmediateChild(_),D=Vy(t,N,E);g=Sa(t,g,new Qe(_),D,l,a,c,h)}}),g}function SN(t,e,i,s,l,a,c){if(Ea(l,i)!=null)return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(s.value!=null){if(Ne(i)&&g.isFullyInitialized()||g.isCompleteForPath(i))return Sa(t,e,i,g.getNode().getChild(i),l,a,h,c);if(Ne(i)){let m=new Ke(null);return g.getNode().forEachChild(es,(v,_)=>{m=m.set(new Qe(v),_)}),qf(t,e,i,m,l,a,h,c)}else return e}else{let m=new Ke(null);return s.foreach((v,_)=>{const E=rt(i,v);g.isCompleteForPath(E)&&(m=m.set(v,g.getNode().getChild(E)))}),qf(t,e,i,m,l,a,h,c)}}function TN(t,e,i,s,l){const a=e.serverCache,c=D_(e,a.getNode(),a.isFullyInitialized()||Ne(i),a.isFiltered());return B_(t,c,i,s,H_,l)}function CN(t,e,i,s,l,a){let c;if(Ea(s,i)!=null)return e;{const h=new Ed(s,e,l),g=e.eventCache.getNode();let m;if(Ne(i)||Ae(i)===".priority"){let v;if(e.serverCache.isFullyInitialized())v=Bf(s,no(e));else{const _=e.serverCache.getNode();Q(_ instanceof Le,"serverChildren would be complete if leaf node"),v=O_(s,_)}v=v,m=t.filter.updateFullNode(g,v,a)}else{const v=Ae(i);let _=_d(s,v,e.serverCache);_==null&&e.serverCache.isCompleteForChild(v)&&(_=g.getImmediateChild(v)),_!=null?m=t.filter.updateChild(g,v,_,Xe(i),h,a):e.eventCache.getNode().hasChild(v)?m=t.filter.updateChild(g,v,Le.EMPTY_NODE,Xe(i),h,a):m=g,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Bf(s,no(e)),c.isLeafNode()&&(m=t.filter.updateFullNode(m,c,a)))}return c=e.serverCache.isFullyInitialized()||Ea(s,Be())!=null,vl(e,m,c,t.filter.filtersNodes())}}function xN(t,e){const i=no(t.viewCache_);return i&&(t.query._queryParams.loadsAllData()||!Ne(e)&&!i.getImmediateChild(Ae(e)).isEmpty())?i.getChild(e):null}function qy(t,e,i,s){e.type===Cn.MERGE&&e.source.queryId!==null&&(Q(no(t.viewCache_),"We should always have a full cache before handling merges"),Q(zf(t.viewCache_),"Missing event cache, even though we have a server cache"));const l=t.viewCache_,a=vN(t.processor_,l,e,i,s);return yN(t.processor_,a.viewCache),Q(a.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,AN(t,a.changes,a.viewCache.eventCache.getNode())}function AN(t,e,i,s){const l=t.eventRegistrations_;return Zb(t.eventGenerator_,e,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fy;function bN(t){Q(!Fy,"__referenceConstructor has already been defined"),Fy=t}function Sd(t,e,i,s){const l=e.source.queryId;if(l!==null){const a=t.views.get(l);return Q(a!=null,"SyncTree gave us an op for an invalid query."),qy(a,e,i,s)}else{let a=[];for(const c of t.views.values())a=a.concat(qy(c,e,i,s));return a}}function Td(t,e){let i=null;for(const s of t.views.values())i=i||xN(s,e);return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yy;function NN(t){Q(!Yy,"__referenceConstructor has already been defined"),Yy=t}class Jy{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ke(null),this.pendingWriteTree_=hN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function V_(t,e,i,s,l){return nN(t.pendingWriteTree_,e,i,s,l),l?Da(t,new to(R_(),e,i)):[]}function ji(t,e,i=!1){const s=iN(t.pendingWriteTree_,e);if(oN(t.pendingWriteTree_,e)){let a=new Ke(null);return s.snap!=null?a=a.set(Be(),!0):rn(s.children,c=>{a=a.set(new Qe(c),!0)}),Da(t,new _a(s.path,a,i))}else return[]}function Ma(t,e,i){return Da(t,new to(w_(),e,i))}function RN(t,e,i){const s=Ke.fromObject(i);return Da(t,new xl(w_(),e,s))}function wN(t,e,i,s){const l=Y_(t,s);if(l!=null){const a=J_(l),c=a.path,h=a.queryId,g=sn(c,e),m=new to(I_(h),g,i);return K_(t,c,m)}else return[]}function IN(t,e,i,s){const l=Y_(t,s);if(l){const a=J_(l),c=a.path,h=a.queryId,g=sn(c,e),m=Ke.fromObject(i),v=new xl(I_(h),g,m);return K_(t,c,v)}else return[]}function Cd(t,e,i){const l=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(c,h)=>{const g=sn(c,e),m=Td(h,g);if(m)return m});return P_(l,e,a,i,!0)}function Da(t,e){return q_(e,t.syncPointTree_,null,L_(t.pendingWriteTree_,Be()))}function q_(t,e,i,s){if(Ne(t.path))return F_(t,e,i,s);{const l=e.get(Be());i==null&&l!=null&&(i=Td(l,Be()));let a=[];const c=Ae(t.path),h=t.operationForChild(c),g=e.children.get(c);if(g&&h){const m=i?i.getImmediateChild(c):null,v=z_(s,c);a=a.concat(q_(h,g,m,v))}return l&&(a=a.concat(Sd(l,t,s,i))),a}}function F_(t,e,i,s){const l=e.get(Be());i==null&&l!=null&&(i=Td(l,Be()));let a=[];return e.children.inorderTraversal((c,h)=>{const g=i?i.getImmediateChild(c):null,m=z_(s,c),v=t.operationForChild(c);v&&(a=a.concat(F_(v,h,g,m)))}),l&&(a=a.concat(Sd(l,t,s,i))),a}function Y_(t,e){return t.tagToQueryMap.get(e)}function J_(t){const e=t.indexOf("$");return Q(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Qe(t.substr(0,e))}}function K_(t,e,i){const s=t.syncPointTree_.get(e);Q(s,"Missing sync point for query tag that we're tracking");const l=L_(t.pendingWriteTree_,e);return Sd(s,i,l,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.node_=e}getImmediateChild(e){const i=this.node_.getImmediateChild(e);return new xd(i)}node(){return this.node_}}class Ad{constructor(e,i){this.syncTree_=e,this.path_=i}getImmediateChild(e){const i=rt(this.path_,e);return new Ad(this.syncTree_,i)}node(){return Cd(this.syncTree_,this.path_)}}const MN=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Ky=function(t,e,i){if(!t||typeof t!="object")return t;if(Q(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return DN(t[".sv"],e,i);if(typeof t[".sv"]=="object")return UN(t[".sv"],e);Q(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},DN=function(t,e,i){switch(t){case"timestamp":return i.timestamp;default:Q(!1,"Unexpected server value: "+t)}},UN=function(t,e,i){t.hasOwnProperty("increment")||Q(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&Q(!1,"Unexpected increment value: "+s);const l=e.node();if(Q(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return s;const c=l.getValue();return typeof c!="number"?s:c+s},LN=function(t,e,i,s){return bd(e,new Ad(i,t),s)},X_=function(t,e,i){return bd(t,new xd(e),i)};function bd(t,e,i){const s=t.getPriority().val(),l=Ky(s,e.getImmediateChild(".priority"),i);let a;if(t.isLeafNode()){const c=t,h=Ky(c.getValue(),e,i);return h!==c.getValue()||l!==c.getPriority().val()?new ct(h,vt(l)):t}else{const c=t;return a=c,l!==c.getPriority().val()&&(a=a.updatePriority(new ct(l))),c.forEachChild(Tt,(h,g)=>{const m=bd(g,e.getImmediateChild(h),i);m!==g&&(a=a.updateImmediateChild(h,m))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e="",i=null,s={children:{},childCount:0}){this.name=e,this.parent=i,this.node=s}}function Rd(t,e){let i=e instanceof Qe?e:new Qe(e),s=t,l=Ae(i);for(;l!==null;){const a=is(s.node.children,l)||{children:{},childCount:0};s=new Nd(l,s,a),i=Xe(i),l=Ae(i)}return s}function us(t){return t.node.value}function Q_(t,e){t.node.value=e,Ff(t)}function $_(t){return t.node.childCount>0}function kN(t){return us(t)===void 0&&!$_(t)}function Ua(t,e){rn(t.node.children,(i,s)=>{e(new Nd(i,t,s))})}function W_(t,e,i,s){i&&e(t),Ua(t,l=>{W_(l,e,!0)})}function PN(t,e,i){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function Ml(t){return new Qe(t.parent===null?t.name:Ml(t.parent)+"/"+t.name)}function Ff(t){t.parent!==null&&ON(t.parent,t.name,t)}function ON(t,e,i){const s=kN(i),l=Qn(t.node.children,e);s&&l?(delete t.node.children[e],t.node.childCount--,Ff(t)):!s&&!l&&(t.node.children[e]=i.node,t.node.childCount++,Ff(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=/[\[\].#$\/\u0000-\u001F\u007F]/,GN=/[\[\].#$\u0000-\u001F\u007F]/,xf=10*1024*1024,Z_=function(t){return typeof t=="string"&&t.length!==0&&!zN.test(t)},j_=function(t){return typeof t=="string"&&t.length!==0&&!GN.test(t)},HN=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),j_(t)},BN=function(t,e,i,s){wd(ud(t,"value"),e,i)},wd=function(t,e,i){const s=i instanceof Qe?new Tb(i,t):i;if(e===void 0)throw new Error(t+"contains undefined "+$i(s));if(typeof e=="function")throw new Error(t+"contains a function "+$i(s)+" with contents = "+e.toString());if($v(e))throw new Error(t+"contains "+e.toString()+" "+$i(s));if(typeof e=="string"&&e.length>xf/3&&wa(e)>xf)throw new Error(t+"contains a string greater than "+xf+" utf8 bytes "+$i(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,a=!1;if(rn(e,(c,h)=>{if(c===".value")l=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!Z_(c)))throw new Error(t+" contains an invalid key ("+c+") "+$i(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Cb(s,c),wd(t,h,s),xb(s)}),l&&a)throw new Error(t+' contains ".value" child '+$i(s)+" in addition to actual children.")}},eE=function(t,e,i,s){if(!j_(i))throw new Error(ud(t,e)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},VN=function(t,e,i,s){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),eE(t,e,i)},qN=function(t,e){if(Ae(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},FN=function(t,e){const i=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Z_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!HN(i))throw new Error(ud(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tE(t,e){let i=null;for(let s=0;s<e.length;s++){const l=e[s],a=l.getPath();i!==null&&!E_(a,i.path)&&(t.eventLists_.push(i),i=null),i===null&&(i={events:[],path:a}),i.events.push(l)}i&&t.eventLists_.push(i)}function Kn(t,e,i){tE(t,i),JN(t,s=>pn(s,e)||pn(e,s))}function JN(t,e){t.recursionDepth_++;let i=!0;for(let s=0;s<t.eventLists_.length;s++){const l=t.eventLists_[s];if(l){const a=l.path;e(a)?(KN(t.eventLists_[s]),t.eventLists_[s]=null):i=!1}}i&&(t.eventLists_=[]),t.recursionDepth_--}function KN(t){for(let e=0;e<t.events.length;e++){const i=t.events[e];if(i!==null){t.events[e]=null;const s=i.getEventRunner();gl&&St("event: "+i.toString()),as(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="repo_interrupt",QN=25;class $N{constructor(e,i,s,l){this.repoInfo_=e,this.forceRestClient_=i,this.authTokenProvider_=s,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new YN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=va(),this.transactionQueueTree_=new Nd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function WN(t,e,i){if(t.stats_=hd(t.repoInfo_),t.forceRestClient_||KA())t.server_=new ya(t.repoInfo_,(s,l,a,c)=>{Xy(t,s,l,a,c)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Qy(t,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_t(i)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Fn(t.repoInfo_,e,(s,l,a,c)=>{Xy(t,s,l,a,c)},s=>{Qy(t,s)},s=>{jN(t,s)},t.authTokenProvider_,t.appCheckProvider_,i),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=ZA(t.repoInfo_,()=>new Wb(t.stats_,t.server_)),t.infoData_=new Jb,t.infoSyncTree_=new Jy({startListening:(s,l,a,c)=>{let h=[];const g=t.infoData_.getNode(s._path);return g.isEmpty()||(h=Ma(t.infoSyncTree_,s._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),Md(t,"connected",!1),t.serverSyncTree_=new Jy({startListening:(s,l,a,c)=>(t.server_.listen(s,a,l,(h,g)=>{const m=c(h,g);Kn(t.eventQueue_,s._path,m)}),[]),stopListening:(s,l)=>{t.server_.unlisten(s,l)}})}function ZN(t){const i=t.infoData_.getNode(new Qe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function Id(t){return MN({timestamp:ZN(t)})}function Xy(t,e,i,s,l){t.dataUpdateCount++;const a=new Qe(e);i=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,i):i;let c=[];if(l)if(s){const g=ca(i,m=>vt(m));c=IN(t.serverSyncTree_,a,g,l)}else{const g=vt(i);c=wN(t.serverSyncTree_,a,g,l)}else if(s){const g=ca(i,m=>vt(m));c=RN(t.serverSyncTree_,a,g)}else{const g=vt(i);c=Ma(t.serverSyncTree_,a,g)}let h=a;c.length>0&&(h=La(t,a)),Kn(t.eventQueue_,h,c)}function Qy(t,e){Md(t,"connected",e),e===!1&&tR(t)}function jN(t,e){rn(e,(i,s)=>{Md(t,i,s)})}function Md(t,e,i){const s=new Qe("/.info/"+e),l=vt(i);t.infoData_.updateSnapshot(s,l);const a=Ma(t.infoSyncTree_,s,l);Kn(t.eventQueue_,s,a)}function nE(t){return t.nextWriteId_++}function eR(t,e,i,s,l){Dd(t,"set",{path:e.toString(),value:i,priority:s});const a=Id(t),c=vt(i,s),h=Cd(t.serverSyncTree_,e),g=X_(c,h,a),m=nE(t),v=V_(t.serverSyncTree_,e,g,m,!0);tE(t.eventQueue_,v),t.server_.put(e.toString(),c.val(!0),(E,x)=>{const N=E==="ok";N||Ot("set at "+e+" failed: "+E);const D=ji(t.serverSyncTree_,m,!N);Kn(t.eventQueue_,e,D),iR(t,l,E,x)});const _=rE(t,e);La(t,_),Kn(t.eventQueue_,_,[])}function tR(t){Dd(t,"onDisconnectEvents");const e=Id(t),i=va();Of(t.onDisconnect_,Be(),(l,a)=>{const c=LN(l,a,t.serverSyncTree_,e);N_(i,l,c)});let s=[];Of(i,Be(),(l,a)=>{s=s.concat(Ma(t.serverSyncTree_,l,a));const c=rE(t,l);La(t,c)}),t.onDisconnect_=va(),Kn(t.eventQueue_,Be(),s)}function nR(t){t.persistentConnection_&&t.persistentConnection_.interrupt(XN)}function Dd(t,...e){let i="";t.persistentConnection_&&(i=t.persistentConnection_.id+":"),St(i,...e)}function iR(t,e,i,s){e&&as(()=>{if(i==="ok")e(null);else{const l=(i||"error").toUpperCase();let a=l;s&&(a+=": "+s);const c=new Error(a);c.code=l,e(c)}})}function iE(t,e,i){return Cd(t.serverSyncTree_,e,i)||Le.EMPTY_NODE}function Ud(t,e=t.transactionQueueTree_){if(e||ka(t,e),us(e)){const i=sE(t,e);Q(i.length>0,"Sending zero length transaction queue"),i.every(l=>l.status===0)&&oR(t,Ml(e),i)}else $_(e)&&Ua(e,i=>{Ud(t,i)})}function oR(t,e,i){const s=i.map(m=>m.currentWriteId),l=iE(t,e,s);let a=l;const c=l.hash();for(let m=0;m<i.length;m++){const v=i[m];Q(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const _=sn(e,v.path);a=a.updateChild(_,v.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;t.server_.put(g.toString(),h,m=>{Dd(t,"transaction put response",{path:g.toString(),status:m});let v=[];if(m==="ok"){const _=[];for(let E=0;E<i.length;E++)i[E].status=2,v=v.concat(ji(t.serverSyncTree_,i[E].currentWriteId)),i[E].onComplete&&_.push(()=>i[E].onComplete(null,!0,i[E].currentOutputSnapshotResolved)),i[E].unwatcher();ka(t,Rd(t.transactionQueueTree_,e)),Ud(t,t.transactionQueueTree_),Kn(t.eventQueue_,e,v);for(let E=0;E<_.length;E++)as(_[E])}else{if(m==="datastale")for(let _=0;_<i.length;_++)i[_].status===3?i[_].status=4:i[_].status=0;else{Ot("transaction at "+g.toString()+" failed: "+m);for(let _=0;_<i.length;_++)i[_].status=4,i[_].abortReason=m}La(t,e)}},c)}function La(t,e){const i=oE(t,e),s=Ml(i),l=sE(t,i);return sR(t,l,s),s}function sR(t,e,i){if(e.length===0)return;const s=[];let l=[];const c=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],m=sn(i,g.path);let v=!1,_;if(Q(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)v=!0,_=g.abortReason,l=l.concat(ji(t.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=QN)v=!0,_="maxretry",l=l.concat(ji(t.serverSyncTree_,g.currentWriteId,!0));else{const E=iE(t,g.path,c);g.currentInputSnapshot=E;const x=e[h].update(E.val());if(x!==void 0){wd("transaction failed: Data returned ",x,g.path);let N=vt(x);typeof x=="object"&&x!=null&&Qn(x,".priority")||(N=N.updatePriority(E.getPriority()));const U=g.currentWriteId,G=Id(t),K=X_(N,E,G);g.currentOutputSnapshotRaw=N,g.currentOutputSnapshotResolved=K,g.currentWriteId=nE(t),c.splice(c.indexOf(U),1),l=l.concat(V_(t.serverSyncTree_,g.path,K,g.currentWriteId,g.applyLocally)),l=l.concat(ji(t.serverSyncTree_,U,!0))}else v=!0,_="nodata",l=l.concat(ji(t.serverSyncTree_,g.currentWriteId,!0))}Kn(t.eventQueue_,i,l),l=[],v&&(e[h].status=2,(function(E){setTimeout(E,Math.floor(0))})(e[h].unwatcher),e[h].onComplete&&(_==="nodata"?s.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):s.push(()=>e[h].onComplete(new Error(_),!1,null))))}ka(t,t.transactionQueueTree_);for(let h=0;h<s.length;h++)as(s[h]);Ud(t,t.transactionQueueTree_)}function oE(t,e){let i,s=t.transactionQueueTree_;for(i=Ae(e);i!==null&&us(s)===void 0;)s=Rd(s,i),e=Xe(e),i=Ae(e);return s}function sE(t,e){const i=[];return lE(t,e,i),i.sort((s,l)=>s.order-l.order),i}function lE(t,e,i){const s=us(e);if(s)for(let l=0;l<s.length;l++)i.push(s[l]);Ua(e,l=>{lE(t,l,i)})}function ka(t,e){const i=us(e);if(i){let s=0;for(let l=0;l<i.length;l++)i[l].status!==2&&(i[s]=i[l],s++);i.length=s,Q_(e,i.length>0?i:void 0)}Ua(e,s=>{ka(t,s)})}function rE(t,e){const i=Ml(oE(t,e)),s=Rd(t.transactionQueueTree_,e);return PN(s,l=>{Af(t,l)}),Af(t,s),W_(s,l=>{Af(t,l)}),i}function Af(t,e){const i=us(e);if(i){const s=[];let l=[],a=-1;for(let c=0;c<i.length;c++)i[c].status===3||(i[c].status===1?(Q(a===c-1,"All SENT items should be at beginning of queue."),a=c,i[c].status=3,i[c].abortReason="set"):(Q(i[c].status===0,"Unexpected transaction status in abort"),i[c].unwatcher(),l=l.concat(ji(t.serverSyncTree_,i[c].currentWriteId,!0)),i[c].onComplete&&s.push(i[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?Q_(e,void 0):i.length=a+1,Kn(t.eventQueue_,Ml(e),l);for(let c=0;c<s.length;c++)as(s[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){let e="";const i=t.split("/");for(let s=0;s<i.length;s++)if(i[s].length>0){let l=i[s];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function rR(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const i of t.split("&")){if(i.length===0)continue;const s=i.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Ot(`Invalid query segment '${i}' in query '${t}'`)}return e}const $y=function(t,e){const i=aR(t),s=i.namespace;i.domain==="firebase.com"&&Jn(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&i.domain!=="localhost"&&Jn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||GA();const l=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new a_(i.host,i.secure,s,l,e,"",s!==i.subdomain),path:new Qe(i.pathString)}},aR=function(t){let e="",i="",s="",l="",a="",c=!0,h="https",g=443;if(typeof t=="string"){let m=t.indexOf("//");m>=0&&(h=t.substring(0,m-1),t=t.substring(m+2));let v=t.indexOf("/");v===-1&&(v=t.length);let _=t.indexOf("?");_===-1&&(_=t.length),e=t.substring(0,Math.min(v,_)),v<_&&(l=lR(t.substring(v,_)));const E=rR(t.substring(Math.min(t.length,_)));m=e.indexOf(":"),m>=0?(c=h==="https"||h==="wss",g=parseInt(e.substring(m+1),10)):m=e.length;const x=e.slice(0,m);if(x.toLowerCase()==="localhost")i="localhost";else if(x.split(".").length<=2)i=x;else{const N=e.indexOf(".");s=e.substring(0,N).toLowerCase(),i=e.substring(N+1),a=s}"ns"in E&&(a=E.ns)}return{host:e,port:g,domain:i,subdomain:s,secure:c,scheme:h,pathString:l,namespace:a}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,i,s,l){this._repo=e,this._path=i,this._queryParams=s,this._orderByCalled=l}get key(){return Ne(this._path)?null:y_(this._path)}get ref(){return new oo(this._repo,this._path)}get _queryIdentifier(){const e=ky(this._queryParams),i=fd(e);return i==="{}"?"default":i}get _queryObject(){return ky(this._queryParams)}isEqual(e){if(e=Nl(e),!(e instanceof Ld))return!1;const i=this._repo===e._repo,s=E_(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return i&&s&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+Sb(this._path)}}class oo extends Ld{constructor(e,i){super(e,i,new yd,!1)}get parent(){const e=__(this._path);return e===null?null:new oo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}function uR(t,e){return t=Nl(t),t._checkNotDeleted("ref"),e!==void 0?cR(t._root,e):t._root}function cR(t,e){return t=Nl(t),Ae(t._path)===null?VN("child","path",e):eE("child","path",e),new oo(t._repo,rt(t._path,e))}function fR(t,e){t=Nl(t),qN("set",t._path),BN("set",e,t._path);const i=new Ra;return eR(t._repo,t._path,e,null,i.wrapCallback(()=>{})),i.promise}bN(oo);NN(oo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="FIREBASE_DATABASE_EMULATOR_HOST",Yf={};let hR=!1;function pR(t,e,i,s){const l=e.lastIndexOf(":"),a=e.substring(0,l),c=ad(a);t.repoInfo_=new a_(e,c,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,i),s&&(t.authTokenProvider_=s)}function mR(t,e,i,s,l){let a=s||t.options.databaseURL;a===void 0&&(t.options.projectId||Jn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),St("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c=$y(a,l),h=c.repoInfo,g;typeof process<"u"&&gy&&(g=gy[dR]),g?(a=`http://${g}?ns=${h.namespace}`,c=$y(a,l),h=c.repoInfo):c.repoInfo.secure;const m=new QA(t.name,t.options,e);FN("Invalid Firebase Database URL",c),Ne(c.path)||Jn("Database URL must point to the root of a Firebase Database (not including a child path).");const v=yR(h,t,m,new XA(t,i));return new vR(v,t)}function gR(t,e){const i=Yf[e];(!i||i[t.key]!==t)&&Jn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),nR(t),delete i[t.key]}function yR(t,e,i,s){let l=Yf[e.name];l||(l={},Yf[e.name]=l);let a=l[t.toURLString()];return a&&Jn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new $N(t,hR,i,s),l[t.toURLString()]=a,a}class vR{constructor(e,i){this._repoInternal=e,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(WN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new oo(this._repo,Be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(gR(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Jn("Cannot call "+e+" on a deleted database.")}}function _R(t=EA(),e){const i=mA(t,"database").getImmediate({identifier:e});if(!i._instanceStarted){const s=ex("database");s&&ER(i,...s)}return i}function ER(t,e,i,s={}){t=Nl(t),t._checkNotDeleted("useEmulator");const l=`${e}:${i}`,a=t._repoInternal;if(t._instanceStarted){if(l===t._repoInternal.repoInfo_.host&&fa(s,a.repoInfo_.emulatorOptions))return;Jn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(a.repoInfo_.nodeAdmin)s.mockUserToken&&Jn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new sa(sa.OWNER);else if(s.mockUserToken){const h=typeof s.mockUserToken=="string"?s.mockUserToken:nx(s.mockUserToken,t.app.options.projectId);c=new sa(h)}ad(e)&&(tx(e),sx("Database",!0)),pR(a,l,s,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(t){UA(_A),ha(new Sl("database",(e,{instanceIdentifier:i})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return mR(s,l,a,i)},"PUBLIC").setMultipleInstances(!0)),Zo(yy,vy,t),Zo(yy,vy,"esm2020")}Fn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Fn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};SR();const TR={apiKey:"AIzaSyBnL8YK7q1p8xR9vZ2wJ6mK3hL4nO5pQ6r",authDomain:"tank-strike-nemes.firebaseapp.com",projectId:"tank-strike-nemes",storageBucket:"tank-strike-nemes.firebasestorage.app",messagingSenderId:"123456789012",databaseURL:"https://tank-strike-nemes-default-rtdb.firebaseio.com",appId:"1:123456789012:web:abcdef1234567890ghij"},CR=Fv(TR),xR=_R(CR),bt={USERS:"tank_strike_users_v3",RANKING:"tank_strike_ranking_v3",SESSION:"tank_strike_session_v3",FEEDBACK:"tank_strike_feedback_v3",GAME_STATE:"tank_strike_game_state_v3"},Zr=async(t,e)=>{try{await fR(uR(xR,t),e)}catch(i){console.log("Firebase sync skipped (offline mode):",i)}},ye={users:{getAll:()=>JSON.parse(localStorage.getItem(bt.USERS)||"[]"),getByUsername:t=>ye.users.getAll().find(e=>e.username===t)||null,register:async t=>{const e=ye.users.getAll(),i={...t,bio:t.bio||"Tanque carregado e pronto.",gender:t.gender||"O",age:t.age||20,highScore:t.highScore||0,level:t.level||1,xp:0,victoryPoints:t.victoryPoints||0,joinedAt:new Date().toISOString(),maxLevelReached:t.maxLevelReached||0,avatar:t.avatar||`https://api.dicebear.com/7.x/bottts/svg?seed=${t.username}`,likes:t.likes||0,likedBy:t.likedBy||[],followers:t.followers||[],following:t.following||[],friends:t.friends||[],reportsCount:0};return e.push(i),localStorage.setItem(bt.USERS,JSON.stringify(e)),await Zr(`users/${i.username}`,i),await ye.ranking.sync(i),i},seed:async()=>{const t=ye.users.getAll();if(t.length>1)return;const e=[{username:"NOVA_PRIME",level:300,highScore:95e4,likes:250,victoryPoints:500,maxLevelReached:120,bio:"Marechal de Ferro.",gender:"F",age:28},{username:"IRON_FIST",level:150,highScore:65e3,likes:82,victoryPoints:120,maxLevelReached:55,bio:"Major Blindado.",gender:"M",age:34},{username:"SHADOW_REAPER",level:80,highScore:22e3,likes:14,victoryPoints:40,maxLevelReached:18,bio:"Tenente das Sombras.",gender:"M",age:19},{username:"CYBER_VULCAN",level:25,highScore:98e3,likes:142,victoryPoints:210,maxLevelReached:82,bio:"Cabo de Artilharia.",gender:"O",age:25}];for(const i of e)t.find(s=>s.username===i.username)||await ye.users.register({...i,password:"password123",followers:[],friends:[],likedBy:[]})},update:async(t,e)=>{const i=ye.users.getAll(),s=i.findIndex(c=>c.username===t);if(s===-1)throw new Error("Operador no encontrado");const l={...i[s],...e,followers:e.followers||i[s].followers||[],friends:e.friends||i[s].friends||[],likedBy:e.likedBy||i[s].likedBy||[]};i[s]=l,localStorage.setItem(bt.USERS,JSON.stringify(i)),await Zr(`users/${t}`,l);const a=ye.session.get();return(a==null?void 0:a.username)===t&&ye.session.set(l),await ye.ranking.sync(l),l},toggleLike:async(t,e)=>{const i=ye.users.getByUsername(t);if(!i)throw new Error("Alvo no encontrado");const s=[...i.likedBy||[]],l=s.indexOf(e);return l>-1?s.splice(l,1):s.push(e),await ye.users.update(t,{likedBy:s,likes:s.length})},toggleFollow:async(t,e)=>{const i=ye.users.getByUsername(t),s=ye.users.getByUsername(e);if(!i||!s)return;const l=[...i.followers||[]],a=[...s.following||[]],c=l.indexOf(e);c>-1?(l.splice(c,1),a.splice(a.indexOf(t),1)):(l.push(e),a.push(t)),await ye.users.update(t,{followers:l}),await ye.users.update(e,{following:a})},toggleFriend:async(t,e)=>{const i=ye.users.getByUsername(t),s=ye.users.getByUsername(e);if(!i||!s)return;const l=[...i.friends||[]],a=[...s.friends||[]],c=l.indexOf(e);c>-1?(l.splice(c,1),a.splice(a.indexOf(t),1)):(l.push(e),a.push(t)),await ye.users.update(t,{friends:l}),await ye.users.update(e,{friends:a})}},ranking:{sync:async t=>{let e=JSON.parse(localStorage.getItem(bt.RANKING)||"[]");const i=e.findIndex(l=>l.name===t.username),s={id:t.username,name:t.username,score:t.highScore,victoryPoints:t.victoryPoints,date:new Date().toISOString(),avatar:t.avatar,level:t.level,rankTitle:t.username,maxLevelReached:t.maxLevelReached};i>-1?e[i]=s:e.push(s),localStorage.setItem(bt.RANKING,JSON.stringify(e)),await Zr(`ranking/${t.username}`,s)},getTop:()=>JSON.parse(localStorage.getItem(bt.RANKING)||"[]")},feedback:{getAll:()=>JSON.parse(localStorage.getItem(bt.FEEDBACK)||"[]"),submit:async t=>{const e=ye.feedback.getAll(),i={id:Math.random().toString(36).substring(2,9),username:t.username||"ANON",type:t.type||"BUG",description:t.description||"",timestamp:new Date().toISOString(),status:"PENDING"};return e.push(i),localStorage.setItem(bt.FEEDBACK,JSON.stringify(e)),await Zr(`feedback/${i.id}`,i),i}},gameState:{save:t=>localStorage.setItem(bt.GAME_STATE,JSON.stringify(t)),get:()=>{const t=localStorage.getItem(bt.GAME_STATE);return t?JSON.parse(t):null},clear:()=>localStorage.removeItem(bt.GAME_STATE)},session:{set:t=>localStorage.setItem(bt.SESSION,JSON.stringify(t)),get:()=>{const t=localStorage.getItem(bt.SESSION);return t?JSON.parse(t):null},clear:()=>{localStorage.removeItem(bt.SESSION),localStorage.removeItem(bt.GAME_STATE)}}},AR=({onSuccess:t})=>{const[e,i]=de.useState(!0),[s,l]=de.useState(""),[a,c]=de.useState(""),[h,g]=de.useState(""),[m,v]=de.useState(!1),_=async E=>{E.preventDefault(),g(""),v(!0);try{if(s.length<3||a.length<4)throw new Error("Mnimo: Nome 3 carac., Senha 4 carac.");const x=ye.users.getAll();if(e){const N=x.find(D=>D.username===s&&D.password===a);if(N)t(N);else throw new Error("Acesso negado: Credenciais invlidas.")}else{if(x.find(D=>D.username===s))throw new Error("Codinome j registrado por outro operador.");{const D=await ye.users.register({username:s,password:a});t(D)}}}catch(x){g(x.message)}finally{v(!1)}};return C.jsxs("div",{className:"z-20 w-[92%] max-w-md p-8 rounded-3xl bg-zinc-900/90 backdrop-blur-2xl border border-zinc-800 shadow-[0_0_60px_rgba(0,0,0,0.8)] flex flex-col items-center animate-in fade-in slide-in-from-bottom-6 duration-500",children:[C.jsxs("div",{className:"mb-8 text-center",children:[C.jsx("div",{className:"w-16 h-16 bg-emerald-500/10 rounded-2xl flex items-center justify-center border border-emerald-500/20 mb-4 mx-auto shadow-[0_0_20px_rgba(16,185,129,0.2)]",children:C.jsx("i",{className:"fas fa-terminal text-2xl text-emerald-500"})}),C.jsx("h1",{className:"text-3xl font-orbitron font-black text-white tracking-tighter uppercase",children:e?"Login Operador":"Novo Registro"}),C.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[C.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),C.jsx("p",{className:"text-[10px] text-zinc-500 font-mono tracking-widest uppercase",children:"Identificao de Combate"})]})]}),C.jsxs("form",{onSubmit:_,className:"w-full space-y-6",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-[10px] text-zinc-500 font-black uppercase ml-1",children:"Codinome"}),C.jsx("input",{type:"text",value:s,disabled:m,onChange:E=>l(E.target.value.toUpperCase()),className:"w-full bg-black/40 border border-zinc-800 rounded-xl p-4 text-emerald-400 font-mono focus:outline-none focus:border-emerald-500/50 transition-all uppercase placeholder:text-zinc-800 disabled:opacity-50",placeholder:"EX: GHOST_UNIT",required:!0})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-[10px] text-zinc-500 font-black uppercase ml-1",children:"Senha Neural"}),C.jsx("input",{type:"password",value:a,disabled:m,onChange:E=>c(E.target.value),className:"w-full bg-black/40 border border-zinc-800 rounded-xl p-4 text-emerald-400 font-mono focus:outline-none focus:border-emerald-500/50 transition-all placeholder:text-zinc-800 disabled:opacity-50",placeholder:"",required:!0})]}),h&&C.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500 text-[9px] font-black uppercase text-center animate-pulse",children:[C.jsx("i",{className:"fas fa-shield-virus mr-2"})," ",h]}),C.jsx("button",{type:"submit",disabled:m,className:"w-full py-4 bg-emerald-600 hover:bg-emerald-500 text-white font-orbitron font-black rounded-xl transition-all shadow-[0_15px_30px_rgba(16,185,129,0.2)] active:scale-95 uppercase tracking-widest flex items-center justify-center gap-3",children:m?C.jsxs(C.Fragment,{children:[C.jsx("i",{className:"fas fa-sync-alt animate-spin"})," Processando..."]}):C.jsx(C.Fragment,{children:e?"Autenticar":"Finalizar Registro"})})]}),C.jsx("button",{onClick:()=>{i(!e),g("")},className:"mt-8 text-[10px] text-zinc-500 hover:text-emerald-500 transition-colors uppercase font-black tracking-widest",children:e?"Criar nova conta de operador":"Voltar para autenticao"})]})},Wy=({user:t,viewer:e,onUpdate:i,onBack:s})=>{var X,se,te,Y;const[l,a]=de.useState(t),[c,h]=de.useState(!1),[g,m]=de.useState(!1),v=!e||e.username===l.username,_=qa(l.level||1),E=Al(l.level||1),x=(l.xp||0)/E*100,N=de.useRef(null);de.useEffect(()=>{a(t)},[t]);const D=async ne=>{if(!(!e||c)){h(!0);try{if(ne==="LIKE"){const M=await ye.users.toggleLike(l.username,e.username);a(M),i(M)}else if(ne==="FOLLOW"){await ye.users.toggleFollow(l.username,e.username);const M=ye.users.getByUsername(l.username);M&&(a(M),i(M))}else if(ne==="FRIEND"){await ye.users.toggleFriend(l.username,e.username);const M=ye.users.getByUsername(l.username);M&&(a(M),i(M))}}catch(M){console.error("Erro na ao social:",M)}finally{h(!1)}}},U=e?(l.likedBy||[]).includes(e.username):!1,G=e?(l.followers||[]).includes(e.username):!1,K=e?(l.friends||[]).includes(e.username):!1,F=async(ne,M)=>{try{const J={...l,[ne]:M};await i(J),a(J)}catch(J){console.error(J)}};return C.jsxs("div",{className:"z-20 w-[96%] max-w-2xl h-[94dvh] flex flex-col p-4 sm:p-10 rounded-[2.5rem] bg-zinc-950 border border-zinc-900 shadow-[0_0_150px_rgba(0,0,0,1)] animate-in fade-in zoom-in duration-300 relative overflow-hidden",children:[C.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-[2px] bg-gradient-to-r from-transparent via-emerald-500/30 to-transparent"}),g&&C.jsxs("div",{className:"absolute inset-0 z-[60] bg-black/95 backdrop-blur-xl p-4 sm:p-6 flex flex-col animate-in fade-in zoom-in duration-300",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[C.jsx("h3",{className:"text-lg sm:text-xl font-orbitron font-black text-amber-500 italic uppercase",children:"Hierarquia Militar"}),C.jsx("button",{onClick:()=>m(!1),className:"w-10 h-10 bg-zinc-900 rounded-xl text-white border border-zinc-800 transition-transform active:scale-90",children:C.jsx("i",{className:"fas fa-times"})})]}),C.jsx("div",{className:"flex-1 overflow-y-auto pr-1 custom-scrollbar space-y-2 sm:space-y-3 pb-6",children:aa.map((ne,M)=>C.jsxs("div",{className:`flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl sm:rounded-2xl border ${l.level>=ne.minLevel?"bg-zinc-900 border-zinc-700":"bg-zinc-950/50 border-zinc-900 opacity-40"}`,children:[C.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 shrink-0 bg-gradient-to-br ${ne.badgeBg} rounded-xl flex items-center justify-center text-lg sm:text-xl text-white border-2 border-white/10 shadow-lg`,children:C.jsx("i",{className:`fas ${ne.icon}`})}),C.jsxs("div",{className:"flex flex-col flex-1",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("span",{className:`text-[10px] sm:text-[11px] font-black uppercase ${ne.color}`,children:ne.title}),C.jsxs("span",{className:"text-[8px] sm:text-[9px] font-mono text-zinc-500",children:["LV ",ne.minLevel,"+"]})]}),l.level>=ne.minLevel&&C.jsx("span",{className:"text-[7px] text-emerald-500 font-black uppercase tracking-widest mt-0.5 sm:mt-1",children:"ALCANADO"})]})]},M))}),C.jsx("button",{onClick:()=>m(!1),className:"w-full py-4 bg-zinc-800 text-white rounded-xl sm:rounded-2xl font-black uppercase text-[10px] tracking-widest mt-4 active:scale-95 transition-transform",children:"VOLTAR"})]}),C.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6 shrink-0 z-10 pt-2 sm:pt-4",children:[C.jsxs("div",{className:"flex flex-col",children:[C.jsxs("h2",{className:"text-xl sm:text-3xl font-orbitron font-black text-white flex items-center gap-2 italic leading-none uppercase",children:[C.jsx("span",{className:"text-emerald-500",children:"Dossi"})," ",v?"Militar":"Operador"]}),C.jsxs("div",{className:"bg-zinc-900 px-2 py-0.5 rounded-lg border border-zinc-800 mt-2 inline-block self-start font-mono text-[8px] text-zinc-500 uppercase tracking-widest",children:["ID_",l.username]})]}),C.jsx("button",{onClick:s,className:"w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center bg-zinc-900 rounded-2xl text-zinc-500 hover:text-white transition-all border border-zinc-800 active:scale-90 shadow-lg",children:C.jsx("i",{className:"fas fa-times text-sm"})})]}),C.jsx("div",{className:"flex-1 overflow-y-auto pr-1 custom-scrollbar pb-8 z-10",children:C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsx("div",{className:"relative mb-6 sm:mb-8 group mt-2",children:C.jsxs("div",{className:"w-28 h-28 sm:w-48 sm:h-48 relative",children:[C.jsx("div",{className:`absolute -inset-4 sm:-inset-6 bg-gradient-to-br ${_.badgeBg} opacity-10 blur-[60px] rounded-full`}),C.jsx("img",{src:l.avatar,className:`w-full h-full rounded-[2rem] sm:rounded-[2.5rem] bg-zinc-900 border-4 ${_.borderColor.replace("border-","border-opacity-60 border-")} shadow-2xl object-cover relative z-10 transition-transform group-hover:scale-[1.02] duration-500`}),C.jsxs("div",{className:"absolute -top-2 -left-2 bg-zinc-950 text-emerald-400 text-[8px] sm:text-[10px] px-2 py-0.5 sm:px-3 sm:py-1 rounded-xl border border-emerald-500/30 font-black shadow-2xl z-20 font-orbitron italic",children:["LV ",l.level]}),v&&C.jsx("button",{onClick:()=>{var ne;return(ne=N.current)==null?void 0:ne.click()},className:"absolute bottom-1 right-1 w-8 h-8 sm:w-10 sm:h-10 bg-black/80 backdrop-blur-xl rounded-xl flex items-center justify-center text-white border border-white/10 z-30 shadow-2xl active:scale-90 transition-all hover:bg-emerald-600",children:C.jsx("i",{className:"fas fa-camera text-[10px]"})})]})}),C.jsxs("div",{className:"w-full max-w-md mb-6 flex flex-col gap-4 px-2",children:[C.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[C.jsxs("div",{className:`p-2 sm:p-3 rounded-2xl bg-zinc-900/50 border border-zinc-800 flex flex-col items-center text-center transition-all ${l.likes>0?"border-amber-500/30":""}`,children:[C.jsx("i",{className:`fas fa-star text-[10px] mb-1 ${U?"text-amber-500 animate-pulse":"text-zinc-600"}`}),C.jsx("span",{className:"text-sm sm:text-lg font-orbitron font-black text-white leading-none",children:l.likes||0}),C.jsx("span",{className:"text-[6px] sm:text-[7px] text-zinc-500 font-black uppercase tracking-widest mt-1 leading-none",children:"Reputao"})]}),C.jsxs("div",{className:`p-2 sm:p-3 rounded-2xl bg-zinc-900/50 border border-zinc-800 flex flex-col items-center text-center transition-all ${((X=l.followers)==null?void 0:X.length)>0?"border-emerald-500/30":""}`,children:[C.jsx("i",{className:`fas fa-satellite-dish text-[10px] mb-1 ${G?"text-emerald-500 animate-pulse":"text-zinc-600"}`}),C.jsx("span",{className:"text-sm sm:text-lg font-orbitron font-black text-white leading-none",children:((se=l.followers)==null?void 0:se.length)||0}),C.jsx("span",{className:"text-[6px] sm:text-[7px] text-zinc-500 font-black uppercase tracking-widest mt-1 leading-none",children:"Seguidores"})]}),C.jsxs("div",{className:`p-2 sm:p-3 rounded-2xl bg-zinc-900/50 border border-zinc-800 flex flex-col items-center text-center transition-all ${((te=l.friends)==null?void 0:te.length)>0?"border-blue-500/30":""}`,children:[C.jsx("i",{className:`fas fa-users text-[10px] mb-1 ${K?"text-blue-500 animate-pulse":"text-zinc-600"}`}),C.jsx("span",{className:"text-sm sm:text-lg font-orbitron font-black text-white leading-none",children:((Y=l.friends)==null?void 0:Y.length)||0}),C.jsx("span",{className:"text-[6px] sm:text-[7px] text-zinc-500 font-black uppercase tracking-widest mt-1 leading-none",children:"Unidade"})]})]}),!v&&C.jsxs("div",{className:"flex gap-2 w-full animate-in slide-in-from-bottom-2 duration-500 mt-2",children:[C.jsxs("button",{onClick:()=>D("LIKE"),disabled:c,className:`flex-1 py-3 rounded-xl border font-black text-[7px] sm:text-[8px] uppercase tracking-tighter transition-all flex flex-col items-center justify-center gap-1 active:scale-95 ${U?"bg-amber-500 border-amber-400 text-zinc-950 shadow-lg shadow-amber-500/20":"bg-zinc-900 border-zinc-800 text-zinc-500 hover:text-amber-500"}`,children:[C.jsx("i",{className:"fas fa-star"}),U?"VALORIZADO":"PRESTIGIAR"]}),C.jsxs("button",{onClick:()=>D("FOLLOW"),disabled:c,className:`flex-1 py-3 rounded-xl border font-black text-[7px] sm:text-[8px] uppercase tracking-tighter transition-all flex flex-col items-center justify-center gap-1 active:scale-95 ${G?"bg-emerald-500 border-emerald-400 text-zinc-950 shadow-lg shadow-emerald-500/20":"bg-zinc-900 border-zinc-800 text-zinc-500 hover:text-emerald-500"}`,children:[C.jsx("i",{className:"fas fa-satellite-dish"}),G?"MONITORANDO":"ALISTAR"]}),C.jsxs("button",{onClick:()=>D("FRIEND"),disabled:c,className:`flex-1 py-3 rounded-xl border font-black text-[7px] sm:text-[8px] uppercase tracking-tighter transition-all flex flex-col items-center justify-center gap-1 active:scale-95 ${K?"bg-blue-500 border-blue-400 text-zinc-950 shadow-lg shadow-blue-500/20":"bg-zinc-900 border-zinc-800 text-zinc-500 hover:text-blue-500"}`,children:[C.jsx("i",{className:"fas fa-users"}),K?"VINCULADO":"UNIDADE"]})]})]}),C.jsx("div",{className:"w-full max-w-[420px] mb-6 relative cursor-pointer active:scale-95 transition-transform group px-2",onClick:()=>m(!0),children:C.jsxs("div",{className:`relative bg-zinc-900/50 border-2 ${_.borderColor} rounded-[1.5rem] sm:rounded-[2rem] p-4 sm:p-6 flex items-center gap-4 sm:gap-6 shadow-2xl ${_.shadowColor}`,children:[C.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 shrink-0 bg-gradient-to-br ${_.badgeBg} rounded-xl flex items-center justify-center text-xl sm:text-2xl text-white border-2 border-white/20 shadow-xl`,children:C.jsx("i",{className:`fas ${_.icon}`})}),C.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[C.jsx("span",{className:"text-[7px] text-zinc-500 font-black uppercase tracking-[0.4em] mb-1",children:"Status de Carreira"}),C.jsx("h4",{className:`text-xs sm:text-lg font-orbitron font-black uppercase truncate leading-none ${_.color} italic`,children:_.title}),C.jsx("span",{className:"text-[6px] text-zinc-600 font-mono mt-1 underline uppercase tracking-widest opacity-60",children:"Hierarquia Global"})]})]})}),C.jsx("h3",{className:"text-xl sm:text-4xl font-orbitron font-black text-white mb-4 tracking-tighter uppercase text-center px-4 leading-none italic break-all",children:l.username}),C.jsxs("div",{className:"w-full max-w-md bg-zinc-900/40 p-4 sm:p-5 rounded-[1.5rem] sm:rounded-[2rem] border border-zinc-800 shadow-inner relative mb-6 mx-2",children:[C.jsxs("h4",{className:"text-[8px] font-black text-zinc-600 uppercase tracking-widest mb-2 flex items-center gap-2",children:[C.jsx("i",{className:"fas fa-quote-left text-emerald-500/40 text-[10px]"})," Grito de Guerra"]}),C.jsxs("p",{className:"text-xs sm:text-sm font-mono italic text-emerald-500/90 leading-relaxed text-center",children:['"',l.bio||"Tanque carregado e pronto para o engajamento.",'"']})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 w-full max-w-md px-4",children:[C.jsxs("div",{className:"bg-zinc-900/40 border border-zinc-800 rounded-xl p-3 text-center",children:[C.jsx("span",{className:"text-[7px] text-zinc-600 uppercase font-black block mb-1 tracking-widest leading-none",children:"Gnero"}),C.jsx("span",{className:"text-white font-black text-[10px] sm:text-xs uppercase",children:l.gender==="M"?"Masc.":l.gender==="F"?"Fem.":"Outro"})]}),C.jsxs("div",{className:"bg-zinc-900/40 border border-zinc-800 rounded-xl p-3 text-center",children:[C.jsx("span",{className:"text-[7px] text-zinc-600 uppercase font-black block mb-1 tracking-widest leading-none",children:"Idade"}),C.jsxs("span",{className:"text-white font-black text-[10px] sm:text-xs uppercase",children:[l.age||"20"," ANOS"]})]})]}),C.jsxs("div",{className:"w-full max-w-md space-y-2 px-6 mb-8",children:[C.jsxs("div",{className:"flex justify-between items-center px-1",children:[C.jsx("span",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-[0.3em]",children:"Especialidade"}),C.jsxs("span",{className:"text-[10px] text-emerald-500 font-mono font-bold",children:[Math.floor(x),"%"]})]}),C.jsx("div",{className:"w-full h-2 bg-zinc-900 rounded-full overflow-hidden border border-zinc-800 p-[1px]",children:C.jsx("div",{className:"h-full bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.5)] transition-all duration-1000 rounded-full",style:{width:`${x}%`}})})]})]})}),C.jsxs("div",{className:"mt-auto pt-4 border-t border-zinc-900 shrink-0 z-10 bg-zinc-950 flex flex-col items-center",children:[C.jsx("button",{onClick:s,className:"w-full max-w-sm py-4 bg-zinc-900 hover:bg-zinc-800 text-white font-orbitron font-black rounded-2xl uppercase text-[10px] sm:text-[12px] tracking-[0.4em] border border-zinc-800 active:scale-95 transition-all shadow-2xl leading-none",children:"ENCERRAR PROTOCOLO"}),C.jsx("p",{className:"text-[6px] text-zinc-800 font-black uppercase tracking-[1em] mt-3 mb-1",children:"NMESIS v3.4.2"})]}),C.jsx("input",{type:"file",ref:N,onChange:ne=>{var J;const M=(J=ne.target.files)==null?void 0:J[0];if(M&&M.size<=1024*1024){const ae=new FileReader;ae.onload=ie=>{var re;return F("avatar",(re=ie.target)==null?void 0:re.result)},ae.readAsDataURL(M)}},accept:"image/*",className:"hidden"})]})};var bR={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let NR,RR;function wR(){return{geminiUrl:NR,vertexUrl:RR}}function IR(t,e,i,s){var l,a;if(!(t!=null&&t.baseUrl)){const c=wR();return e?(l=c.vertexUrl)!==null&&l!==void 0?l:i:(a=c.geminiUrl)!==null&&a!==void 0?a:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $n{}function Z(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(s,l)=>{if(Object.prototype.hasOwnProperty.call(e,l)){const a=e[l];return a!=null?String(a):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function d(t,e,i){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(i))t[h]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(i))for(let m=0;m<g.length;m++){const v=g[m];d(v,e.slice(a+1),i[m])}else for(const m of g)d(m,e.slice(a+1),i)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];d(g[0],e.slice(a+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const s=e[e.length-1],l=t[s];if(l!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===l)return;if(typeof l=="object"&&typeof i=="object"&&l!==null&&i!==null)Object.assign(l,i);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[s]=i}function f(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return i;const l=e[s];if(l.endsWith("[]")){const a=l.slice(0,-2);if(a in t){const c=t[a];return Array.isArray(c)?c.map(h=>f(h,e.slice(s+1),i)):i}else return i}else t=t[l]}return t}catch(s){if(s instanceof TypeError)return i;throw s}}function MR(t,e){for(const[i,s]of Object.entries(e)){const l=i.split("."),a=s.split("."),c=new Set;let h=-1;for(let g=0;g<l.length;g++)if(l[g]==="*"){h=g;break}if(h!==-1&&a.length>h)for(let g=h;g<a.length;g++){const m=a[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}Jf(t,l,a,0,c)}}function Jf(t,e,i,s,l){if(s>=e.length||typeof t!="object"||t===null)return;const a=e[s];if(a.endsWith("[]")){const c=a.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const g of h[c])Jf(g,e,i,s+1,l)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(m=>!m.startsWith("_")&&!l.has(m)),g={};for(const m of h)g[m]=c[m];for(const[m,v]of Object.entries(g)){const _=[];for(const E of i.slice(s))E==="*"?_.push(m):_.push(E);d(c,_,v)}for(const m of h)delete c[m]}}else{const c=t;a in c&&Jf(c[a],e,i,s+1,l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DR(t){const e={},i=f(t,["operationName"]);i!=null&&d(e,["operationName"],i);const s=f(t,["resourceName"]);return s!=null&&d(e,["_url","resourceName"],s),e}function UR(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata"]);s!=null&&d(e,["metadata"],s);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],kR(c)),e}function LR(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata"]);s!=null&&d(e,["metadata"],s);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],PR(c)),e}function kR(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>OR(c))),d(e,["generatedVideos"],a)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&d(e,["raiMediaFilteredReasons"],l),e}function PR(t){const e={},i=f(t,["videos"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>zR(c))),d(e,["generatedVideos"],a)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&d(e,["raiMediaFilteredReasons"],l),e}function OR(t){const e={},i=f(t,["video"]);return i!=null&&d(e,["video"],FR(i)),e}function zR(t){const e={},i=f(t,["_self"]);return i!=null&&d(e,["video"],YR(i)),e}function GR(t){const e={},i=f(t,["operationName"]);return i!=null&&d(e,["_url","operationName"],i),e}function HR(t){const e={},i=f(t,["operationName"]);return i!=null&&d(e,["_url","operationName"],i),e}function BR(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata"]);s!=null&&d(e,["metadata"],s);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],VR(c)),e}function VR(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["parent"]);s!=null&&d(e,["parent"],s);const l=f(t,["documentName"]);return l!=null&&d(e,["documentName"],l),e}function aE(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata"]);s!=null&&d(e,["metadata"],s);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],qR(c)),e}function qR(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["parent"]);s!=null&&d(e,["parent"],s);const l=f(t,["documentName"]);return l!=null&&d(e,["documentName"],l),e}function FR(t){const e={},i=f(t,["uri"]);i!=null&&d(e,["uri"],i);const s=f(t,["encodedVideo"]);s!=null&&d(e,["videoBytes"],kd(s));const l=f(t,["encoding"]);return l!=null&&d(e,["mimeType"],l),e}function YR(t){const e={},i=f(t,["gcsUri"]);i!=null&&d(e,["uri"],i);const s=f(t,["bytesBase64Encoded"]);s!=null&&d(e,["videoBytes"],kd(s));const l=f(t,["mimeType"]);return l!=null&&d(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Zy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Zy||(Zy={}));var jy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(jy||(jy={}));var e0;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(e0||(e0={}));var Ci;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ci||(Ci={}));var t0;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(t0||(t0={}));var n0;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(n0||(n0={}));var i0;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(i0||(i0={}));var o0;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(o0||(o0={}));var s0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(s0||(s0={}));var l0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(l0||(l0={}));var r0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(r0||(r0={}));var a0;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(a0||(a0={}));var u0;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(u0||(u0={}));var c0;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(c0||(c0={}));var f0;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(f0||(f0={}));var d0;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(d0||(d0={}));var h0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(h0||(h0={}));var p0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(p0||(p0={}));var m0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(m0||(m0={}));var g0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(g0||(g0={}));var y0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(y0||(y0={}));var Ta;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ta||(Ta={}));var v0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(v0||(v0={}));var _0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(_0||(_0={}));var E0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(E0||(E0={}));var Kf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Kf||(Kf={}));var S0;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(S0||(S0={}));var T0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(T0||(T0={}));var C0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(C0||(C0={}));var x0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(x0||(x0={}));var A0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(A0||(A0={}));var b0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(b0||(b0={}));var N0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(N0||(N0={}));var R0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(R0||(R0={}));var w0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(w0||(w0={}));var I0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(I0||(I0={}));var M0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(M0||(M0={}));var D0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(D0||(D0={}));var U0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(U0||(U0={}));var L0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(L0||(L0={}));var k0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(k0||(k0={}));var P0;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(P0||(P0={}));var O0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(O0||(O0={}));var z0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(z0||(z0={}));var G0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(G0||(G0={}));var H0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(H0||(H0={}));var B0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(B0||(B0={}));var V0;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(V0||(V0={}));var q0;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(q0||(q0={}));var F0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(F0||(F0={}));var Y0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Y0||(Y0={}));var J0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(J0||(J0={}));var K0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(K0||(K0={}));var X0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(X0||(X0={}));var Q0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Q0||(Q0={}));var $o;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})($o||($o={}));class Xf{constructor(e){const i={};for(const s of e.headers.entries())i[s[0]]=s[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class dl{get text(){var e,i,s,l,a,c,h,g;if(((l=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const E of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[x,N]of Object.entries(E))x!=="text"&&x!=="thought"&&x!=="thoughtSignature"&&(N!==null||N!==void 0)&&_.push(x);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;v=!0,m+=E.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,i,s,l,a,c,h,g;if(((l=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[E,x]of Object.entries(_))E!=="inlineData"&&(x!==null||x!==void 0)&&v.push(E);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,i,s,l,a,c,h,g;if(((l=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,i,s,l,a,c,h,g,m;if(((l=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,i,s,l,a,c,h,g,m;if(((l=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class $0{}class W0{}class JR{}class KR{}class XR{}class QR{}class Z0{}class j0{}class ev{}class $R{}class Ca{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Ca;let l;const a=e;return i?l=LR(a):l=UR(a),Object.assign(s,l),s}}class tv{}class nv{}class iv{}class ov{}class WR{}class ZR{}class jR{}class Pd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Pd,a=BR(e);return Object.assign(s,a),s}}class ew{}class tw{}class nw{}class sv{}class iw{get text(){var e,i,s;let l="",a=!1;const c=[];for(const h of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&m!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,l+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?l:void 0}get data(){var e,i,s;let l="";const a=[];for(const c of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(l+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class ow{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Od{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Od,a=aE(e);return Object.assign(s,a),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Me(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function uE(t,e){const i=Me(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function cE(t){return Array.isArray(t)?t.map(e=>xa(e)):[xa(t)]}function xa(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function fE(t){const e=xa(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function dE(t){const e=xa(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function lv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function hE(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>lv(e)):[lv(t)]}function Qf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function rv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function av(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ct(t){if(t==null)throw new Error("ContentUnion is required");return Qf(t)?t:{role:"user",parts:hE(t)}}function zd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const s=Ct(i);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const i=Ct(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>Ct(i)):[Ct(e)]}function ln(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(rv(t)||av(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ct(t)]}const e=[],i=[],s=Qf(t[0]);for(const l of t){const a=Qf(l);if(a!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(l);else{if(rv(l)||av(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(l)}}return s||e.push({role:"user",parts:hE(i)}),e}function sw(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(s=>s!=="null");if(i.length===1)e.type=Object.values(Ci).includes(i[0].toUpperCase())?i[0].toUpperCase():Ci.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of i)e.anyOf.push({type:Object.values(Ci).includes(s.toUpperCase())?s.toUpperCase():Ci.TYPE_UNSPECIFIED})}}function ts(t){const e={},i=["items"],s=["anyOf"],l=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&sw(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Ci).includes(h.toUpperCase())?h.toUpperCase():Ci.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=ts(h);else if(s.includes(c)){const g=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}g.push(ts(m))}e[c]=g}else if(l.includes(c)){const g={};for(const[m,v]of Object.entries(h))g[m]=ts(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function Gd(t){return ts(t)}function Hd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Bd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function cs(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ts(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ts(e.response));return t}function fs(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function lw(t,e,i,s=1){const l=!e.startsWith(`${i}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:l?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:l?`${i}/${e}`:e}function Wn(t,e){if(typeof e!="string")throw new Error("name must be a string");return lw(t,e,"cachedContents")}function pE(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ri(t){return kd(t)}function rw(t){return t!=null&&typeof t=="object"&&"name"in t}function aw(t){return t!=null&&typeof t=="object"&&"video"in t}function uw(t){return t!=null&&typeof t=="object"&&"uri"in t}function mE(t){var e;let i;if(rw(t)&&(i=t.name),!(uw(t)&&(i=t.uri,i===void 0))&&!(aw(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const l=i.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${i}`);i=l[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function gE(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function yE(t){for(const e of["models","tunedModels","publisherModels"])if(cw(t,e))return t[e];return[]}function cw(t,e){return t!==null&&typeof t=="object"&&e in t}function fw(t,e={}){const i=t,s={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(s.responseJsonSchema=i.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function dw(t,e={}){const i=[],s=new Set;for(const l of t){const a=l.name;if(s.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);s.add(a);const c=fw(l,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function vE(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const s=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,l=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(l>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||l!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function hw(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function _E(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const l=i.inlinedResponses;if(!Array.isArray(l)||l.length===0)return t;let a=!1;for(const c of l){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ds(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function EE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pw(t){const e={},i=f(t,["responsesFile"]);i!=null&&d(e,["fileName"],i);const s=f(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>Xw(c))),d(e,["inlinedResponses"],a)}const l=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["inlinedEmbedContentResponses"],a)}return e}function mw(t){const e={},i=f(t,["predictionsFormat"]);i!=null&&d(e,["format"],i);const s=f(t,["gcsDestination","outputUriPrefix"]);s!=null&&d(e,["gcsUri"],s);const l=f(t,["bigqueryDestination","outputUri"]);return l!=null&&d(e,["bigqueryUri"],l),e}function gw(t){const e={},i=f(t,["format"]);i!=null&&d(e,["predictionsFormat"],i);const s=f(t,["gcsUri"]);s!=null&&d(e,["gcsDestination","outputUriPrefix"],s);const l=f(t,["bigqueryUri"]);if(l!=null&&d(e,["bigqueryDestination","outputUri"],l),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function la(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata","displayName"]);s!=null&&d(e,["displayName"],s);const l=f(t,["metadata","state"]);l!=null&&d(e,["state"],EE(l));const a=f(t,["metadata","createTime"]);a!=null&&d(e,["createTime"],a);const c=f(t,["metadata","endTime"]);c!=null&&d(e,["endTime"],c);const h=f(t,["metadata","updateTime"]);h!=null&&d(e,["updateTime"],h);const g=f(t,["metadata","model"]);g!=null&&d(e,["model"],g);const m=f(t,["metadata","output"]);return m!=null&&d(e,["dest"],pw(_E(m))),e}function $f(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["displayName"]);s!=null&&d(e,["displayName"],s);const l=f(t,["state"]);l!=null&&d(e,["state"],EE(l));const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["createTime"]);c!=null&&d(e,["createTime"],c);const h=f(t,["startTime"]);h!=null&&d(e,["startTime"],h);const g=f(t,["endTime"]);g!=null&&d(e,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&d(e,["updateTime"],m);const v=f(t,["model"]);v!=null&&d(e,["model"],v);const _=f(t,["inputConfig"]);_!=null&&d(e,["src"],yw(_));const E=f(t,["outputConfig"]);E!=null&&d(e,["dest"],mw(_E(E)));const x=f(t,["completionStats"]);return x!=null&&d(e,["completionStats"],x),e}function yw(t){const e={},i=f(t,["instancesFormat"]);i!=null&&d(e,["format"],i);const s=f(t,["gcsSource","uris"]);s!=null&&d(e,["gcsUri"],s);const l=f(t,["bigquerySource","inputUri"]);return l!=null&&d(e,["bigqueryUri"],l),e}function vw(t,e){const i={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&d(i,["fileName"],s);const l=f(e,["inlinedRequests"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>Kw(t,c))),d(i,["requests","requests"],a)}return i}function _w(t){const e={},i=f(t,["format"]);i!=null&&d(e,["instancesFormat"],i);const s=f(t,["gcsUri"]);s!=null&&d(e,["gcsSource","uris"],s);const l=f(t,["bigqueryUri"]);if(l!=null&&d(e,["bigquerySource","inputUri"],l),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Ew(t){const e={},i=f(t,["data"]);if(i!=null&&d(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function Sw(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],ds(t,s)),i}function Tw(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],ds(t,s)),i}function Cw(t){const e={},i=f(t,["content"]);i!=null&&d(e,["content"],i);const s=f(t,["citationMetadata"]);s!=null&&d(e,["citationMetadata"],xw(s));const l=f(t,["tokenCount"]);l!=null&&d(e,["tokenCount"],l);const a=f(t,["finishReason"]);a!=null&&d(e,["finishReason"],a);const c=f(t,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const h=f(t,["groundingMetadata"]);h!=null&&d(e,["groundingMetadata"],h);const g=f(t,["index"]);g!=null&&d(e,["index"],g);const m=f(t,["logprobsResult"]);m!=null&&d(e,["logprobsResult"],m);const v=f(t,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(x=>x)),d(e,["safetyRatings"],E)}const _=f(t,["urlContextMetadata"]);return _!=null&&d(e,["urlContextMetadata"],_),e}function xw(t){const e={},i=f(t,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>l)),d(e,["citations"],s)}return e}function SE(t){const e={},i=f(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>t1(a))),d(e,["parts"],l)}const s=f(t,["role"]);return s!=null&&d(e,["role"],s),e}function Aw(t,e){const i={},s=f(t,["displayName"]);if(e!==void 0&&s!=null&&d(e,["batch","displayName"],s),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function bw(t,e){const i={},s=f(t,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const l=f(t,["dest"]);return e!==void 0&&l!=null&&d(e,["outputConfig"],gw(hw(l))),i}function uv(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["src"]);l!=null&&d(i,["batch","inputConfig"],vw(t,vE(t,l)));const a=f(e,["config"]);return a!=null&&Aw(a,i),i}function Nw(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["model"],Me(t,s));const l=f(e,["src"]);l!=null&&d(i,["inputConfig"],_w(vE(t,l)));const a=f(e,["config"]);return a!=null&&bw(a,i),i}function Rw(t,e){const i={},s=f(t,["displayName"]);return e!==void 0&&s!=null&&d(e,["batch","displayName"],s),i}function ww(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["src"]);l!=null&&d(i,["batch","inputConfig"],Pw(t,l));const a=f(e,["config"]);return a!=null&&Rw(a,i),i}function Iw(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],ds(t,s)),i}function Mw(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],ds(t,s)),i}function Dw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["name"]);s!=null&&d(e,["name"],s);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);return a!=null&&d(e,["error"],a),e}function Uw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["name"]);s!=null&&d(e,["name"],s);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);return a!=null&&d(e,["error"],a),e}function Lw(t,e){const i={},s=f(e,["contents"]);if(s!=null){let a=zd(t,s);Array.isArray(a)&&(a=a.map(c=>c)),d(i,["requests[]","request","content"],a)}const l=f(e,["config"]);return l!=null&&(d(i,["_self"],kw(l,i)),MR(i,{"requests[].*":"requests[].request.*"})),i}function kw(t,e){const i={},s=f(t,["taskType"]);e!==void 0&&s!=null&&d(e,["requests[]","taskType"],s);const l=f(t,["title"]);e!==void 0&&l!=null&&d(e,["requests[]","title"],l);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&d(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function Pw(t,e){const i={},s=f(e,["fileName"]);s!=null&&d(i,["file_name"],s);const l=f(e,["inlinedRequests"]);return l!=null&&d(i,["requests"],Lw(t,l)),i}function Ow(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function zw(t){const e={},i=f(t,["id"]);i!=null&&d(e,["id"],i);const s=f(t,["args"]);s!=null&&d(e,["args"],s);const l=f(t,["name"]);if(l!=null&&d(e,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Gw(t){const e={},i=f(t,["allowedFunctionNames"]);i!=null&&d(e,["allowedFunctionNames"],i);const s=f(t,["mode"]);if(s!=null&&d(e,["mode"],s),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Hw(t,e,i){const s={},l=f(e,["systemInstruction"]);i!==void 0&&l!=null&&d(i,["systemInstruction"],SE(Ct(l)));const a=f(e,["temperature"]);a!=null&&d(s,["temperature"],a);const c=f(e,["topP"]);c!=null&&d(s,["topP"],c);const h=f(e,["topK"]);h!=null&&d(s,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&d(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&d(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&d(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&d(s,["responseLogprobs"],_);const E=f(e,["logprobs"]);E!=null&&d(s,["logprobs"],E);const x=f(e,["presencePenalty"]);x!=null&&d(s,["presencePenalty"],x);const N=f(e,["frequencyPenalty"]);N!=null&&d(s,["frequencyPenalty"],N);const D=f(e,["seed"]);D!=null&&d(s,["seed"],D);const U=f(e,["responseMimeType"]);U!=null&&d(s,["responseMimeType"],U);const G=f(e,["responseSchema"]);G!=null&&d(s,["responseSchema"],Gd(G));const K=f(e,["responseJsonSchema"]);if(K!=null&&d(s,["responseJsonSchema"],K),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=f(e,["safetySettings"]);if(i!==void 0&&F!=null){let re=F;Array.isArray(re)&&(re=re.map(_e=>n1(_e))),d(i,["safetySettings"],re)}const X=f(e,["tools"]);if(i!==void 0&&X!=null){let re=fs(X);Array.isArray(re)&&(re=re.map(_e=>o1(cs(_e)))),d(i,["tools"],re)}const se=f(e,["toolConfig"]);if(i!==void 0&&se!=null&&d(i,["toolConfig"],i1(se)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const te=f(e,["cachedContent"]);i!==void 0&&te!=null&&d(i,["cachedContent"],Wn(t,te));const Y=f(e,["responseModalities"]);Y!=null&&d(s,["responseModalities"],Y);const ne=f(e,["mediaResolution"]);ne!=null&&d(s,["mediaResolution"],ne);const M=f(e,["speechConfig"]);if(M!=null&&d(s,["speechConfig"],Hd(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=f(e,["thinkingConfig"]);J!=null&&d(s,["thinkingConfig"],J);const ae=f(e,["imageConfig"]);ae!=null&&d(s,["imageConfig"],Jw(ae));const ie=f(e,["enableEnhancedCivicAnswers"]);return ie!=null&&d(s,["enableEnhancedCivicAnswers"],ie),s}function Bw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>Cw(m))),d(e,["candidates"],g)}const l=f(t,["modelVersion"]);l!=null&&d(e,["modelVersion"],l);const a=f(t,["promptFeedback"]);a!=null&&d(e,["promptFeedback"],a);const c=f(t,["responseId"]);c!=null&&d(e,["responseId"],c);const h=f(t,["usageMetadata"]);return h!=null&&d(e,["usageMetadata"],h),e}function Vw(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],ds(t,s)),i}function qw(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],ds(t,s)),i}function Fw(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function Yw(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function Jw(t){const e={},i=f(t,["aspectRatio"]);i!=null&&d(e,["aspectRatio"],i);const s=f(t,["imageSize"]);if(s!=null&&d(e,["imageSize"],s),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Kw(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["request","model"],Me(t,s));const l=f(e,["contents"]);if(l!=null){let h=ln(l);Array.isArray(h)&&(h=h.map(g=>SE(g))),d(i,["request","contents"],h)}const a=f(e,["metadata"]);a!=null&&d(i,["metadata"],a);const c=f(e,["config"]);return c!=null&&d(i,["request","generationConfig"],Hw(t,c,f(i,["request"],{}))),i}function Xw(t){const e={},i=f(t,["response"]);i!=null&&d(e,["response"],Bw(i));const s=f(t,["error"]);return s!=null&&d(e,["error"],s),e}function Qw(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const l=f(t,["pageToken"]);if(e!==void 0&&l!=null&&d(e,["_query","pageToken"],l),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function $w(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const a=f(t,["filter"]);return e!==void 0&&a!=null&&d(e,["_query","filter"],a),i}function Ww(t){const e={},i=f(t,["config"]);return i!=null&&Qw(i,e),e}function Zw(t){const e={},i=f(t,["config"]);return i!=null&&$w(i,e),e}function jw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const l=f(t,["operations"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>la(c))),d(e,["batchJobs"],a)}return e}function e1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const l=f(t,["batchPredictionJobs"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>$f(c))),d(e,["batchJobs"],a)}return e}function t1(t){const e={},i=f(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const s=f(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const l=f(t,["executableCode"]);l!=null&&d(e,["executableCode"],l);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],Ow(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],zw(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],Ew(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const _=f(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const E=f(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function n1(t){const e={},i=f(t,["category"]);if(i!=null&&d(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(t,["threshold"]);return s!=null&&d(e,["threshold"],s),e}function i1(t){const e={},i=f(t,["retrievalConfig"]);i!=null&&d(e,["retrievalConfig"],i);const s=f(t,["functionCallingConfig"]);return s!=null&&d(e,["functionCallingConfig"],Gw(s)),e}function o1(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&d(e,["fileSearch"],s);const l=f(t,["codeExecution"]);if(l!=null&&d(e,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(_=>_)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],Fw(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],Yw(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Xn||(Xn={}));class so{constructor(e,i,s,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,s,l)}init(e,i,s){var l,a;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(l=c.config)===null||l===void 0?void 0:l.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s1 extends $n{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new so(Xn.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=uv(this.apiClient,e),s=i._url,l=Z("{model}:batchGenerateContent",s),h=i.batch.inputConfig.requests,g=h.requests,m=[];for(const v of g){const _=Object.assign({},v);if(_.systemInstruction){const E=_.systemInstruction;delete _.systemInstruction;const x=_.request;x.systemInstruction=E,_.request=x}m.push(_)}return h.requests=m,delete i.config,delete i._url,delete i._query,{path:l,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const s=i?Object.assign({},i):{},l=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${l}`),s.dest===void 0){const a=this.getGcsUri(e),c=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?s.dest=`${a.slice(0,-6)}/dest`:s.dest=`${a}_dest_${l}`;else if(c)s.dest=`${c}_dest_${l}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Nw(this.apiClient,e);return h=Z("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>$f(v))}else{const m=uv(this.apiClient,e);return h=Z("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>la(v))}}async createEmbeddingsInternal(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ww(this.apiClient,e);return a=Z("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>la(g))}}async get(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=qw(this.apiClient,e);return h=Z("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>$f(v))}else{const m=Vw(this.apiClient,e);return h=Z("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>la(v))}}async cancel(e){var i,s,l,a;let c="",h={};if(this.apiClient.isVertexAI()){const g=Tw(this.apiClient,e);c=Z("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=Sw(this.apiClient,e);c=Z("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Zw(e);return h=Z("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=e1(v),E=new sv;return Object.assign(E,_),E})}else{const m=Ww(e);return h=Z("batches",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=jw(v),E=new sv;return Object.assign(E,_),E})}}async delete(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Mw(this.apiClient,e);return h=Z("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>Uw(v))}else{const m=Iw(this.apiClient,e);return h=Z("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>Dw(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l1(t){const e={},i=f(t,["data"]);if(i!=null&&d(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function cv(t){const e={},i=f(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>w1(a))),d(e,["parts"],l)}const s=f(t,["role"]);return s!=null&&d(e,["role"],s),e}function r1(t,e){const i={},s=f(t,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const l=f(t,["expireTime"]);e!==void 0&&l!=null&&d(e,["expireTime"],l);const a=f(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let v=ln(c);Array.isArray(v)&&(v=v.map(_=>cv(_))),d(e,["contents"],v)}const h=f(t,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],cv(Ct(h)));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(_=>M1(_))),d(e,["tools"],v)}const m=f(t,["toolConfig"]);if(e!==void 0&&m!=null&&d(e,["toolConfig"],I1(m)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function a1(t,e){const i={},s=f(t,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const l=f(t,["expireTime"]);e!==void 0&&l!=null&&d(e,["expireTime"],l);const a=f(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let _=ln(c);Array.isArray(_)&&(_=_.map(E=>E)),d(e,["contents"],_)}const h=f(t,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],Ct(h));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(E=>D1(E))),d(e,["tools"],_)}const m=f(t,["toolConfig"]);e!==void 0&&m!=null&&d(e,["toolConfig"],m);const v=f(t,["kmsKeyName"]);return e!==void 0&&v!=null&&d(e,["encryption_spec","kmsKeyName"],v),i}function u1(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["model"],uE(t,s));const l=f(e,["config"]);return l!=null&&r1(l,i),i}function c1(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["model"],uE(t,s));const l=f(e,["config"]);return l!=null&&a1(l,i),i}function f1(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Wn(t,s)),i}function d1(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Wn(t,s)),i}function h1(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function p1(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function m1(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function g1(t){const e={},i=f(t,["id"]);i!=null&&d(e,["id"],i);const s=f(t,["args"]);s!=null&&d(e,["args"],s);const l=f(t,["name"]);if(l!=null&&d(e,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function y1(t){const e={},i=f(t,["allowedFunctionNames"]);i!=null&&d(e,["allowedFunctionNames"],i);const s=f(t,["mode"]);if(s!=null&&d(e,["mode"],s),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function v1(t){const e={},i=f(t,["description"]);i!=null&&d(e,["description"],i);const s=f(t,["name"]);s!=null&&d(e,["name"],s);const l=f(t,["parameters"]);l!=null&&d(e,["parameters"],l);const a=f(t,["parametersJsonSchema"]);a!=null&&d(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&d(e,["response"],c);const h=f(t,["responseJsonSchema"]);if(h!=null&&d(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function _1(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Wn(t,s)),i}function E1(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Wn(t,s)),i}function S1(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function T1(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function C1(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const l=f(t,["pageToken"]);return e!==void 0&&l!=null&&d(e,["_query","pageToken"],l),i}function x1(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const l=f(t,["pageToken"]);return e!==void 0&&l!=null&&d(e,["_query","pageToken"],l),i}function A1(t){const e={},i=f(t,["config"]);return i!=null&&C1(i,e),e}function b1(t){const e={},i=f(t,["config"]);return i!=null&&x1(i,e),e}function N1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const l=f(t,["cachedContents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["cachedContents"],a)}return e}function R1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const l=f(t,["cachedContents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["cachedContents"],a)}return e}function w1(t){const e={},i=f(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const s=f(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const l=f(t,["executableCode"]);l!=null&&d(e,["executableCode"],l);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],m1(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],g1(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],l1(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const _=f(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const E=f(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function I1(t){const e={},i=f(t,["retrievalConfig"]);i!=null&&d(e,["retrievalConfig"],i);const s=f(t,["functionCallingConfig"]);return s!=null&&d(e,["functionCallingConfig"],y1(s)),e}function M1(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&d(e,["fileSearch"],s);const l=f(t,["codeExecution"]);if(l!=null&&d(e,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(_=>_)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],S1(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],T1(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function D1(t){const e={},i=f(t,["retrieval"]);i!=null&&d(e,["retrieval"],i);const s=f(t,["computerUse"]);if(s!=null&&d(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(t,["codeExecution"]);l!=null&&d(e,["codeExecution"],l);const a=f(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);const c=f(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(E=>v1(E))),d(e,["functionDeclarations"],_)}const h=f(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],h);const g=f(t,["googleSearch"]);g!=null&&d(e,["googleSearch"],g);const m=f(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const v=f(t,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function U1(t,e){const i={},s=f(t,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const l=f(t,["expireTime"]);return e!==void 0&&l!=null&&d(e,["expireTime"],l),i}function L1(t,e){const i={},s=f(t,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const l=f(t,["expireTime"]);return e!==void 0&&l!=null&&d(e,["expireTime"],l),i}function k1(t,e){const i={},s=f(e,["name"]);s!=null&&d(i,["_url","name"],Wn(t,s));const l=f(e,["config"]);return l!=null&&U1(l,i),i}function P1(t,e){const i={},s=f(e,["name"]);s!=null&&d(i,["_url","name"],Wn(t,s));const l=f(e,["config"]);return l!=null&&L1(l,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O1 extends $n{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new so(Xn.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(i),i)}async create(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=c1(this.apiClient,e);return h=Z("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=u1(this.apiClient,e);return h=Z("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=E1(this.apiClient,e);return h=Z("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=_1(this.apiClient,e);return h=Z("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=d1(this.apiClient,e);return h=Z("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=p1(v),E=new iv;return Object.assign(E,_),E})}else{const m=f1(this.apiClient,e);return h=Z("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=h1(v),E=new iv;return Object.assign(E,_),E})}}async update(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=P1(this.apiClient,e);return h=Z("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=k1(this.apiClient,e);return h=Z("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=b1(e);return h=Z("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=R1(v),E=new ov;return Object.assign(E,_),E})}else{const m=A1(e);return h=Z("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=N1(v),E=new ov;return Object.assign(E,_),E})}}}function Aa(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(i[s[l]]=t[s[l]]);return i}function fv(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function he(t){return this instanceof he?(this.v=t,this):new he(t)}function gn(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,e||[]),l,a=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),l[Symbol.asyncIterator]=function(){return this},l;function c(x){return function(N){return Promise.resolve(N).then(x,_)}}function h(x,N){s[x]&&(l[x]=function(D){return new Promise(function(U,G){a.push([x,D,U,G])>1||g(x,D)})},N&&(l[x]=N(l[x])))}function g(x,N){try{m(s[x](N))}catch(D){E(a[0][3],D)}}function m(x){x.value instanceof he?Promise.resolve(x.value.v).then(v,_):E(a[0][2],x)}function v(x){g("next",x)}function _(x){g("throw",x)}function E(x,N){x(N),a.shift(),a.length&&g(a[0][0],a[0][1])}}function yn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof fv=="function"?fv(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(a){i[a]=t[a]&&function(c){return new Promise(function(h,g){c=t[a](c),l(h,g,c.done,c.value)})}}function l(a,c,h,g){Promise.resolve(g).then(function(m){a({value:m,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z1(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:TE(i)}function TE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function G1(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function dv(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let s=0;for(;s<i;)if(t[s].role==="user")e.push(t[s]),s++;else{const l=[];let a=!0;for(;s<i&&t[s].role==="model";)l.push(t[s]),a&&!TE(t[s])&&(a=!1),s++;a?e.push(...l):e.pop()}return e}class H1{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new B1(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class B1{constructor(e,i,s,l={},a=[]){this.apiClient=e,this.modelsModule=i,this.model=s,this.config=l,this.history=a,this.sendPromise=Promise.resolve(),G1(a)}async sendMessage(e){var i;await this.sendPromise;const s=Ct(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var a,c,h;const g=await l,m=(c=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let E=[];v!=null&&(E=(h=v.slice(_))!==null&&h!==void 0?h:[]);const x=m?[m]:[];this.recordHistory(s,x,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var i;await this.sendPromise;const s=Ct(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const a=await l;return this.processStreamResponse(a,s)}getHistory(e=!1){const i=e?dv(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return gn(this,arguments,function*(){var l,a,c,h,g,m;const v=[];try{for(var _=!0,E=yn(e),x;x=yield he(E.next()),l=x.done,!l;_=!0){h=x.value,_=!1;const N=h;if(z1(N)){const D=(m=(g=N.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;D!==void 0&&v.push(D)}yield yield he(N)}}catch(N){a={error:N}}finally{try{!_&&!l&&(c=E.return)&&(yield he(c.call(E)))}finally{if(a)throw a.error}}this.recordHistory(i,v)})}recordHistory(e,i,s){let l=[];i.length>0&&i.every(a=>a.role!==void 0)?l=i:l.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...dv(s)):this.history.push(e),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pa extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Pa.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V1(t){const e={},i=f(t,["file"]);return i!=null&&d(e,["file"],i),e}function q1(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function F1(t){const e={},i=f(t,["name"]);return i!=null&&d(e,["_url","file"],mE(i)),e}function Y1(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function J1(t){const e={},i=f(t,["name"]);return i!=null&&d(e,["_url","file"],mE(i)),e}function K1(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const l=f(t,["pageToken"]);return e!==void 0&&l!=null&&d(e,["_query","pageToken"],l),i}function X1(t){const e={},i=f(t,["config"]);return i!=null&&K1(i,e),e}function Q1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const l=f(t,["files"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $1 extends $n{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new so(Xn.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=X1(e);return a=Z("files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const m=Q1(g),v=new ew;return Object.assign(v,m),v})}}async createInternal(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=V1(e);return a=Z("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const m=q1(g),v=new tw;return Object.assign(v,m),v})}}async get(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=J1(e);return a=Z("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=F1(e);return a=Z("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const m=Y1(g),v=new nw;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ra(t){const e={},i=f(t,["data"]);if(i!=null&&d(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function W1(t){const e={},i=f(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>hI(a))),d(e,["parts"],l)}const s=f(t,["role"]);return s!=null&&d(e,["role"],s),e}function Z1(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function j1(t){const e={},i=f(t,["id"]);i!=null&&d(e,["id"],i);const s=f(t,["args"]);s!=null&&d(e,["args"],s);const l=f(t,["name"]);if(l!=null&&d(e,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eI(t){const e={},i=f(t,["description"]);i!=null&&d(e,["description"],i);const s=f(t,["name"]);s!=null&&d(e,["name"],s);const l=f(t,["parameters"]);l!=null&&d(e,["parameters"],l);const a=f(t,["parametersJsonSchema"]);a!=null&&d(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&d(e,["response"],c);const h=f(t,["responseJsonSchema"]);if(h!=null&&d(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function tI(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&d(e,["modelConfig"],i);const s=f(t,["responseJsonSchema"]);s!=null&&d(e,["responseJsonSchema"],s);const l=f(t,["audioTimestamp"]);l!=null&&d(e,["audioTimestamp"],l);const a=f(t,["candidateCount"]);a!=null&&d(e,["candidateCount"],a);const c=f(t,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const h=f(t,["frequencyPenalty"]);h!=null&&d(e,["frequencyPenalty"],h);const g=f(t,["logprobs"]);g!=null&&d(e,["logprobs"],g);const m=f(t,["maxOutputTokens"]);m!=null&&d(e,["maxOutputTokens"],m);const v=f(t,["mediaResolution"]);v!=null&&d(e,["mediaResolution"],v);const _=f(t,["presencePenalty"]);_!=null&&d(e,["presencePenalty"],_);const E=f(t,["responseLogprobs"]);E!=null&&d(e,["responseLogprobs"],E);const x=f(t,["responseMimeType"]);x!=null&&d(e,["responseMimeType"],x);const N=f(t,["responseModalities"]);N!=null&&d(e,["responseModalities"],N);const D=f(t,["responseSchema"]);D!=null&&d(e,["responseSchema"],D);const U=f(t,["routingConfig"]);U!=null&&d(e,["routingConfig"],U);const G=f(t,["seed"]);G!=null&&d(e,["seed"],G);const K=f(t,["speechConfig"]);K!=null&&d(e,["speechConfig"],K);const F=f(t,["stopSequences"]);F!=null&&d(e,["stopSequences"],F);const X=f(t,["temperature"]);X!=null&&d(e,["temperature"],X);const se=f(t,["thinkingConfig"]);se!=null&&d(e,["thinkingConfig"],se);const te=f(t,["topK"]);te!=null&&d(e,["topK"],te);const Y=f(t,["topP"]);if(Y!=null&&d(e,["topP"],Y),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function nI(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function iI(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function oI(t,e){const i={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],s);const l=f(t,["responseModalities"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","responseModalities"],l);const a=f(t,["temperature"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","temperature"],a);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=f(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","speechConfig"],Bd(_));const E=f(t,["thinkingConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","thinkingConfig"],E);const x=f(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],x);const N=f(t,["systemInstruction"]);e!==void 0&&N!=null&&d(e,["setup","systemInstruction"],W1(Ct(N)));const D=f(t,["tools"]);if(e!==void 0&&D!=null){let te=fs(D);Array.isArray(te)&&(te=te.map(Y=>mI(cs(Y)))),d(e,["setup","tools"],te)}const U=f(t,["sessionResumption"]);e!==void 0&&U!=null&&d(e,["setup","sessionResumption"],pI(U));const G=f(t,["inputAudioTranscription"]);e!==void 0&&G!=null&&d(e,["setup","inputAudioTranscription"],G);const K=f(t,["outputAudioTranscription"]);e!==void 0&&K!=null&&d(e,["setup","outputAudioTranscription"],K);const F=f(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&d(e,["setup","realtimeInputConfig"],F);const X=f(t,["contextWindowCompression"]);e!==void 0&&X!=null&&d(e,["setup","contextWindowCompression"],X);const se=f(t,["proactivity"]);if(e!==void 0&&se!=null&&d(e,["setup","proactivity"],se),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function sI(t,e){const i={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],tI(s));const l=f(t,["responseModalities"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","responseModalities"],l);const a=f(t,["temperature"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","temperature"],a);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=f(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","speechConfig"],Bd(_));const E=f(t,["thinkingConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","thinkingConfig"],E);const x=f(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],x);const N=f(t,["systemInstruction"]);e!==void 0&&N!=null&&d(e,["setup","systemInstruction"],Ct(N));const D=f(t,["tools"]);if(e!==void 0&&D!=null){let Y=fs(D);Array.isArray(Y)&&(Y=Y.map(ne=>gI(cs(ne)))),d(e,["setup","tools"],Y)}const U=f(t,["sessionResumption"]);e!==void 0&&U!=null&&d(e,["setup","sessionResumption"],U);const G=f(t,["inputAudioTranscription"]);e!==void 0&&G!=null&&d(e,["setup","inputAudioTranscription"],G);const K=f(t,["outputAudioTranscription"]);e!==void 0&&K!=null&&d(e,["setup","outputAudioTranscription"],K);const F=f(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&d(e,["setup","realtimeInputConfig"],F);const X=f(t,["contextWindowCompression"]);e!==void 0&&X!=null&&d(e,["setup","contextWindowCompression"],X);const se=f(t,["proactivity"]);e!==void 0&&se!=null&&d(e,["setup","proactivity"],se);const te=f(t,["explicitVadSignal"]);return e!==void 0&&te!=null&&d(e,["setup","explicitVadSignal"],te),i}function lI(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["setup","model"],Me(t,s));const l=f(e,["config"]);return l!=null&&d(i,["config"],oI(l,i)),i}function rI(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["setup","model"],Me(t,s));const l=f(e,["config"]);return l!=null&&d(i,["config"],sI(l,i)),i}function aI(t){const e={},i=f(t,["musicGenerationConfig"]);return i!=null&&d(e,["musicGenerationConfig"],i),e}function uI(t){const e={},i=f(t,["weightedPrompts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>l)),d(e,["weightedPrompts"],s)}return e}function cI(t){const e={},i=f(t,["media"]);if(i!=null){let m=cE(i);Array.isArray(m)&&(m=m.map(v=>ra(v))),d(e,["mediaChunks"],m)}const s=f(t,["audio"]);s!=null&&d(e,["audio"],ra(dE(s)));const l=f(t,["audioStreamEnd"]);l!=null&&d(e,["audioStreamEnd"],l);const a=f(t,["video"]);a!=null&&d(e,["video"],ra(fE(a)));const c=f(t,["text"]);c!=null&&d(e,["text"],c);const h=f(t,["activityStart"]);h!=null&&d(e,["activityStart"],h);const g=f(t,["activityEnd"]);return g!=null&&d(e,["activityEnd"],g),e}function fI(t){const e={},i=f(t,["media"]);if(i!=null){let m=cE(i);Array.isArray(m)&&(m=m.map(v=>v)),d(e,["mediaChunks"],m)}const s=f(t,["audio"]);s!=null&&d(e,["audio"],dE(s));const l=f(t,["audioStreamEnd"]);l!=null&&d(e,["audioStreamEnd"],l);const a=f(t,["video"]);a!=null&&d(e,["video"],fE(a));const c=f(t,["text"]);c!=null&&d(e,["text"],c);const h=f(t,["activityStart"]);h!=null&&d(e,["activityStart"],h);const g=f(t,["activityEnd"]);return g!=null&&d(e,["activityEnd"],g),e}function dI(t){const e={},i=f(t,["setupComplete"]);i!=null&&d(e,["setupComplete"],i);const s=f(t,["serverContent"]);s!=null&&d(e,["serverContent"],s);const l=f(t,["toolCall"]);l!=null&&d(e,["toolCall"],l);const a=f(t,["toolCallCancellation"]);a!=null&&d(e,["toolCallCancellation"],a);const c=f(t,["usageMetadata"]);c!=null&&d(e,["usageMetadata"],yI(c));const h=f(t,["goAway"]);h!=null&&d(e,["goAway"],h);const g=f(t,["sessionResumptionUpdate"]);g!=null&&d(e,["sessionResumptionUpdate"],g);const m=f(t,["voiceActivityDetectionSignal"]);m!=null&&d(e,["voiceActivityDetectionSignal"],m);const v=f(t,["voiceActivity"]);return v!=null&&d(e,["voiceActivity"],vI(v)),e}function hI(t){const e={},i=f(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const s=f(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const l=f(t,["executableCode"]);l!=null&&d(e,["executableCode"],l);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],Z1(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],j1(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],ra(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const _=f(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const E=f(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function pI(t){const e={},i=f(t,["handle"]);if(i!=null&&d(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function mI(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&d(e,["fileSearch"],s);const l=f(t,["codeExecution"]);if(l!=null&&d(e,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(_=>_)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],nI(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],iI(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function gI(t){const e={},i=f(t,["retrieval"]);i!=null&&d(e,["retrieval"],i);const s=f(t,["computerUse"]);if(s!=null&&d(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(t,["codeExecution"]);l!=null&&d(e,["codeExecution"],l);const a=f(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);const c=f(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(E=>eI(E))),d(e,["functionDeclarations"],_)}const h=f(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],h);const g=f(t,["googleSearch"]);g!=null&&d(e,["googleSearch"],g);const m=f(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const v=f(t,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function yI(t){const e={},i=f(t,["promptTokenCount"]);i!=null&&d(e,["promptTokenCount"],i);const s=f(t,["cachedContentTokenCount"]);s!=null&&d(e,["cachedContentTokenCount"],s);const l=f(t,["candidatesTokenCount"]);l!=null&&d(e,["responseTokenCount"],l);const a=f(t,["toolUsePromptTokenCount"]);a!=null&&d(e,["toolUsePromptTokenCount"],a);const c=f(t,["thoughtsTokenCount"]);c!=null&&d(e,["thoughtsTokenCount"],c);const h=f(t,["totalTokenCount"]);h!=null&&d(e,["totalTokenCount"],h);const g=f(t,["promptTokensDetails"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(N=>N)),d(e,["promptTokensDetails"],x)}const m=f(t,["cacheTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(N=>N)),d(e,["cacheTokensDetails"],x)}const v=f(t,["candidatesTokensDetails"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(N=>N)),d(e,["responseTokensDetails"],x)}const _=f(t,["toolUsePromptTokensDetails"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(N=>N)),d(e,["toolUsePromptTokensDetails"],x)}const E=f(t,["trafficType"]);return E!=null&&d(e,["trafficType"],E),e}function vI(t){const e={},i=f(t,["type"]);return i!=null&&d(e,["voiceActivityType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _I(t){const e={},i=f(t,["data"]);if(i!=null&&d(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function EI(t){const e={},i=f(t,["content"]);i!=null&&d(e,["content"],i);const s=f(t,["citationMetadata"]);s!=null&&d(e,["citationMetadata"],SI(s));const l=f(t,["tokenCount"]);l!=null&&d(e,["tokenCount"],l);const a=f(t,["finishReason"]);a!=null&&d(e,["finishReason"],a);const c=f(t,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const h=f(t,["groundingMetadata"]);h!=null&&d(e,["groundingMetadata"],h);const g=f(t,["index"]);g!=null&&d(e,["index"],g);const m=f(t,["logprobsResult"]);m!=null&&d(e,["logprobsResult"],m);const v=f(t,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(x=>x)),d(e,["safetyRatings"],E)}const _=f(t,["urlContextMetadata"]);return _!=null&&d(e,["urlContextMetadata"],_),e}function SI(t){const e={},i=f(t,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>l)),d(e,["citations"],s)}return e}function TI(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["contents"]);if(l!=null){let a=ln(l);Array.isArray(a)&&(a=a.map(c=>c)),d(i,["contents"],a)}return i}function CI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["tokensInfo"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),d(e,["tokensInfo"],l)}return e}function xI(t){const e={},i=f(t,["values"]);i!=null&&d(e,["values"],i);const s=f(t,["statistics"]);return s!=null&&d(e,["statistics"],AI(s)),e}function AI(t){const e={},i=f(t,["truncated"]);i!=null&&d(e,["truncated"],i);const s=f(t,["token_count"]);return s!=null&&d(e,["tokenCount"],s),e}function Oa(t){const e={},i=f(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>LM(a))),d(e,["parts"],l)}const s=f(t,["role"]);return s!=null&&d(e,["role"],s),e}function bI(t){const e={},i=f(t,["controlType"]);i!=null&&d(e,["controlType"],i);const s=f(t,["enableControlImageComputation"]);return s!=null&&d(e,["computeControl"],s),e}function NI(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function RI(t,e){const i={},s=f(t,["systemInstruction"]);e!==void 0&&s!=null&&d(e,["systemInstruction"],Ct(s));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>bE(h))),d(e,["tools"],c)}const a=f(t,["generationConfig"]);return e!==void 0&&a!=null&&d(e,["generationConfig"],_M(a)),i}function wI(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["contents"]);if(l!=null){let c=ln(l);Array.isArray(c)&&(c=c.map(h=>Oa(h))),d(i,["contents"],c)}const a=f(e,["config"]);return a!=null&&NI(a),i}function II(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["contents"]);if(l!=null){let c=ln(l);Array.isArray(c)&&(c=c.map(h=>h)),d(i,["contents"],c)}const a=f(e,["config"]);return a!=null&&RI(a,i),i}function MI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["totalTokens"]);s!=null&&d(e,["totalTokens"],s);const l=f(t,["cachedContentTokenCount"]);return l!=null&&d(e,["cachedContentTokenCount"],l),e}function DI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["totalTokens"]);return s!=null&&d(e,["totalTokens"],s),e}function UI(t,e){const i={},s=f(e,["model"]);return s!=null&&d(i,["_url","name"],Me(t,s)),i}function LI(t,e){const i={},s=f(e,["model"]);return s!=null&&d(i,["_url","name"],Me(t,s)),i}function kI(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function PI(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function OI(t,e){const i={},s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&d(e,["parameters","negativePrompt"],l);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const h=f(t,["guidanceScale"]);e!==void 0&&h!=null&&d(e,["parameters","guidanceScale"],h);const g=f(t,["seed"]);e!==void 0&&g!=null&&d(e,["parameters","seed"],g);const m=f(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const v=f(t,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&d(e,["parameters","includeSafetyAttributes"],_);const E=f(t,["includeRaiReason"]);e!==void 0&&E!=null&&d(e,["parameters","includeRaiReason"],E);const x=f(t,["language"]);e!==void 0&&x!=null&&d(e,["parameters","language"],x);const N=f(t,["outputMimeType"]);e!==void 0&&N!=null&&d(e,["parameters","outputOptions","mimeType"],N);const D=f(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&d(e,["parameters","outputOptions","compressionQuality"],D);const U=f(t,["addWatermark"]);e!==void 0&&U!=null&&d(e,["parameters","addWatermark"],U);const G=f(t,["labels"]);e!==void 0&&G!=null&&d(e,["labels"],G);const K=f(t,["editMode"]);e!==void 0&&K!=null&&d(e,["parameters","editMode"],K);const F=f(t,["baseSteps"]);return e!==void 0&&F!=null&&d(e,["parameters","editConfig","baseSteps"],F),i}function zI(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["prompt"]);l!=null&&d(i,["instances[0]","prompt"],l);const a=f(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>HM(g))),d(i,["instances[0]","referenceImages"],h)}const c=f(e,["config"]);return c!=null&&OI(c,i),i}function GI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>za(a))),d(e,["generatedImages"],l)}return e}function HI(t,e){const i={},s=f(t,["taskType"]);e!==void 0&&s!=null&&d(e,["requests[]","taskType"],s);const l=f(t,["title"]);e!==void 0&&l!=null&&d(e,["requests[]","title"],l);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&d(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function BI(t,e){const i={},s=f(t,["taskType"]);e!==void 0&&s!=null&&d(e,["instances[]","task_type"],s);const l=f(t,["title"]);e!==void 0&&l!=null&&d(e,["instances[]","title"],l);const a=f(t,["outputDimensionality"]);e!==void 0&&a!=null&&d(e,["parameters","outputDimensionality"],a);const c=f(t,["mimeType"]);e!==void 0&&c!=null&&d(e,["instances[]","mimeType"],c);const h=f(t,["autoTruncate"]);return e!==void 0&&h!=null&&d(e,["parameters","autoTruncate"],h),i}function VI(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["contents"]);if(l!=null){let h=zd(t,l);Array.isArray(h)&&(h=h.map(g=>g)),d(i,["requests[]","content"],h)}const a=f(e,["config"]);a!=null&&HI(a,i);const c=f(e,["model"]);return c!==void 0&&d(i,["requests[]","model"],Me(t,c)),i}function qI(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["contents"]);if(l!=null){let c=zd(t,l);Array.isArray(c)&&(c=c.map(h=>h)),d(i,["instances[]","content"],c)}const a=f(e,["config"]);return a!=null&&BI(a,i),i}function FI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["embeddings"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["embeddings"],a)}const l=f(t,["metadata"]);return l!=null&&d(e,["metadata"],l),e}function YI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["predictions[]","embeddings"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>xI(c))),d(e,["embeddings"],a)}const l=f(t,["metadata"]);return l!=null&&d(e,["metadata"],l),e}function JI(t){const e={},i=f(t,["endpoint"]);i!=null&&d(e,["name"],i);const s=f(t,["deployedModelId"]);return s!=null&&d(e,["deployedModelId"],s),e}function KI(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function XI(t){const e={},i=f(t,["id"]);i!=null&&d(e,["id"],i);const s=f(t,["args"]);s!=null&&d(e,["args"],s);const l=f(t,["name"]);if(l!=null&&d(e,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function QI(t){const e={},i=f(t,["allowedFunctionNames"]);i!=null&&d(e,["allowedFunctionNames"],i);const s=f(t,["mode"]);if(s!=null&&d(e,["mode"],s),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function $I(t){const e={},i=f(t,["description"]);i!=null&&d(e,["description"],i);const s=f(t,["name"]);s!=null&&d(e,["name"],s);const l=f(t,["parameters"]);l!=null&&d(e,["parameters"],l);const a=f(t,["parametersJsonSchema"]);a!=null&&d(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&d(e,["response"],c);const h=f(t,["responseJsonSchema"]);if(h!=null&&d(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function WI(t,e,i){const s={},l=f(e,["systemInstruction"]);i!==void 0&&l!=null&&d(i,["systemInstruction"],Oa(Ct(l)));const a=f(e,["temperature"]);a!=null&&d(s,["temperature"],a);const c=f(e,["topP"]);c!=null&&d(s,["topP"],c);const h=f(e,["topK"]);h!=null&&d(s,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&d(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&d(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&d(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&d(s,["responseLogprobs"],_);const E=f(e,["logprobs"]);E!=null&&d(s,["logprobs"],E);const x=f(e,["presencePenalty"]);x!=null&&d(s,["presencePenalty"],x);const N=f(e,["frequencyPenalty"]);N!=null&&d(s,["frequencyPenalty"],N);const D=f(e,["seed"]);D!=null&&d(s,["seed"],D);const U=f(e,["responseMimeType"]);U!=null&&d(s,["responseMimeType"],U);const G=f(e,["responseSchema"]);G!=null&&d(s,["responseSchema"],Gd(G));const K=f(e,["responseJsonSchema"]);if(K!=null&&d(s,["responseJsonSchema"],K),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=f(e,["safetySettings"]);if(i!==void 0&&F!=null){let re=F;Array.isArray(re)&&(re=re.map(_e=>BM(_e))),d(i,["safetySettings"],re)}const X=f(e,["tools"]);if(i!==void 0&&X!=null){let re=fs(X);Array.isArray(re)&&(re=re.map(_e=>XM(cs(_e)))),d(i,["tools"],re)}const se=f(e,["toolConfig"]);if(i!==void 0&&se!=null&&d(i,["toolConfig"],KM(se)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const te=f(e,["cachedContent"]);i!==void 0&&te!=null&&d(i,["cachedContent"],Wn(t,te));const Y=f(e,["responseModalities"]);Y!=null&&d(s,["responseModalities"],Y);const ne=f(e,["mediaResolution"]);ne!=null&&d(s,["mediaResolution"],ne);const M=f(e,["speechConfig"]);if(M!=null&&d(s,["speechConfig"],Hd(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=f(e,["thinkingConfig"]);J!=null&&d(s,["thinkingConfig"],J);const ae=f(e,["imageConfig"]);ae!=null&&d(s,["imageConfig"],xM(ae));const ie=f(e,["enableEnhancedCivicAnswers"]);return ie!=null&&d(s,["enableEnhancedCivicAnswers"],ie),s}function ZI(t,e,i){const s={},l=f(e,["systemInstruction"]);i!==void 0&&l!=null&&d(i,["systemInstruction"],Ct(l));const a=f(e,["temperature"]);a!=null&&d(s,["temperature"],a);const c=f(e,["topP"]);c!=null&&d(s,["topP"],c);const h=f(e,["topK"]);h!=null&&d(s,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&d(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&d(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&d(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&d(s,["responseLogprobs"],_);const E=f(e,["logprobs"]);E!=null&&d(s,["logprobs"],E);const x=f(e,["presencePenalty"]);x!=null&&d(s,["presencePenalty"],x);const N=f(e,["frequencyPenalty"]);N!=null&&d(s,["frequencyPenalty"],N);const D=f(e,["seed"]);D!=null&&d(s,["seed"],D);const U=f(e,["responseMimeType"]);U!=null&&d(s,["responseMimeType"],U);const G=f(e,["responseSchema"]);G!=null&&d(s,["responseSchema"],Gd(G));const K=f(e,["responseJsonSchema"]);K!=null&&d(s,["responseJsonSchema"],K);const F=f(e,["routingConfig"]);F!=null&&d(s,["routingConfig"],F);const X=f(e,["modelSelectionConfig"]);X!=null&&d(s,["modelConfig"],X);const se=f(e,["safetySettings"]);if(i!==void 0&&se!=null){let w=se;Array.isArray(w)&&(w=w.map(q=>q)),d(i,["safetySettings"],w)}const te=f(e,["tools"]);if(i!==void 0&&te!=null){let w=fs(te);Array.isArray(w)&&(w=w.map(q=>bE(cs(q)))),d(i,["tools"],w)}const Y=f(e,["toolConfig"]);i!==void 0&&Y!=null&&d(i,["toolConfig"],Y);const ne=f(e,["labels"]);i!==void 0&&ne!=null&&d(i,["labels"],ne);const M=f(e,["cachedContent"]);i!==void 0&&M!=null&&d(i,["cachedContent"],Wn(t,M));const J=f(e,["responseModalities"]);J!=null&&d(s,["responseModalities"],J);const ae=f(e,["mediaResolution"]);ae!=null&&d(s,["mediaResolution"],ae);const ie=f(e,["speechConfig"]);ie!=null&&d(s,["speechConfig"],Hd(ie));const re=f(e,["audioTimestamp"]);re!=null&&d(s,["audioTimestamp"],re);const _e=f(e,["thinkingConfig"]);_e!=null&&d(s,["thinkingConfig"],_e);const $=f(e,["imageConfig"]);if($!=null&&d(s,["imageConfig"],AM($)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function hv(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["contents"]);if(l!=null){let c=ln(l);Array.isArray(c)&&(c=c.map(h=>Oa(h))),d(i,["contents"],c)}const a=f(e,["config"]);return a!=null&&d(i,["generationConfig"],WI(t,a,i)),i}function pv(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["contents"]);if(l!=null){let c=ln(l);Array.isArray(c)&&(c=c.map(h=>h)),d(i,["contents"],c)}const a=f(e,["config"]);return a!=null&&d(i,["generationConfig"],ZI(t,a,i)),i}function mv(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>EI(m))),d(e,["candidates"],g)}const l=f(t,["modelVersion"]);l!=null&&d(e,["modelVersion"],l);const a=f(t,["promptFeedback"]);a!=null&&d(e,["promptFeedback"],a);const c=f(t,["responseId"]);c!=null&&d(e,["responseId"],c);const h=f(t,["usageMetadata"]);return h!=null&&d(e,["usageMetadata"],h),e}function gv(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),d(e,["candidates"],m)}const l=f(t,["createTime"]);l!=null&&d(e,["createTime"],l);const a=f(t,["modelVersion"]);a!=null&&d(e,["modelVersion"],a);const c=f(t,["promptFeedback"]);c!=null&&d(e,["promptFeedback"],c);const h=f(t,["responseId"]);h!=null&&d(e,["responseId"],h);const g=f(t,["usageMetadata"]);return g!=null&&d(e,["usageMetadata"],g),e}function jI(t,e){const i={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(t,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&d(e,["parameters","aspectRatio"],l);const a=f(t,["guidanceScale"]);if(e!==void 0&&a!=null&&d(e,["parameters","guidanceScale"],a),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const h=f(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const g=f(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&d(e,["parameters","includeSafetyAttributes"],g);const m=f(t,["includeRaiReason"]);e!==void 0&&m!=null&&d(e,["parameters","includeRaiReason"],m);const v=f(t,["language"]);e!==void 0&&v!=null&&d(e,["parameters","language"],v);const _=f(t,["outputMimeType"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","mimeType"],_);const E=f(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&d(e,["parameters","outputOptions","compressionQuality"],E),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=f(t,["imageSize"]);if(e!==void 0&&x!=null&&d(e,["parameters","sampleImageSize"],x),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function eM(t,e){const i={},s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&d(e,["parameters","negativePrompt"],l);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const h=f(t,["guidanceScale"]);e!==void 0&&h!=null&&d(e,["parameters","guidanceScale"],h);const g=f(t,["seed"]);e!==void 0&&g!=null&&d(e,["parameters","seed"],g);const m=f(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const v=f(t,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&d(e,["parameters","includeSafetyAttributes"],_);const E=f(t,["includeRaiReason"]);e!==void 0&&E!=null&&d(e,["parameters","includeRaiReason"],E);const x=f(t,["language"]);e!==void 0&&x!=null&&d(e,["parameters","language"],x);const N=f(t,["outputMimeType"]);e!==void 0&&N!=null&&d(e,["parameters","outputOptions","mimeType"],N);const D=f(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&d(e,["parameters","outputOptions","compressionQuality"],D);const U=f(t,["addWatermark"]);e!==void 0&&U!=null&&d(e,["parameters","addWatermark"],U);const G=f(t,["labels"]);e!==void 0&&G!=null&&d(e,["labels"],G);const K=f(t,["imageSize"]);e!==void 0&&K!=null&&d(e,["parameters","sampleImageSize"],K);const F=f(t,["enhancePrompt"]);return e!==void 0&&F!=null&&d(e,["parameters","enhancePrompt"],F),i}function tM(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["prompt"]);l!=null&&d(i,["instances[0]","prompt"],l);const a=f(e,["config"]);return a!=null&&jI(a,i),i}function nM(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["prompt"]);l!=null&&d(i,["instances[0]","prompt"],l);const a=f(e,["config"]);return a!=null&&eM(a,i),i}function iM(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>mM(c))),d(e,["generatedImages"],a)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&d(e,["positivePromptSafetyAttributes"],xE(l)),e}function oM(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>za(c))),d(e,["generatedImages"],a)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&d(e,["positivePromptSafetyAttributes"],AE(l)),e}function sM(t,e){const i={},s=f(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(t,["durationSeconds"]);if(e!==void 0&&l!=null&&d(e,["parameters","durationSeconds"],l),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);const c=f(t,["resolution"]);e!==void 0&&c!=null&&d(e,["parameters","resolution"],c);const h=f(t,["personGeneration"]);if(e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(t,["negativePrompt"]);e!==void 0&&g!=null&&d(e,["parameters","negativePrompt"],g);const m=f(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&d(e,["parameters","enhancePrompt"],m),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(t,["lastFrame"]);e!==void 0&&v!=null&&d(e,["instances[0]","lastFrame"],Ga(v));const _=f(t,["referenceImages"]);if(e!==void 0&&_!=null){let E=_;Array.isArray(E)&&(E=E.map(x=>rD(x))),d(e,["instances[0]","referenceImages"],E)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function lM(t,e){const i={},s=f(t,["numberOfVideos"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&d(e,["parameters","storageUri"],l);const a=f(t,["fps"]);e!==void 0&&a!=null&&d(e,["parameters","fps"],a);const c=f(t,["durationSeconds"]);e!==void 0&&c!=null&&d(e,["parameters","durationSeconds"],c);const h=f(t,["seed"]);e!==void 0&&h!=null&&d(e,["parameters","seed"],h);const g=f(t,["aspectRatio"]);e!==void 0&&g!=null&&d(e,["parameters","aspectRatio"],g);const m=f(t,["resolution"]);e!==void 0&&m!=null&&d(e,["parameters","resolution"],m);const v=f(t,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const _=f(t,["pubsubTopic"]);e!==void 0&&_!=null&&d(e,["parameters","pubsubTopic"],_);const E=f(t,["negativePrompt"]);e!==void 0&&E!=null&&d(e,["parameters","negativePrompt"],E);const x=f(t,["enhancePrompt"]);e!==void 0&&x!=null&&d(e,["parameters","enhancePrompt"],x);const N=f(t,["generateAudio"]);e!==void 0&&N!=null&&d(e,["parameters","generateAudio"],N);const D=f(t,["lastFrame"]);e!==void 0&&D!=null&&d(e,["instances[0]","lastFrame"],vn(D));const U=f(t,["referenceImages"]);if(e!==void 0&&U!=null){let F=U;Array.isArray(F)&&(F=F.map(X=>aD(X))),d(e,["instances[0]","referenceImages"],F)}const G=f(t,["mask"]);e!==void 0&&G!=null&&d(e,["instances[0]","mask"],lD(G));const K=f(t,["compressionQuality"]);return e!==void 0&&K!=null&&d(e,["parameters","compressionQuality"],K),i}function rM(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata"]);s!=null&&d(e,["metadata"],s);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],fM(c)),e}function aM(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata"]);s!=null&&d(e,["metadata"],s);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],dM(c)),e}function uM(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["prompt"]);l!=null&&d(i,["instances[0]","prompt"],l);const a=f(e,["image"]);a!=null&&d(i,["instances[0]","image"],Ga(a));const c=f(e,["video"]);c!=null&&d(i,["instances[0]","video"],NE(c));const h=f(e,["source"]);h!=null&&hM(h,i);const g=f(e,["config"]);return g!=null&&sM(g,i),i}function cM(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["prompt"]);l!=null&&d(i,["instances[0]","prompt"],l);const a=f(e,["image"]);a!=null&&d(i,["instances[0]","image"],vn(a));const c=f(e,["video"]);c!=null&&d(i,["instances[0]","video"],RE(c));const h=f(e,["source"]);h!=null&&pM(h,i);const g=f(e,["config"]);return g!=null&&lM(g,i),i}function fM(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>yM(c))),d(e,["generatedVideos"],a)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&d(e,["raiMediaFilteredReasons"],l),e}function dM(t){const e={},i=f(t,["videos"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>vM(c))),d(e,["generatedVideos"],a)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&d(e,["raiMediaFilteredReasons"],l),e}function hM(t,e){const i={},s=f(t,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const l=f(t,["image"]);e!==void 0&&l!=null&&d(e,["instances[0]","image"],Ga(l));const a=f(t,["video"]);return e!==void 0&&a!=null&&d(e,["instances[0]","video"],NE(a)),i}function pM(t,e){const i={},s=f(t,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const l=f(t,["image"]);e!==void 0&&l!=null&&d(e,["instances[0]","image"],vn(l));const a=f(t,["video"]);return e!==void 0&&a!=null&&d(e,["instances[0]","video"],RE(a)),i}function mM(t){const e={},i=f(t,["_self"]);i!=null&&d(e,["image"],bM(i));const s=f(t,["raiFilteredReason"]);s!=null&&d(e,["raiFilteredReason"],s);const l=f(t,["_self"]);return l!=null&&d(e,["safetyAttributes"],xE(l)),e}function za(t){const e={},i=f(t,["_self"]);i!=null&&d(e,["image"],CE(i));const s=f(t,["raiFilteredReason"]);s!=null&&d(e,["raiFilteredReason"],s);const l=f(t,["_self"]);l!=null&&d(e,["safetyAttributes"],AE(l));const a=f(t,["prompt"]);return a!=null&&d(e,["enhancedPrompt"],a),e}function gM(t){const e={},i=f(t,["_self"]);i!=null&&d(e,["mask"],CE(i));const s=f(t,["labels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),d(e,["labels"],l)}return e}function yM(t){const e={},i=f(t,["video"]);return i!=null&&d(e,["video"],oD(i)),e}function vM(t){const e={},i=f(t,["_self"]);return i!=null&&d(e,["video"],sD(i)),e}function _M(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&d(e,["modelConfig"],i);const s=f(t,["responseJsonSchema"]);s!=null&&d(e,["responseJsonSchema"],s);const l=f(t,["audioTimestamp"]);l!=null&&d(e,["audioTimestamp"],l);const a=f(t,["candidateCount"]);a!=null&&d(e,["candidateCount"],a);const c=f(t,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const h=f(t,["frequencyPenalty"]);h!=null&&d(e,["frequencyPenalty"],h);const g=f(t,["logprobs"]);g!=null&&d(e,["logprobs"],g);const m=f(t,["maxOutputTokens"]);m!=null&&d(e,["maxOutputTokens"],m);const v=f(t,["mediaResolution"]);v!=null&&d(e,["mediaResolution"],v);const _=f(t,["presencePenalty"]);_!=null&&d(e,["presencePenalty"],_);const E=f(t,["responseLogprobs"]);E!=null&&d(e,["responseLogprobs"],E);const x=f(t,["responseMimeType"]);x!=null&&d(e,["responseMimeType"],x);const N=f(t,["responseModalities"]);N!=null&&d(e,["responseModalities"],N);const D=f(t,["responseSchema"]);D!=null&&d(e,["responseSchema"],D);const U=f(t,["routingConfig"]);U!=null&&d(e,["routingConfig"],U);const G=f(t,["seed"]);G!=null&&d(e,["seed"],G);const K=f(t,["speechConfig"]);K!=null&&d(e,["speechConfig"],K);const F=f(t,["stopSequences"]);F!=null&&d(e,["stopSequences"],F);const X=f(t,["temperature"]);X!=null&&d(e,["temperature"],X);const se=f(t,["thinkingConfig"]);se!=null&&d(e,["thinkingConfig"],se);const te=f(t,["topK"]);te!=null&&d(e,["topK"],te);const Y=f(t,["topP"]);if(Y!=null&&d(e,["topP"],Y),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function EM(t,e){const i={},s=f(e,["model"]);return s!=null&&d(i,["_url","name"],Me(t,s)),i}function SM(t,e){const i={},s=f(e,["model"]);return s!=null&&d(i,["_url","name"],Me(t,s)),i}function TM(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function CM(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function xM(t){const e={},i=f(t,["aspectRatio"]);i!=null&&d(e,["aspectRatio"],i);const s=f(t,["imageSize"]);if(s!=null&&d(e,["imageSize"],s),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function AM(t){const e={},i=f(t,["aspectRatio"]);i!=null&&d(e,["aspectRatio"],i);const s=f(t,["imageSize"]);s!=null&&d(e,["imageSize"],s);const l=f(t,["personGeneration"]);l!=null&&d(e,["personGeneration"],l);const a=f(t,["outputMimeType"]);a!=null&&d(e,["imageOutputOptions","mimeType"],a);const c=f(t,["outputCompressionQuality"]);return c!=null&&d(e,["imageOutputOptions","compressionQuality"],c),e}function bM(t){const e={},i=f(t,["bytesBase64Encoded"]);i!=null&&d(e,["imageBytes"],Ri(i));const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function CE(t){const e={},i=f(t,["gcsUri"]);i!=null&&d(e,["gcsUri"],i);const s=f(t,["bytesBase64Encoded"]);s!=null&&d(e,["imageBytes"],Ri(s));const l=f(t,["mimeType"]);return l!=null&&d(e,["mimeType"],l),e}function Ga(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(t,["imageBytes"]);i!=null&&d(e,["bytesBase64Encoded"],Ri(i));const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function vn(t){const e={},i=f(t,["gcsUri"]);i!=null&&d(e,["gcsUri"],i);const s=f(t,["imageBytes"]);s!=null&&d(e,["bytesBase64Encoded"],Ri(s));const l=f(t,["mimeType"]);return l!=null&&d(e,["mimeType"],l),e}function NM(t,e,i){const s={},l=f(e,["pageSize"]);i!==void 0&&l!=null&&d(i,["_query","pageSize"],l);const a=f(e,["pageToken"]);i!==void 0&&a!=null&&d(i,["_query","pageToken"],a);const c=f(e,["filter"]);i!==void 0&&c!=null&&d(i,["_query","filter"],c);const h=f(e,["queryBase"]);return i!==void 0&&h!=null&&d(i,["_url","models_url"],gE(t,h)),s}function RM(t,e,i){const s={},l=f(e,["pageSize"]);i!==void 0&&l!=null&&d(i,["_query","pageSize"],l);const a=f(e,["pageToken"]);i!==void 0&&a!=null&&d(i,["_query","pageToken"],a);const c=f(e,["filter"]);i!==void 0&&c!=null&&d(i,["_query","filter"],c);const h=f(e,["queryBase"]);return i!==void 0&&h!=null&&d(i,["_url","models_url"],gE(t,h)),s}function wM(t,e){const i={},s=f(e,["config"]);return s!=null&&NM(t,s,i),i}function IM(t,e){const i={},s=f(e,["config"]);return s!=null&&RM(t,s,i),i}function MM(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const l=f(t,["_self"]);if(l!=null){let a=yE(l);Array.isArray(a)&&(a=a.map(c=>Wf(c))),d(e,["models"],a)}return e}function DM(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const l=f(t,["_self"]);if(l!=null){let a=yE(l);Array.isArray(a)&&(a=a.map(c=>Zf(c))),d(e,["models"],a)}return e}function UM(t){const e={},i=f(t,["maskMode"]);i!=null&&d(e,["maskMode"],i);const s=f(t,["segmentationClasses"]);s!=null&&d(e,["maskClasses"],s);const l=f(t,["maskDilation"]);return l!=null&&d(e,["dilation"],l),e}function Wf(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["displayName"]);s!=null&&d(e,["displayName"],s);const l=f(t,["description"]);l!=null&&d(e,["description"],l);const a=f(t,["version"]);a!=null&&d(e,["version"],a);const c=f(t,["_self"]);c!=null&&d(e,["tunedModelInfo"],QM(c));const h=f(t,["inputTokenLimit"]);h!=null&&d(e,["inputTokenLimit"],h);const g=f(t,["outputTokenLimit"]);g!=null&&d(e,["outputTokenLimit"],g);const m=f(t,["supportedGenerationMethods"]);m!=null&&d(e,["supportedActions"],m);const v=f(t,["temperature"]);v!=null&&d(e,["temperature"],v);const _=f(t,["maxTemperature"]);_!=null&&d(e,["maxTemperature"],_);const E=f(t,["topP"]);E!=null&&d(e,["topP"],E);const x=f(t,["topK"]);x!=null&&d(e,["topK"],x);const N=f(t,["thinking"]);return N!=null&&d(e,["thinking"],N),e}function Zf(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["displayName"]);s!=null&&d(e,["displayName"],s);const l=f(t,["description"]);l!=null&&d(e,["description"],l);const a=f(t,["versionId"]);a!=null&&d(e,["version"],a);const c=f(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(E=>JI(E))),d(e,["endpoints"],_)}const h=f(t,["labels"]);h!=null&&d(e,["labels"],h);const g=f(t,["_self"]);g!=null&&d(e,["tunedModelInfo"],$M(g));const m=f(t,["defaultCheckpointId"]);m!=null&&d(e,["defaultCheckpointId"],m);const v=f(t,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(E=>E)),d(e,["checkpoints"],_)}return e}function LM(t){const e={},i=f(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const s=f(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const l=f(t,["executableCode"]);l!=null&&d(e,["executableCode"],l);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],KI(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],XI(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],_I(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const _=f(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const E=f(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function kM(t){const e={},i=f(t,["productImage"]);return i!=null&&d(e,["image"],vn(i)),e}function PM(t,e){const i={},s=f(t,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const l=f(t,["baseSteps"]);e!==void 0&&l!=null&&d(e,["parameters","baseSteps"],l);const a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&d(e,["parameters","storageUri"],a);const c=f(t,["seed"]);e!==void 0&&c!=null&&d(e,["parameters","seed"],c);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&d(e,["parameters","safetySetting"],h);const g=f(t,["personGeneration"]);e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g);const m=f(t,["addWatermark"]);e!==void 0&&m!=null&&d(e,["parameters","addWatermark"],m);const v=f(t,["outputMimeType"]);e!==void 0&&v!=null&&d(e,["parameters","outputOptions","mimeType"],v);const _=f(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","compressionQuality"],_);const E=f(t,["enhancePrompt"]);e!==void 0&&E!=null&&d(e,["parameters","enhancePrompt"],E);const x=f(t,["labels"]);return e!==void 0&&x!=null&&d(e,["labels"],x),i}function OM(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["source"]);l!=null&&GM(l,i);const a=f(e,["config"]);return a!=null&&PM(a,i),i}function zM(t){const e={},i=f(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>za(l))),d(e,["generatedImages"],s)}return e}function GM(t,e){const i={},s=f(t,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const l=f(t,["personImage"]);e!==void 0&&l!=null&&d(e,["instances[0]","personImage","image"],vn(l));const a=f(t,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>kM(h))),d(e,["instances[0]","productImages"],c)}return i}function HM(t){const e={},i=f(t,["referenceImage"]);i!=null&&d(e,["referenceImage"],vn(i));const s=f(t,["referenceId"]);s!=null&&d(e,["referenceId"],s);const l=f(t,["referenceType"]);l!=null&&d(e,["referenceType"],l);const a=f(t,["maskImageConfig"]);a!=null&&d(e,["maskImageConfig"],UM(a));const c=f(t,["controlImageConfig"]);c!=null&&d(e,["controlImageConfig"],bI(c));const h=f(t,["styleImageConfig"]);h!=null&&d(e,["styleImageConfig"],h);const g=f(t,["subjectImageConfig"]);return g!=null&&d(e,["subjectImageConfig"],g),e}function xE(t){const e={},i=f(t,["safetyAttributes","categories"]);i!=null&&d(e,["categories"],i);const s=f(t,["safetyAttributes","scores"]);s!=null&&d(e,["scores"],s);const l=f(t,["contentType"]);return l!=null&&d(e,["contentType"],l),e}function AE(t){const e={},i=f(t,["safetyAttributes","categories"]);i!=null&&d(e,["categories"],i);const s=f(t,["safetyAttributes","scores"]);s!=null&&d(e,["scores"],s);const l=f(t,["contentType"]);return l!=null&&d(e,["contentType"],l),e}function BM(t){const e={},i=f(t,["category"]);if(i!=null&&d(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(t,["threshold"]);return s!=null&&d(e,["threshold"],s),e}function VM(t){const e={},i=f(t,["image"]);return i!=null&&d(e,["image"],vn(i)),e}function qM(t,e){const i={},s=f(t,["mode"]);e!==void 0&&s!=null&&d(e,["parameters","mode"],s);const l=f(t,["maxPredictions"]);e!==void 0&&l!=null&&d(e,["parameters","maxPredictions"],l);const a=f(t,["confidenceThreshold"]);e!==void 0&&a!=null&&d(e,["parameters","confidenceThreshold"],a);const c=f(t,["maskDilation"]);e!==void 0&&c!=null&&d(e,["parameters","maskDilation"],c);const h=f(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&d(e,["parameters","binaryColorThreshold"],h);const g=f(t,["labels"]);return e!==void 0&&g!=null&&d(e,["labels"],g),i}function FM(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["source"]);l!=null&&JM(l,i);const a=f(e,["config"]);return a!=null&&qM(a,i),i}function YM(t){const e={},i=f(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>gM(l))),d(e,["generatedMasks"],s)}return e}function JM(t,e){const i={},s=f(t,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const l=f(t,["image"]);e!==void 0&&l!=null&&d(e,["instances[0]","image"],vn(l));const a=f(t,["scribbleImage"]);return e!==void 0&&a!=null&&d(e,["instances[0]","scribble"],VM(a)),i}function KM(t){const e={},i=f(t,["retrievalConfig"]);i!=null&&d(e,["retrievalConfig"],i);const s=f(t,["functionCallingConfig"]);return s!=null&&d(e,["functionCallingConfig"],QI(s)),e}function XM(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&d(e,["fileSearch"],s);const l=f(t,["codeExecution"]);if(l!=null&&d(e,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(_=>_)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],TM(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],CM(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function bE(t){const e={},i=f(t,["retrieval"]);i!=null&&d(e,["retrieval"],i);const s=f(t,["computerUse"]);if(s!=null&&d(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(t,["codeExecution"]);l!=null&&d(e,["codeExecution"],l);const a=f(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);const c=f(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(E=>$I(E))),d(e,["functionDeclarations"],_)}const h=f(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],h);const g=f(t,["googleSearch"]);g!=null&&d(e,["googleSearch"],g);const m=f(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const v=f(t,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function QM(t){const e={},i=f(t,["baseModel"]);i!=null&&d(e,["baseModel"],i);const s=f(t,["createTime"]);s!=null&&d(e,["createTime"],s);const l=f(t,["updateTime"]);return l!=null&&d(e,["updateTime"],l),e}function $M(t){const e={},i=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&d(e,["baseModel"],i);const s=f(t,["createTime"]);s!=null&&d(e,["createTime"],s);const l=f(t,["updateTime"]);return l!=null&&d(e,["updateTime"],l),e}function WM(t,e){const i={},s=f(t,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const l=f(t,["description"]);e!==void 0&&l!=null&&d(e,["description"],l);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&d(e,["defaultCheckpointId"],a),i}function ZM(t,e){const i={},s=f(t,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const l=f(t,["description"]);e!==void 0&&l!=null&&d(e,["description"],l);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&d(e,["defaultCheckpointId"],a),i}function jM(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","name"],Me(t,s));const l=f(e,["config"]);return l!=null&&WM(l,i),i}function eD(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["config"]);return l!=null&&ZM(l,i),i}function tD(t,e){const i={},s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const l=f(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&d(e,["parameters","safetySetting"],l);const a=f(t,["personGeneration"]);e!==void 0&&a!=null&&d(e,["parameters","personGeneration"],a);const c=f(t,["includeRaiReason"]);e!==void 0&&c!=null&&d(e,["parameters","includeRaiReason"],c);const h=f(t,["outputMimeType"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","mimeType"],h);const g=f(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&d(e,["parameters","outputOptions","compressionQuality"],g);const m=f(t,["enhanceInputImage"]);e!==void 0&&m!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=f(t,["labels"]);e!==void 0&&_!=null&&d(e,["labels"],_);const E=f(t,["numberOfImages"]);e!==void 0&&E!=null&&d(e,["parameters","sampleCount"],E);const x=f(t,["mode"]);return e!==void 0&&x!=null&&d(e,["parameters","mode"],x),i}function nD(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],Me(t,s));const l=f(e,["image"]);l!=null&&d(i,["instances[0]","image"],vn(l));const a=f(e,["upscaleFactor"]);a!=null&&d(i,["parameters","upscaleConfig","upscaleFactor"],a);const c=f(e,["config"]);return c!=null&&tD(c,i),i}function iD(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>za(a))),d(e,["generatedImages"],l)}return e}function oD(t){const e={},i=f(t,["uri"]);i!=null&&d(e,["uri"],i);const s=f(t,["encodedVideo"]);s!=null&&d(e,["videoBytes"],Ri(s));const l=f(t,["encoding"]);return l!=null&&d(e,["mimeType"],l),e}function sD(t){const e={},i=f(t,["gcsUri"]);i!=null&&d(e,["uri"],i);const s=f(t,["bytesBase64Encoded"]);s!=null&&d(e,["videoBytes"],Ri(s));const l=f(t,["mimeType"]);return l!=null&&d(e,["mimeType"],l),e}function lD(t){const e={},i=f(t,["image"]);i!=null&&d(e,["_self"],vn(i));const s=f(t,["maskMode"]);return s!=null&&d(e,["maskMode"],s),e}function rD(t){const e={},i=f(t,["image"]);i!=null&&d(e,["image"],Ga(i));const s=f(t,["referenceType"]);return s!=null&&d(e,["referenceType"],s),e}function aD(t){const e={},i=f(t,["image"]);i!=null&&d(e,["image"],vn(i));const s=f(t,["referenceType"]);return s!=null&&d(e,["referenceType"],s),e}function NE(t){const e={},i=f(t,["uri"]);i!=null&&d(e,["uri"],i);const s=f(t,["videoBytes"]);s!=null&&d(e,["encodedVideo"],Ri(s));const l=f(t,["mimeType"]);return l!=null&&d(e,["encoding"],l),e}function RE(t){const e={},i=f(t,["uri"]);i!=null&&d(e,["gcsUri"],i);const s=f(t,["videoBytes"]);s!=null&&d(e,["bytesBase64Encoded"],Ri(s));const l=f(t,["mimeType"]);return l!=null&&d(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uD(t,e){const i={},s=f(t,["displayName"]);return e!==void 0&&s!=null&&d(e,["displayName"],s),i}function cD(t){const e={},i=f(t,["config"]);return i!=null&&uD(i,e),e}function fD(t,e){const i={},s=f(t,["force"]);return e!==void 0&&s!=null&&d(e,["_query","force"],s),i}function dD(t){const e={},i=f(t,["name"]);i!=null&&d(e,["_url","name"],i);const s=f(t,["config"]);return s!=null&&fD(s,e),e}function hD(t){const e={},i=f(t,["name"]);return i!=null&&d(e,["_url","name"],i),e}function pD(t,e){const i={},s=f(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["customMetadata"],a)}const l=f(t,["chunkingConfig"]);return e!==void 0&&l!=null&&d(e,["chunkingConfig"],l),i}function mD(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata"]);s!=null&&d(e,["metadata"],s);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],yD(c)),e}function gD(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&d(e,["_url","file_search_store_name"],i);const s=f(t,["fileName"]);s!=null&&d(e,["fileName"],s);const l=f(t,["config"]);return l!=null&&pD(l,e),e}function yD(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["parent"]);s!=null&&d(e,["parent"],s);const l=f(t,["documentName"]);return l!=null&&d(e,["documentName"],l),e}function vD(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const l=f(t,["pageToken"]);return e!==void 0&&l!=null&&d(e,["_query","pageToken"],l),i}function _D(t){const e={},i=f(t,["config"]);return i!=null&&vD(i,e),e}function ED(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const l=f(t,["fileSearchStores"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["fileSearchStores"],a)}return e}function wE(t,e){const i={},s=f(t,["mimeType"]);e!==void 0&&s!=null&&d(e,["mimeType"],s);const l=f(t,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const a=f(t,["customMetadata"]);if(e!==void 0&&a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>g)),d(e,["customMetadata"],h)}const c=f(t,["chunkingConfig"]);return e!==void 0&&c!=null&&d(e,["chunkingConfig"],c),i}function SD(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&d(e,["_url","file_search_store_name"],i);const s=f(t,["config"]);return s!=null&&wE(s,e),e}function TD(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CD="Content-Type",xD="X-Server-Timeout",AD="User-Agent",jf="x-goog-api-client",bD="1.37.0",ND=`google-genai-sdk/${bD}`,RD="v1beta1",wD="v1beta";class ID{constructor(e){var i,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const l={};this.clientOptions.vertexai?(l.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:RD,l.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(l.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:wD,l.baseUrl="https://generativelanguage.googleapis.com/"),l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,s){const l=[this.getRequestUrlInternal(i)];return s&&l.push(this.getBaseResourcePath()),e!==""&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,i,s);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))l.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,i,l.toString(),e.abortSignal),this.unaryApiCall(l,a,e.httpMethod)}patchHttpOptions(e,i){const s=JSON.parse(JSON.stringify(e));for(const[l,a]of Object.entries(i))typeof a=="object"?s[l]=Object.assign(Object.assign({},s[l]),a):a!==void 0&&(s[l]=a);return s}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,i,s);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,i,l.toString(),e.abortSignal),this.streamApiCall(l,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,s,l){if(i&&i.timeout||l){const a=new AbortController,c=a.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const h=setTimeout(()=>a.abort(),i.timeout);h&&typeof h.unref=="function"&&h.unref()}l&&l.addEventListener("abort",()=>{a.abort()}),e.signal=c}return i&&i.extraBody!==null&&MD(e,i.extraBody),e.headers=await this.getHeadersInternal(i,s),e}async unaryApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async l=>(await yv(l),new Xf(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async l=>(await yv(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(e){return gn(this,arguments,function*(){var s;const l=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),a=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield he(l.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=a.decode(v,{stream:!0});try{const N=JSON.parse(_);if("error"in N){const D=JSON.parse(JSON.stringify(N.error)),U=D.status,G=D.code,K=`got status: ${U}. ${JSON.stringify(N)}`;if(G>=400&&G<600)throw new Pa({message:K,status:G})}}catch(N){if(N.name==="ApiError")throw N}c+=_;let E=-1,x=0;for(;;){E=-1,x=0;for(const U of g){const G=c.indexOf(U);G!==-1&&(E===-1||G<E)&&(E=G,x=U.length)}if(E===-1)break;const N=c.substring(0,E);c=c.substring(E+x);const D=N.trim();if(D.startsWith(h)){const U=D.substring(h.length).trim();try{const G=new Response(U,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield he(new Xf(G))}catch(G){throw new Error(`exception parsing stream chunk ${U}. ${G}`)}}}}}finally{l.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},i=ND+" "+this.clientOptions.userAgentExtra;return e[AD]=i,e[jf]=i,e[CD]="application/json",e}async getHeadersInternal(e,i){const s=new Headers;if(e&&e.headers){for(const[l,a]of Object.entries(e.headers))s.append(l,a);e.timeout&&e.timeout>0&&s.append(xD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,i),s}getFileName(e){var i;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(i=s.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),s}async uploadFile(e,i){var s;const l={};i!=null&&(l.mimeType=i.mimeType,l.name=i.name,l.displayName=i.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);l.sizeBytes=String(c.size);const h=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=h;const g={file:l},m=this.getFileName(e),v=Z("upload/v1beta/files",g._url),_=await this.fetchUploadUrl(v,l.sizeBytes,l.mimeType,m,g,i==null?void 0:i.httpOptions);return a.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,s){var l;const a=this.clientOptions.uploader,c=await a.stat(i),h=String(c.size),g=(l=s==null?void 0:s.mimeType)!==null&&l!==void 0?l:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),_={};s!=null&&wE(s,_);const E=await this.fetchUploadUrl(m,h,g,v,_,s==null?void 0:s.httpOptions);return a.uploadToFileSearchStore(i,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,s,l,a,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${s}`},l?{"X-Goog-Upload-File-Name":l}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function yv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const l=JSON.stringify(s);throw i>=400&&i<600?new Pa({message:l,status:i}):new Error(l)}}function MD(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))i=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(a,c){const h=Object.assign({},a);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const m=c[g],v=h[g];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[g]=m)}return h}const l=s(i,e);t.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DD="mcp_used/unknown";let UD=!1;function IE(t){for(const e of t)if(LD(e)||typeof e=="object"&&"inputSchema"in e)return!0;return UD}function ME(t){var e;const i=(e=t[jf])!==null&&e!==void 0?e:"";t[jf]=(i+` ${DD}`).trimStart()}function LD(t){return t!==null&&typeof t=="object"&&t instanceof Vd}function kD(t){return gn(this,arguments,function*(i,s=100){let l,a=0;for(;a<s;){const c=yield he(i.listTools({cursor:l}));for(const h of c.tools)yield yield he(h),a++;if(!c.nextCursor)break;l=c.nextCursor}})}class Vd{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new Vd(e,i)}async initialize(){var e,i,s,l;if(this.mcpTools.length>0)return;const a={},c=[];for(const v of this.mcpClients)try{for(var h=!0,g=(i=void 0,yn(kD(v))),m;m=await g.next(),e=m.done,!e;h=!0){l=m.value,h=!1;const _=l;c.push(_);const E=_.name;if(a[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);a[E]=v}}catch(_){i={error:_}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),dw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[s.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await l.callTool({name:s.name,arguments:s.args},void 0,a);i.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function PD(t,e,i){const s=new ow;let l;i.data instanceof Blob?l=JSON.parse(await i.data.text()):l=JSON.parse(i.data),Object.assign(s,l),e(s)}class OD{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s}async connect(e){var i,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const l=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=HD(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${l}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise(F=>{m=F}),_=e.callbacks,E=function(){m({})},x=this.apiClient,N={onopen:E,onmessage:F=>{PD(x,_.onmessage,F)},onerror:(i=_==null?void 0:_.onerror)!==null&&i!==void 0?i:function(F){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(F){}},D=this.webSocketFactory.create(g,GD(c),N);D.connect(),await v;const K={setup:{model:Me(this.apiClient,e.model)}};return D.send(JSON.stringify(K)),new zD(D,this.apiClient)}}class zD{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=uI(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=aI(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl($o.PLAY)}pause(){this.sendPlaybackControl($o.PAUSE)}stop(){this.sendPlaybackControl($o.STOP)}resetContext(){this.sendPlaybackControl($o.RESET_CONTEXT)}close(){this.conn.close()}}function GD(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function HD(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BD="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function VD(t,e,i){const s=new iw;let l;i.data instanceof Blob?l=await i.data.text():i.data instanceof ArrayBuffer?l=new TextDecoder().decode(i.data):l=i.data;const a=JSON.parse(l);if(t.isVertexAI()){const c=dI(a);Object.assign(s,c)}else Object.assign(s,a);e(s)}class qD{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s,this.music=new OD(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,s,l,a,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&IE(e.config.tools)&&ME(_);const E=KD(_);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,v);else{const M=this.apiClient.getApiKey();let J="BidiGenerateContent",ae="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),J="BidiGenerateContentConstrained",ae="access_token"),v=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${J}?${ae}=${M}`}let x=()=>{};const N=new Promise(M=>{x=M}),D=e.callbacks,U=function(){var M;(M=D==null?void 0:D.onopen)===null||M===void 0||M.call(D),x({})},G=this.apiClient,K={onopen:U,onmessage:M=>{VD(G,D.onmessage,M)},onerror:(i=D==null?void 0:D.onerror)!==null&&i!==void 0?i:function(M){},onclose:(s=D==null?void 0:D.onclose)!==null&&s!==void 0?s:function(M){}},F=this.webSocketFactory.create(v,JD(E),K);F.connect(),await N;let X=Me(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&X.startsWith("publishers/")){const M=this.apiClient.getProject(),J=this.apiClient.getLocation();X=`projects/${M}/locations/${J}/`+X}let se={};this.apiClient.isVertexAI()&&((l=e.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ta.AUDIO]}:e.config.responseModalities=[Ta.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const te=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],Y=[];for(const M of te)if(this.isCallableTool(M)){const J=M;Y.push(await J.tool())}else Y.push(M);Y.length>0&&(e.config.tools=Y);const ne={model:X,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?se=rI(this.apiClient,ne):se=lI(this.apiClient,ne),delete se.config,F.send(JSON.stringify(se)),new YD(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const FD={turnComplete:!0};class YD{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let s=[];try{s=ln(i.turns),e.isVertexAI()||(s=s.map(l=>Oa(l)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:s,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let s=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?s=i.functionResponses:s=[i.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const a of s){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(BD)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},FD),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:fI(e)}:i={realtimeInput:cI(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function JD(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function KD(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vv=10;function _v(t){var e,i,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let l=!1;for(const c of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(ns(c)){l=!0;break}if(!l)return!0;const a=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ns(t){return"callTool"in t&&typeof t.callTool=="function"}function XD(t){var e,i,s;return(s=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(l=>ns(l)))!==null&&s!==void 0?s:!1}function Ev(t){var e;const i=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,l)=>{if(ns(s))return;const a=s;a.functionDeclarations&&a.functionDeclarations.length>0&&i.push(l)}),i}function Sv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QD extends $n{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var s,l,a,c,h;const g=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!XD(i)||_v(i.config))return await this.generateContentInternal(g);const m=Ev(i);if(m.length>0){const D=m.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${D}.`)}let v,_;const E=ln(g.contents),x=(a=(l=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&a!==void 0?a:vv;let N=0;for(;N<x&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const D=v.candidates[0].content,U=[];for(const G of(h=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(ns(G)){const F=await G.callTool(v.functionCalls);U.push(...F)}N++,_={role:"user",parts:U},g.contents=ln(g.contents),g.contents.push(D),g.contents.push(_),Sv(g.config)&&(E.push(D),E.push(_))}return Sv(g.config)&&(v.automaticFunctionCallingHistory=E),v},this.generateContentStream=async i=>{var s,l,a,c,h;if(this.maybeMoveToResponseJsonSchem(i),_v(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const g=Ev(i);if(g.length>0){const _=g.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(a=(l=(s=i==null?void 0:i.config)===null||s===void 0?void 0:s.toolConfig)===null||l===void 0?void 0:l.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(h=(c=i==null?void 0:i.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(s=>{var l;let a;const c=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((l=g==null?void 0:g.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:c.push(g);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async i=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new so(Xn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async i=>{const s={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(s.referenceImages=i.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async i=>{let s={numberOfImages:1,mode:"upscale"};i.config&&(s=Object.assign(Object.assign({},s),i.config));const l={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:s};return await this.upscaleImageInternal(l)},this.generateVideos=async i=>{var s,l,a,c,h,g;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=i.video)===null||s===void 0)&&s.uri&&(!((l=i.video)===null||l===void 0)&&l.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(a=i.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((g=(h=i.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,s,l;const a=(i=e.config)===null||i===void 0?void 0:i.tools;if(!a)return e;const c=await Promise.all(a.map(async g=>ns(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&IE(e.config.tools)){const g=(l=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&l!==void 0?l:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),ME(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var i,s,l;const a=new Map;for(const c of(s=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&s!==void 0?s:[])if(ns(c)){const h=c,g=await h.tool();for(const m of(l=g.functionDeclarations)!==null&&l!==void 0?l:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,h)}}return a}async processAfcStream(e){var i,s,l;const a=(l=(s=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:vv;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(m,v,_){return gn(this,arguments,function*(){for(var E,x,N,D,U,G;h<a;){c&&(h++,c=!1);const se=yield he(m.processParamsMaybeAddMcpUsage(_)),te=yield he(m.generateContentStreamInternal(se)),Y=[],ne=[];try{for(var K=!0,F=(x=void 0,yn(te)),X;X=yield he(F.next()),E=X.done,!E;K=!0){D=X.value,K=!1;const M=D;if(yield yield he(M),M.candidates&&(!((U=M.candidates[0])===null||U===void 0)&&U.content)){ne.push(M.candidates[0].content);for(const J of(G=M.candidates[0].content.parts)!==null&&G!==void 0?G:[])if(h<a&&J.functionCall){if(!J.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(J.functionCall.name)){const ae=yield he(v.get(J.functionCall.name).callTool([J.functionCall]));Y.push(...ae)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${J.functionCall.name}`)}}}}catch(M){x={error:M}}finally{try{!K&&!E&&(N=F.return)&&(yield he(N.call(F)))}finally{if(x)throw x.error}}if(Y.length>0){c=!0;const M=new dl;M.candidates=[{content:{role:"user",parts:Y}}],yield yield he(M);const J=[];J.push(...ne),J.push({role:"user",parts:Y});const ae=ln(_.contents).concat(J);_.contents=ae}else break}})})(this,g,e)}async generateContentInternal(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=pv(this.apiClient,e);return h=Z("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=gv(v),E=new dl;return Object.assign(E,_),E})}else{const m=hv(this.apiClient,e);return h=Z("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=mv(v),E=new dl;return Object.assign(E,_),E})}}async generateContentStreamInternal(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=pv(this.apiClient,e);return h=Z("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(_){return gn(this,arguments,function*(){var E,x,N,D;try{for(var U=!0,G=yn(_),K;K=yield he(G.next()),E=K.done,!E;U=!0){D=K.value,U=!1;const F=D,X=gv(yield he(F.json()));X.sdkHttpResponse={headers:F.headers};const se=new dl;Object.assign(se,X),yield yield he(se)}}catch(F){x={error:F}}finally{try{!U&&!E&&(N=G.return)&&(yield he(N.call(G)))}finally{if(x)throw x.error}}})})}else{const m=hv(this.apiClient,e);return h=Z("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(_){return gn(this,arguments,function*(){var E,x,N,D;try{for(var U=!0,G=yn(_),K;K=yield he(G.next()),E=K.done,!E;U=!0){D=K.value,U=!1;const F=D,X=mv(yield he(F.json()));X.sdkHttpResponse={headers:F.headers};const se=new dl;Object.assign(se,X),yield yield he(se)}}catch(F){x={error:F}}finally{try{!U&&!E&&(N=G.return)&&(yield he(N.call(G)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=qI(this.apiClient,e);return h=Z("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=YI(v),E=new $0;return Object.assign(E,_),E})}else{const m=VI(this.apiClient,e);return h=Z("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=FI(v),E=new $0;return Object.assign(E,_),E})}}async generateImagesInternal(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=nM(this.apiClient,e);return h=Z("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=oM(v),E=new W0;return Object.assign(E,_),E})}else{const m=tM(this.apiClient,e);return h=Z("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=iM(v),E=new W0;return Object.assign(E,_),E})}}async editImageInternal(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=zI(this.apiClient,e);return a=Z("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const m=GI(g),v=new JR;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=nD(this.apiClient,e);return a=Z("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const m=iD(g),v=new KR;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=OM(this.apiClient,e);return a=Z("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const m=zM(g),v=new XR;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=FM(this.apiClient,e);return a=Z("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const m=YM(g),v=new QR;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=SM(this.apiClient,e);return h=Z("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Zf(v))}else{const m=EM(this.apiClient,e);return h=Z("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Wf(v))}}async listInternal(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=IM(this.apiClient,e);return h=Z("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=DM(v),E=new Z0;return Object.assign(E,_),E})}else{const m=wM(this.apiClient,e);return h=Z("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=MM(v),E=new Z0;return Object.assign(E,_),E})}}async update(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=eD(this.apiClient,e);return h=Z("{model}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Zf(v))}else{const m=jM(this.apiClient,e);return h=Z("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Wf(v))}}async delete(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=LI(this.apiClient,e);return h=Z("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=PI(v),E=new j0;return Object.assign(E,_),E})}else{const m=UI(this.apiClient,e);return h=Z("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=kI(v),E=new j0;return Object.assign(E,_),E})}}async countTokens(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=II(this.apiClient,e);return h=Z("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=DI(v),E=new ev;return Object.assign(E,_),E})}else{const m=wI(this.apiClient,e);return h=Z("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=MI(v),E=new ev;return Object.assign(E,_),E})}}async computeTokens(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=TI(this.apiClient,e);return a=Z("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const m=CI(g),v=new $R;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=cM(this.apiClient,e);return h=Z("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const _=aM(v),E=new Ca;return Object.assign(E,_),E})}else{const m=uM(this.apiClient,e);return h=Z("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>{const _=rM(v),E=new Ca;return Object.assign(E,_),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $D extends $n{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=i.name.split("/operations/")[0];let a;s&&"httpOptions"in s&&(a=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:l,config:{httpOptions:a}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async get(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=i.name.split("/operations/")[0];let a;s&&"httpOptions"in s&&(a=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:l,config:{httpOptions:a}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=HR(e);return h=Z("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const m=GR(e);return h=Z("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=DR(e);return a=Z("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WD(t){const e={},i=f(t,["data"]);if(i!=null&&d(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function ZD(t){const e={},i=f(t,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>r2(a))),d(e,["parts"],l)}const s=f(t,["role"]);return s!=null&&d(e,["role"],s),e}function jD(t,e,i){const s={},l=f(e,["expireTime"]);i!==void 0&&l!=null&&d(i,["expireTime"],l);const a=f(e,["newSessionExpireTime"]);i!==void 0&&a!=null&&d(i,["newSessionExpireTime"],a);const c=f(e,["uses"]);i!==void 0&&c!=null&&d(i,["uses"],c);const h=f(e,["liveConnectConstraints"]);i!==void 0&&h!=null&&d(i,["bidiGenerateContentSetup"],l2(t,h));const g=f(e,["lockAdditionalFields"]);return i!==void 0&&g!=null&&d(i,["fieldMask"],g),s}function e2(t,e){const i={},s=f(e,["config"]);return s!=null&&d(i,["config"],jD(t,s,i)),i}function t2(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function n2(t){const e={},i=f(t,["id"]);i!=null&&d(e,["id"],i);const s=f(t,["args"]);s!=null&&d(e,["args"],s);const l=f(t,["name"]);if(l!=null&&d(e,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function i2(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function o2(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function s2(t,e){const i={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],s);const l=f(t,["responseModalities"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","responseModalities"],l);const a=f(t,["temperature"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","temperature"],a);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=f(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","speechConfig"],Bd(_));const E=f(t,["thinkingConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","thinkingConfig"],E);const x=f(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],x);const N=f(t,["systemInstruction"]);e!==void 0&&N!=null&&d(e,["setup","systemInstruction"],ZD(Ct(N)));const D=f(t,["tools"]);if(e!==void 0&&D!=null){let te=fs(D);Array.isArray(te)&&(te=te.map(Y=>u2(cs(Y)))),d(e,["setup","tools"],te)}const U=f(t,["sessionResumption"]);e!==void 0&&U!=null&&d(e,["setup","sessionResumption"],a2(U));const G=f(t,["inputAudioTranscription"]);e!==void 0&&G!=null&&d(e,["setup","inputAudioTranscription"],G);const K=f(t,["outputAudioTranscription"]);e!==void 0&&K!=null&&d(e,["setup","outputAudioTranscription"],K);const F=f(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&d(e,["setup","realtimeInputConfig"],F);const X=f(t,["contextWindowCompression"]);e!==void 0&&X!=null&&d(e,["setup","contextWindowCompression"],X);const se=f(t,["proactivity"]);if(e!==void 0&&se!=null&&d(e,["setup","proactivity"],se),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function l2(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["setup","model"],Me(t,s));const l=f(e,["config"]);return l!=null&&d(i,["config"],s2(l,i)),i}function r2(t){const e={},i=f(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const s=f(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const l=f(t,["executableCode"]);l!=null&&d(e,["executableCode"],l);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],t2(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],n2(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],WD(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const _=f(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const E=f(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function a2(t){const e={},i=f(t,["handle"]);if(i!=null&&d(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function u2(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&d(e,["fileSearch"],s);const l=f(t,["codeExecution"]);if(l!=null&&d(e,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(_=>_)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],i2(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],o2(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c2(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const s=t[i];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const l=Object.keys(s).map(a=>`${i}.${a}`);e.push(...l)}else e.push(i)}return e.join(",")}function f2(t,e){let i=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const a=s.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,i=a):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const l=t.fieldMask;if(i){const a=c2(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];l.length>0&&(h=l.map(m=>c.includes(m)?`generationConfig.${m}`:m));const g=[];a&&g.push(a),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?t.fieldMask=l.join(","):delete t.fieldMask;return t}class d2 extends $n{constructor(e){super(),this.apiClient=e}async create(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=e2(this.apiClient,e);a=Z("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=f2(h,e.config);return l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),l.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h2(t,e){const i={},s=f(t,["force"]);return e!==void 0&&s!=null&&d(e,["_query","force"],s),i}function p2(t){const e={},i=f(t,["name"]);i!=null&&d(e,["_url","name"],i);const s=f(t,["config"]);return s!=null&&h2(s,e),e}function m2(t){const e={},i=f(t,["name"]);return i!=null&&d(e,["_url","name"],i),e}function g2(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const l=f(t,["pageToken"]);return e!==void 0&&l!=null&&d(e,["_query","pageToken"],l),i}function y2(t){const e={},i=f(t,["parent"]);i!=null&&d(e,["_url","parent"],i);const s=f(t,["config"]);return s!=null&&g2(s,e),e}function v2(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const l=f(t,["documents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _2 extends $n{constructor(e){super(),this.apiClient=e,this.list=async i=>new so(Xn.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:i.parent,config:s.config}),await this.listInternal(i),i)}async get(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=m2(e);return a=Z("{name}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var i,s;let l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=p2(e);l=Z("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=y2(e);return a=Z("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const m=v2(g),v=new WR;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E2 extends $n{constructor(e,i=new _2(e)){super(),this.apiClient=e,this.documents=i,this.list=async(s={})=>new so(Xn.PAGED_ITEM_FILE_SEARCH_STORES,l=>this.listInternal(l),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=cD(e);return a=Z("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async get(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=hD(e);return a=Z("{name}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var i,s;let l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=dD(e);l=Z("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_D(e);return a=Z("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const m=ED(g),v=new ZR;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=SD(e);return a=Z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const m=TD(g),v=new jR;return Object.assign(v,m),v})}}async importFile(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=gD(e);return a=Z("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const m=mD(g),v=new Pd;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let DE=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return DE=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^i()&15>>+s/4).toString(16))};const S2=()=>DE();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ed(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const td=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class an extends Error{}class Rt extends an{constructor(e,i,s,l){super(`${Rt.makeMessage(e,i,s)}`),this.status=e,this.headers=l,this.error=i}static makeMessage(e,i,s){const l=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):s;return e&&l?`${e} ${l}`:e?`${e} status code (no body)`:l||"(no status code or body)"}static generate(e,i,s,l){if(!e||!l)return new Ha({message:s,cause:td(i)});const a=i;return e===400?new LE(e,a,s,l):e===401?new kE(e,a,s,l):e===403?new PE(e,a,s,l):e===404?new OE(e,a,s,l):e===409?new zE(e,a,s,l):e===422?new GE(e,a,s,l):e===429?new HE(e,a,s,l):e>=500?new BE(e,a,s,l):new Rt(e,a,s,l)}}class nd extends Rt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ha extends Rt{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class UE extends Ha{constructor({message:e}={}){super({message:e??"Request timed out."})}}class LE extends Rt{}class kE extends Rt{}class PE extends Rt{}class OE extends Rt{}class zE extends Rt{}class GE extends Rt{}class HE extends Rt{}class BE extends Rt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const T2=/^[a-z][a-z0-9+.-]*:/i,C2=t=>T2.test(t);let id=t=>(id=Array.isArray,id(t));const x2=id;let A2=x2;const Tv=A2;function b2(t){if(!t)return!0;for(const e in t)return!1;return!0}function N2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const R2=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new an(`${t} must be an integer`);if(e<0)throw new an(`${t} must be a positive integer`);return e},w2=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I2=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M2(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const D2=()=>{var t,e,i,s,l;const a=M2();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xo,"X-Stainless-OS":xv(Deno.build.os),"X-Stainless-Arch":Cv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xo,"X-Stainless-OS":xv((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":Cv((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(l=globalThis.process.version)!==null&&l!==void 0?l:"unknown"};const c=U2();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function U2(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const s=i.exec(navigator.userAgent);if(s){const l=s[1]||0,a=s[2]||0,c=s[3]||0;return{browser:e,version:`${l}.${a}.${c}`}}}return null}const Cv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",xv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let jr;const L2=()=>jr??(jr=D2());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k2(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function VE(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function P2(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return VE({start(){},async pull(i){const{done:s,value:l}=await e.next();s?i.close():i.enqueue(l)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function qE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function O2(t){var e,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(e=t[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const s=t.getReader(),l=s.cancel();s.releaseLock(),await l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z2=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FE=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function bf(t,e,i){return FE(),new File(t,e??"unknown_file",i)}function G2(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const H2=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YE=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",B2=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&YE(t),V2=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function q2(t,e,i){if(FE(),t=await t,B2(t))return t instanceof File?t:bf([await t.arrayBuffer()],t.name);if(V2(t)){const l=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),bf(await od(l),e,i)}const s=await od(t);if(e||(e=G2(t)),!(i!=null&&i.type)){const l=s.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof l=="string"&&(i=Object.assign(Object.assign({},i),{type:l}))}return bf(s,e,i)}async function od(t){var e,i,s,l,a;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(YE(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(H2(t))try{for(var h=!0,g=yn(t),m;m=await g.next(),e=m.done,!e;h=!0){l=m.value,h=!1;const v=l;c.push(...await od(v))}}catch(v){i={error:v}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(i)throw i.error}}else{const v=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${F2(t)}`)}return c}function F2(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JE{constructor(e){this._client=e}}JE._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KE(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Av=Object.freeze(Object.create(null)),Y2=(t=KE)=>(function(i,...s){if(i.length===1)return i[0];let l=!1;const a=[],c=i.reduce((v,_,E)=>{var x,N,D;/[?#]/.test(_)&&(l=!0);const U=s[E];let G=(l?encodeURIComponent:t)(""+U);return E!==s.length&&(U==null||typeof U=="object"&&U.toString===((D=Object.getPrototypeOf((N=Object.getPrototypeOf((x=U.hasOwnProperty)!==null&&x!==void 0?x:Av))!==null&&N!==void 0?N:Av))===null||D===void 0?void 0:D.toString))&&(G=U+"",a.push({start:v.length+_.length,length:G.length,error:`Value of type ${Object.prototype.toString.call(U).slice(8,-1)} is not a valid path parameter`})),v+_+(E===s.length?"":G)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(h))!==null;)a.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(a.sort((v,_)=>v.start-_.start),a.length>0){let v=0;const _=a.reduce((E,x)=>{const N=" ".repeat(x.start-v),D="^".repeat(x.length);return v=x.start+x.length,E+N+D},"");throw new an(`Path parameters result in path with invalid segments:
${a.map(E=>E.error).join(`
`)}
${c}
${_}`)}return c}),ea=Y2(KE);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XE extends JE{create(e,i){var s;const{api_version:l=this._client.apiVersion}=e,a=Aa(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new an("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new an("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ea`/${l}/interactions`,Object.assign(Object.assign({body:a},i),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,i={},s){const{api_version:l=this._client.apiVersion}=i??{};return this._client.delete(ea`/${l}/interactions/${e}`,s)}cancel(e,i={},s){const{api_version:l=this._client.apiVersion}=i??{};return this._client.post(ea`/${l}/interactions/${e}/cancel`,s)}get(e,i={},s){var l;const a=i??{},{api_version:c=this._client.apiVersion}=a,h=Aa(a,["api_version"]);return this._client.get(ea`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(l=i==null?void 0:i.stream)!==null&&l!==void 0?l:!1}))}}XE._key=Object.freeze(["interactions"]);class QE extends XE{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J2(t){let e=0;for(const l of t)e+=l.length;const i=new Uint8Array(e);let s=0;for(const l of t)i.set(l,s),s+=l.length;return i}let ta;function qd(t){let e;return(ta??(e=new globalThis.TextEncoder,ta=e.encode.bind(e)))(t)}let na;function bv(t){let e;return(na??(e=new globalThis.TextDecoder,na=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ba{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?qd(e):e;this.buffer=J2([this.buffer,i]);const s=[];let l;for(;(l=K2(this.buffer,this.carriageReturnIndex))!=null;){if(l.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=l.index;continue}if(this.carriageReturnIndex!=null&&(l.index!==this.carriageReturnIndex+1||l.carriage)){s.push(bv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?l.preceding-1:l.preceding,c=bv(this.buffer.subarray(0,a));s.push(c),this.buffer=this.buffer.subarray(l.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Ba.NEWLINE_CHARS=new Set([`
`,"\r"]);Ba.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function K2(t,e){for(let l=e??0;l<t.length;l++){if(t[l]===10)return{preceding:l,index:l+1,carriage:!1};if(t[l]===13)return{preceding:l,index:l+1,carriage:!0}}return null}function X2(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ba={off:0,error:200,warn:300,info:400,debug:500},Nv=(t,e,i)=>{if(t){if(N2(ba,t))return t;Nt(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ba))}`)}};function pl(){}function ia(t,e,i){return!e||ba[t]>ba[i]?pl:e[t].bind(e)}const Q2={error:pl,warn:pl,info:pl,debug:pl};let Rv=new WeakMap;function Nt(t){var e;const i=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!i)return Q2;const l=Rv.get(i);if(l&&l[0]===s)return l[1];const a={error:ia("error",i,s),warn:ia("warn",i,s),info:ia("info",i,s),debug:ia("debug",i,s)};return Rv.set(i,[s,a]),a}const Wi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wo{constructor(e,i,s){this.iterator=e,this.controller=i,this.client=s}static fromSSEResponse(e,i,s){let l=!1;const a=s?Nt(s):console;function c(){return gn(this,arguments,function*(){var g,m,v,_;if(l)throw new an("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let E=!1;try{try{for(var x=!0,N=yn($2(e,i)),D;D=yield he(N.next()),g=D.done,!g;x=!0){_=D.value,x=!1;const U=_;if(!E)if(U.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield he(JSON.parse(U.data))}catch(G){throw a.error("Could not parse message into JSON:",U.data),a.error("From chunk:",U.raw),G}}}catch(U){m={error:U}}finally{try{!x&&!g&&(v=N.return)&&(yield he(v.call(N)))}finally{if(m)throw m.error}}E=!0}catch(U){if(ed(U))return yield he(void 0);throw U}finally{E||i.abort()}})}return new Wo(c,i,s)}static fromReadableStream(e,i,s){let l=!1;function a(){return gn(this,arguments,function*(){var g,m,v,_;const E=new Ba,x=qE(e);try{for(var N=!0,D=yn(x),U;U=yield he(D.next()),g=U.done,!g;N=!0){_=U.value,N=!1;const G=_;for(const K of E.decode(G))yield yield he(K)}}catch(G){m={error:G}}finally{try{!N&&!g&&(v=D.return)&&(yield he(v.call(D)))}finally{if(m)throw m.error}}for(const G of E.flush())yield yield he(G)})}function c(){return gn(this,arguments,function*(){var g,m,v,_;if(l)throw new an("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let E=!1;try{try{for(var x=!0,N=yn(a()),D;D=yield he(N.next()),g=D.done,!g;x=!0){_=D.value,x=!1;const U=_;E||U&&(yield yield he(JSON.parse(U)))}}catch(U){m={error:U}}finally{try{!x&&!g&&(v=N.return)&&(yield he(v.call(N)))}finally{if(m)throw m.error}}E=!0}catch(U){if(ed(U))return yield he(void 0);throw U}finally{E||i.abort()}})}return new Wo(c,i,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],s=this.iterator(),l=a=>({next:()=>{if(a.length===0){const c=s.next();e.push(c),i.push(c)}return a.shift()}});return[new Wo(()=>l(e),this.controller,this.client),new Wo(()=>l(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return VE({async start(){i=e[Symbol.asyncIterator]()},async pull(s){try{const{value:l,done:a}=await i.next();if(a)return s.close();const c=qd(JSON.stringify(l)+`
`);s.enqueue(c)}catch(l){s.error(l)}},async cancel(){var s;await((s=i.return)===null||s===void 0?void 0:s.call(i))}})}}function $2(t,e){return gn(this,arguments,function*(){var s,l,a,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new an("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new an("Attempted to iterate over a response with no body");const h=new Z2,g=new Ba,m=qE(t.body);try{for(var v=!0,_=yn(W2(m)),E;E=yield he(_.next()),s=E.done,!s;v=!0){c=E.value,v=!1;const x=c;for(const N of g.decode(x)){const D=h.decode(N);D&&(yield yield he(D))}}}catch(x){l={error:x}}finally{try{!v&&!s&&(a=_.return)&&(yield he(a.call(_)))}finally{if(l)throw l.error}}for(const x of g.flush()){const N=h.decode(x);N&&(yield yield he(N))}})}function W2(t){return gn(this,arguments,function*(){var i,s,l,a;let c=new Uint8Array;try{for(var h=!0,g=yn(t),m;m=yield he(g.next()),i=m.done,!i;h=!0){a=m.value,h=!1;const v=a;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?qd(v):v;let E=new Uint8Array(c.length+_.length);E.set(c),E.set(_,c.length),c=E;let x;for(;(x=X2(c))!==-1;)yield yield he(c.slice(0,x)),c=c.slice(x)}}catch(v){s={error:v}}finally{try{!h&&!i&&(l=g.return)&&(yield he(l.call(g)))}finally{if(s)throw s.error}}c.length>0&&(yield yield he(c))})}class Z2{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,s,l]=j2(e,":");return l.startsWith(" ")&&(l=l.substring(1)),i==="event"?this.event=l:i==="data"&&this.data.push(l),null}}function j2(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function eU(t,e){const{response:i,requestLogID:s,retryOfRequestLogID:l,startTime:a}=e,c=await(async()=>{var h;if(e.options.stream)return Nt(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):Wo.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const g=i.headers.get("content-type"),m=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await i.json():await i.text()})();return Nt(t).debug(`[${s}] response parsed`,Wi({retryOfRequestLogID:l,url:i.url,status:i.status,body:c,durationMs:Date.now()-a})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fd extends Promise{constructor(e,i,s=eU){super(l=>{l(null)}),this.responsePromise=i,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Fd(this.client,this.responsePromise,async(i,s)=>e(await this.parseResponse(i,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $E=Symbol("brand.privateNullableHeaders");function*tU(t){if(!t)return;if($E in t){const{values:s,nulls:l}=t;yield*s.entries();for(const a of l)yield[a,null];return}let e=!1,i;t instanceof Headers?i=t.entries():Tv(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let s of i){const l=s[0];if(typeof l!="string")throw new TypeError("expected header name to be a string");const a=Tv(s[1])?s[1]:[s[1]];let c=!1;for(const h of a)h!==void 0&&(e&&!c&&(c=!0,yield[l,null]),yield[l,h])}}const hl=t=>{const e=new Headers,i=new Set;for(const s of t){const l=new Set;for(const[a,c]of tU(s)){const h=a.toLowerCase();l.has(h)||(e.delete(a),l.add(h)),c===null?(e.delete(a),i.add(h)):(e.append(a,c),i.delete(h))}}return{[$E]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nf=t=>{var e,i,s,l,a,c;if(typeof globalThis.process<"u")return(s=(i=(e=bR)===null||e===void 0?void 0:e[t])===null||i===void 0?void 0:i.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(a=(l=globalThis.Deno.env)===null||l===void 0?void 0:l.get)===null||a===void 0?void 0:a.call(l,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var WE;class Va{constructor(e){var i,s,l,a,c,h,g,{baseURL:m=Nf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(i=Nf("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:_="v1beta"}=e,E=Aa(e,["baseURL","apiKey","apiVersion"]);const x=Object.assign(Object.assign({apiKey:v,apiVersion:_},E),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=x.baseURL,this.timeout=(s=x.timeout)!==null&&s!==void 0?s:Va.DEFAULT_TIMEOUT,this.logger=(l=x.logger)!==null&&l!==void 0?l:console;const N="warn";this.logLevel=N,this.logLevel=(c=(a=Nv(x.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:Nv(Nf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:N,this.fetchOptions=x.fetchOptions,this.maxRetries=(h=x.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=x.fetch)!==null&&g!==void 0?g:k2(),this.encoder=z2,this._options=x,this.apiKey=v,this.apiVersion=_,this.clientAdapter=x.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=hl([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return hl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return hl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,s])=>typeof s<"u").map(([i,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(i)}=`;throw new an(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Xo}`}defaultIdempotencyKey(){return`stainless-node-retry-${S2()}`}makeStatusError(e,i,s,l){return Rt.generate(e,i,s,l)}buildURL(e,i,s){const l=!this.baseURLOverridden()&&s||this.baseURL,a=C2(e)?new URL(e):new URL(l+(l.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return b2(c)||(i=Object.assign(Object.assign({},c),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(a.search=this.stringifyQuery(i)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:s}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,s){return this.request(Promise.resolve(s).then(l=>Object.assign({method:e,path:i},l)))}request(e,i=null){return new Fd(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,s){var l,a,c;const h=await e,g=(l=h.maxRetries)!==null&&l!==void 0?l:this.maxRetries;i==null&&(i=g),await this.prepareOptions(h);const{req:m,url:v,timeout:_}=await this.buildRequest(h,{retryCount:g-i});await this.prepareRequest(m,{url:v,options:h});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),x=s===void 0?"":`, retryOf: ${s}`,N=Date.now();if(Nt(this).debug(`[${E}] sending request`,Wi({retryOfRequestLogID:s,method:h.method,url:v,options:h,headers:m.headers})),!((a=h.signal)===null||a===void 0)&&a.aborted)throw new nd;const D=new AbortController,U=await this.fetchWithTimeout(v,m,_,D).catch(td),G=Date.now();if(U instanceof globalThis.Error){const F=`retrying, ${i} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new nd;const X=ed(U)||/timed? ?out/i.test(String(U)+("cause"in U?String(U.cause):""));if(i)return Nt(this).info(`[${E}] connection ${X?"timed out":"failed"} - ${F}`),Nt(this).debug(`[${E}] connection ${X?"timed out":"failed"} (${F})`,Wi({retryOfRequestLogID:s,url:v,durationMs:G-N,message:U.message})),this.retryRequest(h,i,s??E);throw Nt(this).info(`[${E}] connection ${X?"timed out":"failed"} - error; no more retries left`),Nt(this).debug(`[${E}] connection ${X?"timed out":"failed"} (error; no more retries left)`,Wi({retryOfRequestLogID:s,url:v,durationMs:G-N,message:U.message})),X?new UE:new Ha({cause:U})}const K=`[${E}${x}] ${m.method} ${v} ${U.ok?"succeeded":"failed"} with status ${U.status} in ${G-N}ms`;if(!U.ok){const F=await this.shouldRetry(U);if(i&&F){const M=`retrying, ${i} attempts remaining`;return await O2(U.body),Nt(this).info(`${K} - ${M}`),Nt(this).debug(`[${E}] response error (${M})`,Wi({retryOfRequestLogID:s,url:U.url,status:U.status,headers:U.headers,durationMs:G-N})),this.retryRequest(h,i,s??E,U.headers)}const X=F?"error; no more retries left":"error; not retryable";Nt(this).info(`${K} - ${X}`);const se=await U.text().catch(M=>td(M).message),te=w2(se),Y=te?void 0:se;throw Nt(this).debug(`[${E}] response error (${X})`,Wi({retryOfRequestLogID:s,url:U.url,status:U.status,headers:U.headers,message:Y,durationMs:Date.now()-N})),this.makeStatusError(U.status,te,Y,U.headers)}return Nt(this).info(K),Nt(this).debug(`[${E}] response start`,Wi({retryOfRequestLogID:s,url:U.url,status:U.status,headers:U.headers,durationMs:G-N})),{response:U,options:h,controller:D,requestLogID:E,retryOfRequestLogID:s,startTime:N}}async fetchWithTimeout(e,i,s,l){const a=i||{},{signal:c,method:h}=a,g=Aa(a,["signal","method"]);c&&c.addEventListener("abort",()=>l.abort());const m=setTimeout(()=>l.abort(),s),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,_=Object.assign(Object.assign(Object.assign({signal:l.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(m)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,s,l){var a;let c;const h=l==null?void 0:l.get("retry-after-ms");if(h){const m=parseFloat(h);Number.isNaN(m)||(c=m)}const g=l==null?void 0:l.get("retry-after");if(g&&!c){const m=parseFloat(g);Number.isNaN(m)?c=Date.parse(g)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(i,m)}return await I2(c),this.makeRequest(e,i-1,s)}calculateDefaultRetryTimeoutMillis(e,i){const a=i-e,c=Math.min(.5*Math.pow(2,a),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:i=0}={}){var s,l,a;const c=Object.assign({},e),{method:h,path:g,query:m,defaultBaseURL:v}=c,_=this.buildURL(g,m,v);"timeout"in c&&R2("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:E,body:x}=this.buildBody({options:c}),N=await this.buildHeaders({options:e,method:h,bodyHeaders:E,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:N},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&x instanceof globalThis.ReadableStream&&{duplex:"half"}),x&&{body:x}),(l=this.fetchOptions)!==null&&l!==void 0?l:{}),(a=c.fetchOptions)!==null&&a!==void 0?a:{}),url:_,timeout:c.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:s,retryCount:l}){let a={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=hl([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(l)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),L2()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=hl([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:P2(e)}:this.encoder({body:e,headers:s})}}Va.DEFAULT_TIMEOUT=6e4;class dt extends Va{constructor(){super(...arguments),this.interactions=new QE(this)}}WE=dt;dt.GeminiNextGenAPIClient=WE;dt.GeminiNextGenAPIClientError=an;dt.APIError=Rt;dt.APIConnectionError=Ha;dt.APIConnectionTimeoutError=UE;dt.APIUserAbortError=nd;dt.NotFoundError=OE;dt.ConflictError=zE;dt.RateLimitError=HE;dt.BadRequestError=LE;dt.AuthenticationError=kE;dt.InternalServerError=BE;dt.PermissionDeniedError=PE;dt.UnprocessableEntityError=GE;dt.toFile=q2;dt.Interactions=QE;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nU(t,e){const i={},s=f(t,["name"]);return s!=null&&d(i,["_url","name"],s),i}function iU(t,e){const i={},s=f(t,["name"]);return s!=null&&d(i,["_url","name"],s),i}function oU(t,e){const i={},s=f(t,["sdkHttpResponse"]);return s!=null&&d(i,["sdkHttpResponse"],s),i}function sU(t,e){const i={},s=f(t,["sdkHttpResponse"]);return s!=null&&d(i,["sdkHttpResponse"],s),i}function lU(t,e,i){const s={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const l=f(t,["tunedModelDisplayName"]);if(e!==void 0&&l!=null&&d(e,["displayName"],l),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(t,["epochCount"]);e!==void 0&&a!=null&&d(e,["tuningTask","hyperparameters","epochCount"],a);const c=f(t,["learningRateMultiplier"]);if(c!=null&&d(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=f(t,["batchSize"]);e!==void 0&&h!=null&&d(e,["tuningTask","hyperparameters","batchSize"],h);const g=f(t,["learningRate"]);if(e!==void 0&&g!=null&&d(e,["tuningTask","hyperparameters","learningRate"],g),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function rU(t,e,i){const s={};let l=f(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const x=f(t,["validationDataset"]);e!==void 0&&x!=null&&d(e,["supervisedTuningSpec"],wv(x))}else if(l==="PREFERENCE_TUNING"){const x=f(t,["validationDataset"]);e!==void 0&&x!=null&&d(e,["preferenceOptimizationSpec"],wv(x))}const a=f(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&d(e,["tunedModelDisplayName"],a);const c=f(t,["description"]);e!==void 0&&c!=null&&d(e,["description"],c);let h=f(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const x=f(t,["epochCount"]);e!==void 0&&x!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],x)}else if(h==="PREFERENCE_TUNING"){const x=f(t,["epochCount"]);e!==void 0&&x!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],x)}let g=f(i,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const x=f(t,["learningRateMultiplier"]);e!==void 0&&x!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],x)}else if(g==="PREFERENCE_TUNING"){const x=f(t,["learningRateMultiplier"]);e!==void 0&&x!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],x)}let m=f(i,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const x=f(t,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],x)}else if(m==="PREFERENCE_TUNING"){const x=f(t,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],x)}let v=f(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const x=f(t,["adapterSize"]);e!==void 0&&x!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],x)}else if(v==="PREFERENCE_TUNING"){const x=f(t,["adapterSize"]);e!==void 0&&x!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],x)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=f(t,["labels"]);e!==void 0&&_!=null&&d(e,["labels"],_);const E=f(t,["beta"]);return e!==void 0&&E!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),s}function aU(t,e){const i={},s=f(t,["baseModel"]);s!=null&&d(i,["baseModel"],s);const l=f(t,["preTunedModel"]);l!=null&&d(i,["preTunedModel"],l);const a=f(t,["trainingDataset"]);a!=null&&_U(a);const c=f(t,["config"]);return c!=null&&lU(c,i),i}function uU(t,e){const i={},s=f(t,["baseModel"]);s!=null&&d(i,["baseModel"],s);const l=f(t,["preTunedModel"]);l!=null&&d(i,["preTunedModel"],l);const a=f(t,["trainingDataset"]);a!=null&&EU(a,i,e);const c=f(t,["config"]);return c!=null&&rU(c,i,e),i}function cU(t,e){const i={},s=f(t,["name"]);return s!=null&&d(i,["_url","name"],s),i}function fU(t,e){const i={},s=f(t,["name"]);return s!=null&&d(i,["_url","name"],s),i}function dU(t,e,i){const s={},l=f(t,["pageSize"]);e!==void 0&&l!=null&&d(e,["_query","pageSize"],l);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&d(e,["_query","pageToken"],a);const c=f(t,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),s}function hU(t,e,i){const s={},l=f(t,["pageSize"]);e!==void 0&&l!=null&&d(e,["_query","pageSize"],l);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&d(e,["_query","pageToken"],a);const c=f(t,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),s}function pU(t,e){const i={},s=f(t,["config"]);return s!=null&&dU(s,i),i}function mU(t,e){const i={},s=f(t,["config"]);return s!=null&&hU(s,i),i}function gU(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const l=f(t,["nextPageToken"]);l!=null&&d(i,["nextPageToken"],l);const a=f(t,["tunedModels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>ZE(h))),d(i,["tuningJobs"],c)}return i}function yU(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const l=f(t,["nextPageToken"]);l!=null&&d(i,["nextPageToken"],l);const a=f(t,["tuningJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>sd(h))),d(i,["tuningJobs"],c)}return i}function vU(t,e){const i={},s=f(t,["name"]);s!=null&&d(i,["model"],s);const l=f(t,["name"]);return l!=null&&d(i,["endpoint"],l),i}function _U(t,e){const i={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(t,["examples"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),d(i,["examples","examples"],l)}return i}function EU(t,e,i){const s={};let l=f(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let a=f(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function ZE(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const l=f(t,["name"]);l!=null&&d(i,["name"],l);const a=f(t,["state"]);a!=null&&d(i,["state"],pE(a));const c=f(t,["createTime"]);c!=null&&d(i,["createTime"],c);const h=f(t,["tuningTask","startTime"]);h!=null&&d(i,["startTime"],h);const g=f(t,["tuningTask","completeTime"]);g!=null&&d(i,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&d(i,["updateTime"],m);const v=f(t,["description"]);v!=null&&d(i,["description"],v);const _=f(t,["baseModel"]);_!=null&&d(i,["baseModel"],_);const E=f(t,["_self"]);return E!=null&&d(i,["tunedModel"],vU(E)),i}function sd(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const l=f(t,["name"]);l!=null&&d(i,["name"],l);const a=f(t,["state"]);a!=null&&d(i,["state"],pE(a));const c=f(t,["createTime"]);c!=null&&d(i,["createTime"],c);const h=f(t,["startTime"]);h!=null&&d(i,["startTime"],h);const g=f(t,["endTime"]);g!=null&&d(i,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&d(i,["updateTime"],m);const v=f(t,["error"]);v!=null&&d(i,["error"],v);const _=f(t,["description"]);_!=null&&d(i,["description"],_);const E=f(t,["baseModel"]);E!=null&&d(i,["baseModel"],E);const x=f(t,["tunedModel"]);x!=null&&d(i,["tunedModel"],x);const N=f(t,["preTunedModel"]);N!=null&&d(i,["preTunedModel"],N);const D=f(t,["supervisedTuningSpec"]);D!=null&&d(i,["supervisedTuningSpec"],D);const U=f(t,["preferenceOptimizationSpec"]);U!=null&&d(i,["preferenceOptimizationSpec"],U);const G=f(t,["tuningDataStats"]);G!=null&&d(i,["tuningDataStats"],G);const K=f(t,["encryptionSpec"]);K!=null&&d(i,["encryptionSpec"],K);const F=f(t,["partnerModelTuningSpec"]);F!=null&&d(i,["partnerModelTuningSpec"],F);const X=f(t,["customBaseModel"]);X!=null&&d(i,["customBaseModel"],X);const se=f(t,["experiment"]);se!=null&&d(i,["experiment"],se);const te=f(t,["labels"]);te!=null&&d(i,["labels"],te);const Y=f(t,["outputUri"]);Y!=null&&d(i,["outputUri"],Y);const ne=f(t,["pipelineJob"]);ne!=null&&d(i,["pipelineJob"],ne);const M=f(t,["serviceAccount"]);M!=null&&d(i,["serviceAccount"],M);const J=f(t,["tunedModelDisplayName"]);J!=null&&d(i,["tunedModelDisplayName"],J);const ae=f(t,["veoTuningSpec"]);return ae!=null&&d(i,["veoTuningSpec"],ae),i}function SU(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const l=f(t,["name"]);l!=null&&d(i,["name"],l);const a=f(t,["metadata"]);a!=null&&d(i,["metadata"],a);const c=f(t,["done"]);c!=null&&d(i,["done"],c);const h=f(t,["error"]);return h!=null&&d(i,["error"],h),i}function wv(t,e){const i={},s=f(t,["gcsUri"]);s!=null&&d(i,["validationDatasetUri"],s);const l=f(t,["vertexDatasetResource"]);return l!=null&&d(i,["validationDatasetUri"],l),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TU extends $n{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new so(Xn.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var s;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const l={tunedModelName:i.baseModel};!((s=i.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(l.checkpointId=i.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},i),{preTunedModel:l});return a.baseModel=void 0,await this.tuneInternal(a)}else{const l=Object.assign({},i);return await this.tuneInternal(l)}else{const l=Object.assign({},i),a=await this.tuneMldevInternal(l);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:Kf.JOB_STATE_QUEUED}}}}async getInternal(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=fU(e);return h=Z("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>sd(v))}else{const m=cU(e);return h=Z("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>ZE(v))}}async listInternal(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=mU(e);return h=Z("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=yU(v),E=new tv;return Object.assign(E,_),E})}else{const m=pU(e);return h=Z("tunedModels",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=gU(v),E=new tv;return Object.assign(E,_),E})}}async cancel(e){var i,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=iU(e);return h=Z("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=sU(v),E=new nv;return Object.assign(E,_),E})}else{const m=nU(e);return h=Z("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=oU(v),E=new nv;return Object.assign(E,_),E})}}async tuneInternal(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=uU(e,e);return a=Z("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>sd(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=aU(e);return a=Z("tunedModels",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>SU(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CU{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const xU=1024*1024*8,AU=3,bU=1e3,NU=2,Na="x-goog-upload-status";async function RU(t,e,i){var s;const l=await jE(t,e,i),a=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[Na])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function wU(t,e,i){var s;const l=await jE(t,e,i),a=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[Na])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=aE(a),h=new Od;return Object.assign(h,c),h}async function jE(t,e,i){var s,l;let a=0,c=0,h=new Xf(new Response),g="upload";for(a=t.size;c<a;){const m=Math.min(xU,a-c),v=t.slice(c,c+m);c+m>=a&&(g+=", finalize");let _=0,E=bU;for(;_<AU&&(h=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[Na]));)_++,await MU(E),E=E*NU;if(c+=m,((l=h==null?void 0:h.headers)===null||l===void 0?void 0:l[Na])!=="active")break;if(a<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function IU(t){return{size:t.size,type:t.type}}function MU(t){return new Promise(e=>setTimeout(e,t))}class DU{async upload(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RU(e,i,s)}async uploadToFileSearchStore(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wU(e,i,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UU{create(e,i,s){return new LU(e,i,s)}}class LU{constructor(e,i,s){this.url=e,this.headers=i,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Iv="x-goog-api-key";class kU{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(Iv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Iv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PU="gl-node/";class OU{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new dt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=i.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const s=IR(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const l=new kU(this.apiKey);this.apiClient=new ID({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:PU+"web",uploader:new DU,downloader:new CU}),this.models=new QD(this.apiClient),this.live=new qD(this.apiClient,l,new UU),this.batches=new s1(this.apiClient),this.chats=new H1(this.models,this.apiClient),this.caches=new O1(this.apiClient),this.files=new $1(this.apiClient),this.operations=new $D(this.apiClient),this.authTokens=new d2(this.apiClient),this.tunings=new TU(this.apiClient),this.fileSearchStores=new E2(this.apiClient)}}const eS=new OU({apiKey:"PLACEHOLDER_API_KEY"}),zU=async(t,e)=>{var i;try{const s=`Voc  um General de Diviso Blindada brasileiro duro em uma guerra de tanques futuristas.
    O jogador terminou a batalha.
    Pontuao: ${t}
    Recorde: ${e}
    Escreva um relatrio militar seco e impactante (mx 20 palavras) em PT-BR.
    Use termos: "Blindagem", "Lagartas", "Setor", "Fogo Amigo", "Engajamento", "Perfurante".
    Se recorde: Respeito militar. Se mal: Sarcasmo pesado.`;return((i=(await eS.models.generateContent({model:"gemini-3-flash-preview",contents:s})).text)==null?void 0:i.trim())||"Relatrio interceptado. Volte ao combate!"}catch{return"As comunicaes falharam! Continue atirando, soldado!"}},GU=async t=>{var e;try{const i=`Voc  o Engenheiro Chefe de Manuteno do exrcito de tanques. 
    Um soldado reportou o seguinte problema tcnico: "${t}"
    Responda em PT-BR como se estivesse anotando o problema em um dossi tcnico. 
    Seja breve, militar e assegure que os mecnicos vo trabalhar nisso. Use termos como "Chassi", "Transmisso", "Software de Mira", "Anomalia Detectada". (mx 25 palavras)`;return((e=(await eS.models.generateContent({model:"gemini-3-flash-preview",contents:i})).text)==null?void 0:e.trim())||"Anomalia registrada. Nossas equipes de engenharia esto a caminho."}catch{return"Relatrio recebido via canais de emergncia. Manuteno agendada."}},HU=({user:t,onBack:e})=>{const[i,s]=de.useState("BUG"),[l,a]=de.useState(""),[c,h]=de.useState(!1),[g,m]=de.useState(null),v=async _=>{if(_.preventDefault(),!!l.trim()){h(!0);try{await ye.feedback.submit({username:t.username,type:i,description:l});const E=await GU(l);m(E)}catch(E){console.error(E)}finally{h(!1)}}};return C.jsxs("div",{className:"z-20 w-[92%] max-w-lg p-6 sm:p-10 rounded-[2.5rem] bg-zinc-900 border border-amber-500/20 shadow-[0_0_80px_rgba(245,158,11,0.1)] flex flex-col animate-in fade-in zoom-in duration-500 overflow-hidden max-h-[90dvh]",children:[C.jsxs("div",{className:"flex justify-between items-start mb-8 shrink-0",children:[C.jsxs("div",{children:[C.jsxs("h2",{className:"text-2xl font-orbitron font-black text-amber-500 flex items-center gap-3 italic",children:[C.jsx("i",{className:"fas fa-satellite-dish animate-pulse"})," TRANSMISSO TCNICA"]}),C.jsx("p",{className:"text-[9px] text-zinc-500 uppercase font-black tracking-[0.3em] mt-1",children:"Canal de Reporte de Anomalias"})]}),C.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center bg-zinc-800/50 rounded-xl text-zinc-500 hover:text-white transition-all",children:C.jsx("i",{className:"fas fa-times"})})]}),C.jsx("div",{className:"flex-1 overflow-y-auto pr-1 custom-scrollbar pb-6",children:g?C.jsxs("div",{className:"flex flex-col items-center text-center py-10 animate-in fade-in slide-in-from-top-4",children:[C.jsx("div",{className:"w-20 h-20 bg-emerald-500/10 rounded-full flex items-center justify-center border-2 border-emerald-500/20 mb-6 shadow-2xl",children:C.jsx("i",{className:"fas fa-check-circle text-4xl text-emerald-500"})}),C.jsx("h3",{className:"text-xl font-orbitron font-black text-white mb-4 uppercase italic tracking-tighter",children:"REPORTE RECEBIDO"}),C.jsxs("div",{className:"bg-black/60 p-6 rounded-3xl border border-zinc-800 relative mb-10 text-left",children:[C.jsx("div",{className:"absolute -top-3 left-6 bg-zinc-800 px-3 py-1 rounded-full text-[8px] font-black text-emerald-500 uppercase tracking-widest border border-zinc-700",children:"Engenharia de Combate"}),C.jsxs("p",{className:"text-emerald-500/90 font-mono text-sm leading-relaxed italic",children:['"',g,'"']})]}),C.jsx("button",{onClick:e,className:"w-full py-5 bg-zinc-800 hover:bg-zinc-700 text-white font-orbitron font-black rounded-2xl transition-all uppercase text-[10px] tracking-[0.3em] border border-zinc-700",children:"VOLTAR AO COMBATE"})]}):C.jsxs("form",{onSubmit:v,className:"space-y-8",children:[C.jsxs("div",{className:"space-y-3",children:[C.jsx("label",{className:"text-[10px] text-zinc-500 font-black uppercase ml-1 tracking-widest",children:"Classificao da Anomalia"}),C.jsx("div",{className:"grid grid-cols-3 gap-3",children:["BUG","SUGGESTION","CRASH"].map(_=>C.jsx("button",{type:"button",onClick:()=>s(_),className:`py-3 rounded-xl text-[10px] font-black tracking-widest transition-all border ${i===_?"bg-amber-500/20 border-amber-500 text-amber-500 shadow-[0_0_15px_rgba(245,158,11,0.2)]":"bg-black/40 border-zinc-800 text-zinc-600 hover:border-zinc-700"}`,children:_==="BUG"?"FALHA":_==="SUGGESTION"?"IDEIA":"CRITICAL"},_))})]}),C.jsxs("div",{className:"space-y-3",children:[C.jsx("label",{className:"text-[10px] text-zinc-500 font-black uppercase ml-1 tracking-widest",children:"Descrio Tcnica"}),C.jsx("textarea",{value:l,onChange:_=>a(_.target.value),placeholder:"Descreva o erro ou sua sugesto aqui, operador...",className:"w-full h-40 bg-black/40 border border-zinc-800 rounded-2xl p-5 text-amber-500/80 font-mono text-sm focus:outline-none focus:border-amber-500/40 transition-all placeholder:text-zinc-800 resize-none",required:!0})]}),C.jsx("button",{type:"submit",disabled:c||!l.trim(),className:"w-full py-5 bg-amber-600 hover:bg-amber-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-orbitron font-black rounded-2xl transition-all uppercase text-[11px] tracking-[0.3em] shadow-[0_15px_40px_rgba(245,158,11,0.2)] active:scale-95 flex items-center justify-center gap-3",children:c?C.jsxs(C.Fragment,{children:[C.jsx("i",{className:"fas fa-cog animate-spin"})," ENVIANDO DOSSI..."]}):C.jsxs(C.Fragment,{children:[C.jsx("i",{className:"fas fa-paper-plane"})," TRANSMITIR REPORTE"]})})]})}),C.jsx("div",{className:"pt-6 border-t border-zinc-800/80 flex justify-center shrink-0",children:C.jsx("p",{className:"text-[8px] text-zinc-600 font-black uppercase tracking-[0.5em] opacity-40",children:"Protocolo de Manuteno v3.0"})})]})},aa=[{minLevel:300,title:"Marechal Supremo",icon:"fa-crown",color:"text-red-500",badgeBg:"from-red-600 via-rose-500 to-red-900",borderColor:"border-red-400",shadowColor:"shadow-red-500/50"},{minLevel:250,title:"General de Diviso Estelar",icon:"fa-star-shooting",color:"text-amber-300",badgeBg:"from-amber-400 via-red-600 to-zinc-950",borderColor:"border-amber-400",shadowColor:"shadow-red-600/50"},{minLevel:210,title:"Coronel de Elite",icon:"fa-shield-halved",color:"text-blue-500",badgeBg:"from-blue-600 via-cyan-500 to-indigo-900",borderColor:"border-blue-400",shadowColor:"shadow-blue-500/40"},{minLevel:170,title:"Major de Assalto",icon:"fa-medal",color:"text-emerald-400",badgeBg:"from-emerald-500 via-teal-500 to-green-900",borderColor:"border-emerald-400",shadowColor:"shadow-emerald-500/30"},{minLevel:130,title:"Capito de Diviso",icon:"fa-crosshairs",color:"text-purple-400",badgeBg:"from-purple-500 via-violet-500 to-purple-900",borderColor:"border-purple-400",shadowColor:"shadow-purple-500/30"},{minLevel:90,title:"Tenente Ttico",icon:"fa-bolt",color:"text-cyan-400",badgeBg:"from-cyan-400 via-sky-500 to-blue-800",borderColor:"border-cyan-400",shadowColor:"shadow-cyan-500/30"},{minLevel:60,title:"Sargento Veterano",icon:"fa-chevron-up",color:"text-zinc-200",badgeBg:"from-zinc-300 via-zinc-400 to-zinc-700",borderColor:"border-zinc-300",shadowColor:"shadow-zinc-400/30"},{minLevel:30,title:"Cabo de Infantaria",icon:"fa-angle-up",color:"text-orange-400",badgeBg:"from-orange-500 via-amber-600 to-orange-900",borderColor:"border-orange-500",shadowColor:"shadow-orange-700/30"},{minLevel:10,title:"Soldado Raso",icon:"fa-minus",color:"text-zinc-500",badgeBg:"from-zinc-600 via-zinc-700 to-black",borderColor:"border-zinc-600",shadowColor:"shadow-black/20"},{minLevel:0,title:"Recruta",icon:"fa-circle",color:"text-zinc-600",badgeBg:"from-zinc-800 via-zinc-900 to-black",borderColor:"border-zinc-800",shadowColor:"shadow-transparent"}],qa=t=>aa.find(e=>t>=e.minLevel)||aa[aa.length-1],Al=t=>t*1e3,oa={playerRoundWins:0,enemyRoundWins:0,currentRound:1,isGameOver:!1,isPaused:!1,highScore:0,mode:"OFFLINE",lives:5,currentLevel:1},BU=()=>{const[t,e]=de.useState("AUTH"),[i,s]=de.useState(null),[l,a]=de.useState(null),[c,h]=de.useState(oa),[g,m]=de.useState([]),[v,_]=de.useState(""),[E,x]=de.useState(!1),[N,D]=de.useState(0),[U,G]=de.useState(0),[K,F]=de.useState(0);de.useEffect(()=>{ye.users.seed();const M=ye.session.get();if(M){s(M);const J=ye.gameState.get();h(J||{...oa,highScore:M.highScore}),e("MENU")}m(ye.ranking.getTop())},[]),de.useEffect(()=>{t==="PLAYING"&&ye.gameState.save(c)},[c,t]);const X=M=>{s(M),ye.session.set(M),h(J=>({...J,highScore:M.highScore})),m(ye.ranking.getTop()),e("MENU")},se=()=>{s(null),ye.session.clear(),h(oa),e("AUTH")},te=async M=>{const J=await ye.users.update(M.username,M);(i==null?void 0:i.username)===M.username&&s(J),(l==null?void 0:l.username)===M.username&&a(J),m(ye.ranking.getTop())},Y=M=>{const J=ye.users.getByUsername(M);J&&(a(J),e("OTHER_PROFILE"))},ne=de.useCallback(async(M,J,ae)=>{ye.gameState.clear(),F(ae);const ie=Math.floor(ae*5),re=Math.floor(J/5)+ae*200;if(D(re),G(ie),i){let $=i.level||1,w=(i.xp||0)+re,q=(i.victoryPoints||0)+ie,j=Math.max(i.maxLevelReached||0,ae),ue=Al($);for(;w>=ue;)w-=ue,$++,ue=Al($);await te({...i,victoryPoints:q,highScore:Math.max(i.highScore,J),level:$,xp:w,maxLevelReached:j})}e("GAMEOVER"),x(!0);const _e=await zU(J,(i==null?void 0:i.highScore)||0);_(_e),x(!1)},[i]);return C.jsxs("div",{className:"fixed inset-0 w-full h-full bg-black flex flex-col items-center justify-center overflow-hidden touch-none",children:[C.jsx("div",{className:"scanline fixed inset-0 pointer-events-none opacity-10"}),t==="AUTH"&&C.jsx(AR,{onSuccess:X}),t==="MENU"&&i&&C.jsx(GC,{onPlay:M=>{const J={...oa,mode:M,highScore:i.highScore};h(J),ye.gameState.save(J),e("LOADING")},onShowRanking:()=>{m(ye.ranking.getTop()),e("RANKING")},onShowCredits:()=>e("CREDITS"),onShowProfile:()=>e("PROFILE"),onShowFeedback:()=>e("FEEDBACK"),onLogout:se,highScore:i.highScore,top3:g.slice(0,3),user:i}),t==="PROFILE"&&i&&C.jsx(Wy,{user:i,onUpdate:te,onBack:()=>e("MENU")}),t==="OTHER_PROFILE"&&i&&l&&C.jsx(Wy,{user:l,viewer:i,onUpdate:te,onBack:()=>e("RANKING")}),t==="FEEDBACK"&&i&&C.jsx(HU,{user:i,onBack:()=>e("MENU")}),t==="LOADING"&&C.jsx(qC,{onComplete:()=>e("PLAYING"),isOnline:c.mode==="ONLINE"}),t==="RANKING"&&C.jsx(BC,{leaderboard:g,onBack:()=>e("MENU"),onViewProfile:Y}),t==="CREDITS"&&C.jsx(VC,{onBack:()=>e("MENU")}),t==="PLAYING"&&i&&C.jsx(zC,{onGameOver:ne,userName:i.username,mode:c.mode}),t==="GAMEOVER"&&i&&C.jsx(HC,{score:i.highScore,highScore:i.highScore,report:v,isLoadingReport:E,onSave:()=>e("MENU"),onRestart:()=>e("LOADING"),defaultName:i.username,xpGained:N,vpGained:U,currentLevel:i.level,currentXp:i.xp,levelsCleared:K})]})},tS=document.getElementById("root");if(!tS)throw new Error("Could not find root element to mount to");const VU=PC.createRoot(tS);VU.render(C.jsx(RC.StrictMode,{children:C.jsx(BU,{})}));
